<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>
    Debian Live Manual
  </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="dc.title" content="Debian Live Manual">
<meta name="dc.author" content="Debian Live Project &lt;debian-live@lists.debian.org&gt;">
<meta name="dc.publisher" content="Debian Live Project &lt;debian-live@lists.debian.org&gt;">
<meta name="dc.date" content="2012-11-10">
<meta name="dc.rights" content="Copyright (C) 2006-2012 Debian Live Project;&lt;br&gt; License: This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.&lt;br&gt;&lt;br&gt;This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.&lt;br&gt;&lt;br&gt;You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/. &lt;br&gt;&lt;br&gt;The complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL-3 file.">
<meta name="generator" content="SiSU 3.1.12 of 2012w04/1 (2012-01-23) (n*x and Ruby!)">
<link rel="generator" href="http://www.sisudoc.org/">
<link rel="shortcut icon" href="../_sisu/image/rb7.ico">
<link rel="stylesheet" href="../_sisu/css/html.css" type="text/css">
<link rel="stylesheet" href="../../_sisu/css/html.css" type="text/css">
</head>
<body bgcolor="#ffffff" text="#000000" link="#003090" lang="en" xml:lang="en">
<a name="top" id="top"></a>
<a name="up" id="up"></a>
<a name="start" id="start"></a>

<p></p>

<center>

</center>
<p class="small_left">Rights: Copyright <sup>©</sup>  2006-2012 Debian Live Project;<br> License: This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.<br><br>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.<br><br>You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/. <br><br>The complete text of the GNU General Public License can be found in /usr/share/common-licenses/GPL-3 file.</p>
<p></p>

<br><h1 class="toc">
    <b><a href="#1">Debian Live Manual</a></b>
  </h1>

<h2 class="toc">
    <a href="#2">About</a>
  </h2>

<h4 class="toc">
    <a href="#3">1. About this manual</a>
  </h4>

<h5 class="toc">
    <a href="#7">1.1 For the impatient</a>
  </h5>

<h5 class="toc">
    <a href="#11">1.2 Terms</a>
  </h5>

<h5 class="toc">
    <a href="#27">1.3 Authors</a>
  </h5>

<h5 class="toc">
    <a href="#42">1.4 Contributing to this document</a>
  </h5>

<h6 class="toc">
    <a href="#44">1.4.1 Applying changes</a>
  </h6>

<h6 class="toc">
    <a href="#56">1.4.2 Translation</a>
  </h6>

<h4 class="toc">
    <a href="#65">2. About the Debian Live Project</a>
  </h4>

<h5 class="toc">
    <a href="#66">2.1 Motivation</a>
  </h5>

<h6 class="toc">
    <a href="#67">2.1.1 What is wrong with current live systems</a>
  </h6>

<h6 class="toc">
    <a href="#77">2.1.2 Why create our own live system?</a>
  </h6>

<h5 class="toc">
    <a href="#85">2.2 Philosophy</a>
  </h5>

<h6 class="toc">
    <a href="#86">2.2.1 Only unchanged packages from Debian "main"</a>
  </h6>

<h6 class="toc">
    <a href="#90">2.2.2 No package configuration of the live system</a>
  </h6>

<h5 class="toc">
    <a href="#95">2.3 Contact</a>
  </h5>

<h2 class="toc">
    <a href="#99">User</a>
  </h2>

<h4 class="toc">
    <a href="#100">3. Installation</a>
  </h4>

<h5 class="toc">
    <a href="#101">3.1 Requirements</a>
  </h5>

<h5 class="toc">
    <a href="#109">3.2 Installing live-build</a>
  </h5>

<h6 class="toc">
    <a href="#115">3.2.1 From the Debian repository</a>
  </h6>

<h6 class="toc">
    <a href="#120">3.2.2 From source</a>
  </h6>

<h6 class="toc">
    <a href="#131">3.2.3 From 'snapshots'</a>
  </h6>

<h5 class="toc">
    <a href="#133">3.3 Installing live-boot and live-config</a>
  </h5>

<h6 class="toc">
    <a href="#135">3.3.1 From the Debian repository</a>
  </h6>

<h6 class="toc">
    <a href="#137">3.3.2 From source</a>
  </h6>

<h6 class="toc">
    <a href="#149">3.3.3 From 'snapshots'</a>
  </h6>

<h4 class="toc">
    <a href="#152">4. The basics</a>
  </h4>

<h5 class="toc">
    <a href="#155">4.1 What is a live system?</a>
  </h5>

<h5 class="toc">
    <a href="#163">4.2 First steps: building an ISO hybrid image</a>
  </h5>

<h5 class="toc">
    <a href="#171">4.3 Using an ISO hybrid live image</a>
  </h5>

<h6 class="toc">
    <a href="#173">4.3.1 Burning an ISO image to a physical medium</a>
  </h6>

<h6 class="toc">
    <a href="#176">4.3.2 Copying an ISO hybrid image to a USB stick</a>
  </h6>

<h6 class="toc">
    <a href="#180">4.3.3 Booting the live media</a>
  </h6>

<h5 class="toc">
    <a href="#184">4.4 Using a virtual machine for testing</a>
  </h5>

<h6 class="toc">
    <a href="#191">4.4.1 Testing an ISO image with QEMU</a>
  </h6>

<h6 class="toc">
    <a href="#198">4.4.2 Testing an ISO image with virtualbox</a>
  </h6>

<h5 class="toc">
    <a href="#204">4.5 Building an HDD image</a>
  </h5>

<h5 class="toc">
    <a href="#213">4.6 Using an HDD image</a>
  </h5>

<h6 class="toc">
    <a href="#215">4.6.1 Testing an HDD image with Qemu</a>
  </h6>

<h6 class="toc">
    <a href="#218">4.6.2 Using the space left on a USB stick</a>
  </h6>

<h5 class="toc">
    <a href="#225">4.7 Building a netboot image</a>
  </h5>

<h6 class="toc">
    <a href="#237">4.7.1 DHCP server</a>
  </h6>

<h6 class="toc">
    <a href="#241">4.7.2 TFTP server</a>
  </h6>

<h6 class="toc">
    <a href="#246">4.7.3 NFS server</a>
  </h6>

<h6 class="toc">
    <a href="#254">4.7.4 Netboot testing HowTo</a>
  </h6>

<h6 class="toc">
    <a href="#257">4.7.5 Qemu</a>
  </h6>

<h6 class="toc">
    <a href="#263">4.7.6 VMWare Player</a>
  </h6>

<h4 class="toc">
    <a href="#271">5. Overview of tools</a>
  </h4>

<h5 class="toc">
    <a href="#273">5.1 The live-build package</a>
  </h5>

<h6 class="toc">
    <a href="#284">5.1.1 The <tt>lb config</tt> command</a>
  </h6>

<h6 class="toc">
    <a href="#294">5.1.2 The <tt>lb build</tt> command</a>
  </h6>

<h6 class="toc">
    <a href="#296">5.1.3 The <tt>lb clean</tt> command</a>
  </h6>

<h5 class="toc">
    <a href="#298">5.2 The live-boot package</a>
  </h5>

<h5 class="toc">
    <a href="#302">5.3 The live-config package</a>
  </h5>

<h4 class="toc">
    <a href="#304">6. Managing a configuration</a>
  </h4>

<h5 class="toc">
    <a href="#306">6.1 Dealing with configuration changes</a>
  </h5>

<h6 class="toc">
    <a href="#308">6.1.1 Why use auto scripts? What do they do?</a>
  </h6>

<h6 class="toc">
    <a href="#311">6.1.2 Use example auto scripts</a>
  </h6>

<h5 class="toc">
    <a href="#318">6.2 Clone a configuration published via Git</a>
  </h5>

<h4 class="toc">
    <a href="#327">7. Customization overview</a>
  </h4>

<h5 class="toc">
    <a href="#329">7.1 Build time vs. boot time configuration</a>
  </h5>

<h5 class="toc">
    <a href="#332">7.2 Stages of the build</a>
  </h5>

<h5 class="toc">
    <a href="#335">7.3 Supplement lb config with files</a>
  </h5>

<h5 class="toc">
    <a href="#337">7.4 Customization tasks</a>
  </h5>

<h4 class="toc">
    <a href="#339">8. Customizing package installation</a>
  </h4>

<h5 class="toc">
    <a href="#341">8.1 Package sources</a>
  </h5>

<h6 class="toc">
    <a href="#342">8.1.1 Distribution, archive areas and mode</a>
  </h6>

<h6 class="toc">
    <a href="#349">8.1.2 Distribution mirrors</a>
  </h6>

<h6 class="toc">
    <a href="#351">8.1.3 Distribution mirrors used at build time</a>
  </h6>

<h6 class="toc">
    <a href="#355">8.1.4 Distribution mirrors used at run time</a>
  </h6>

<h6 class="toc">
    <a href="#358">8.1.5 Additional repositories</a>
  </h6>

<h5 class="toc">
    <a href="#367">8.2 Choosing packages to install</a>
  </h5>

<h6 class="toc">
    <a href="#369">8.2.1 Package lists</a>
  </h6>

<h6 class="toc">
    <a href="#372">8.2.2 Using metapackages</a>
  </h6>

<h6 class="toc">
    <a href="#380">8.2.3 Local package lists</a>
  </h6>

<h6 class="toc">
    <a href="#384">8.2.4 Local binary package lists</a>
  </h6>

<h6 class="toc">
    <a href="#386">8.2.5 Generated package lists</a>
  </h6>

<h6 class="toc">
    <a href="#390">8.2.6 Using conditionals inside package lists</a>
  </h6>

<h6 class="toc">
    <a href="#401">8.2.7 Desktop and language tasks</a>
  </h6>

<h6 class="toc">
    <a href="#406">8.2.8 Kernel flavour and version</a>
  </h6>

<h6 class="toc">
    <a href="#411">8.2.9 Custom kernels</a>
  </h6>

<h5 class="toc">
    <a href="#420">8.3 Installing modified or third-party packages</a>
  </h5>

<h6 class="toc">
    <a href="#427">8.3.1 Using <tt>packages.chroot</tt> to install custom packages</a>
  </h6>

<h6 class="toc">
    <a href="#434">8.3.2 Using an APT repository to install custom packages</a>
  </h6>

<h6 class="toc">
    <a href="#437">8.3.3 Custom packages and APT</a>
  </h6>

<h5 class="toc">
    <a href="#440">8.4 Configuring APT at build time</a>
  </h5>

<h6 class="toc">
    <a href="#442">8.4.1 Choosing apt or aptitude</a>
  </h6>

<h6 class="toc">
    <a href="#446">8.4.2 Using a proxy with APT</a>
  </h6>

<h6 class="toc">
    <a href="#449">8.4.3 Tweaking APT to save space</a>
  </h6>

<h6 class="toc">
    <a href="#458">8.4.4 Passing options to apt or aptitude</a>
  </h6>

<h6 class="toc">
    <a href="#463">8.4.5 APT pinning</a>
  </h6>

<h4 class="toc">
    <a href="#469">9. Customizing contents</a>
  </h4>

<h5 class="toc">
    <a href="#471">9.1 Includes</a>
  </h5>

<h6 class="toc">
    <a href="#476">9.1.1 Live/chroot local includes</a>
  </h6>

<h6 class="toc">
    <a href="#483">9.1.2 Binary local includes</a>
  </h6>

<h5 class="toc">
    <a href="#487">9.2 Hooks</a>
  </h5>

<h6 class="toc">
    <a href="#489">9.2.1 Live/chroot local hooks</a>
  </h6>

<h6 class="toc">
    <a href="#491">9.2.2 Boot-time hooks</a>
  </h6>

<h6 class="toc">
    <a href="#493">9.2.3 Binary local hooks</a>
  </h6>

<h5 class="toc">
    <a href="#495">9.3 Preseeding Debconf questions</a>
  </h5>

<h4 class="toc">
    <a href="#498">10. Customizing run time behaviours</a>
  </h4>

<h5 class="toc">
    <a href="#500">10.1 Customizing the live user</a>
  </h5>

<h5 class="toc">
    <a href="#508">10.2 Customizing locale and language</a>
  </h5>

<h5 class="toc">
    <a href="#525">10.3 Persistence</a>
  </h5>

<h6 class="toc">
    <a href="#547">10.3.1 The persistence.conf file</a>
  </h6>

<h6 class="toc">
    <a href="#553">10.3.2 Using more than one persistence store</a>
  </h6>

<h4 class="toc">
    <a href="#555">11. Customizing the binary image</a>
  </h4>

<h5 class="toc">
    <a href="#556">11.1 Bootloader</a>
  </h5>

<h5 class="toc">
    <a href="#569">11.2 ISO metadata</a>
  </h5>

<h4 class="toc">
    <a href="#575">12. Customizing Debian Installer</a>
  </h4>

<h5 class="toc">
    <a href="#578">12.1 Types of Debian Installer</a>
  </h5>

<h5 class="toc">
    <a href="#590">12.2 Customizing Debian Installer by preseeding</a>
  </h5>

<h5 class="toc">
    <a href="#593">12.3 Customizing Debian Installer content</a>
  </h5>

<h2 class="toc">
    <a href="#595">Project</a>
  </h2>

<h4 class="toc">
    <a href="#596">13. Contributing to the project</a>
  </h4>

<h5 class="toc">
    <a href="#608">13.1 Making changes</a>
  </h5>

<h4 class="toc">
    <a href="#623">14. Reporting bugs</a>
  </h4>

<h5 class="toc">
    <a href="#629">14.1 Known issues</a>
  </h5>

<h5 class="toc">
    <a href="#634">14.2 Rebuild from scratch</a>
  </h5>

<h5 class="toc">
    <a href="#636">14.3 Use up-to-date packages</a>
  </h5>

<h5 class="toc">
    <a href="#638">14.4 Collect information</a>
  </h5>

<h5 class="toc">
    <a href="#655">14.5 Isolate the failing case if possible</a>
  </h5>

<h5 class="toc">
    <a href="#657">14.6 Use the correct package to report the bug against</a>
  </h5>

<h6 class="toc">
    <a href="#660">14.6.1 At build time while bootstrapping</a>
  </h6>

<h6 class="toc">
    <a href="#663">14.6.2 At build time while installing packages</a>
  </h6>

<h6 class="toc">
    <a href="#667">14.6.3 At boot time</a>
  </h6>

<h6 class="toc">
    <a href="#669">14.6.4 At run time</a>
  </h6>

<h5 class="toc">
    <a href="#671">14.7 Do the research</a>
  </h5>

<h5 class="toc">
    <a href="#675">14.8 Where to report bugs</a>
  </h5>

<h4 class="toc">
    <a href="#679">15. Coding Style</a>
  </h4>

<h5 class="toc">
    <a href="#681">15.1 Compatibility</a>
  </h5>

<h5 class="toc">
    <a href="#686">15.2 Indenting</a>
  </h5>

<h5 class="toc">
    <a href="#688">15.3 Wrapping</a>
  </h5>

<h5 class="toc">
    <a href="#700">15.4 Variables</a>
  </h5>

<h5 class="toc">
    <a href="#719">15.5 Miscellaneous</a>
  </h5>

<h4 class="toc">
    <a href="#724">16. Procedures</a>
  </h4>

<h5 class="toc">
    <a href="#726">16.1 Major Releases</a>
  </h5>

<h5 class="toc">
    <a href="#733">16.2 Point Releases</a>
  </h5>

<h6 class="toc">
    <a href="#737">16.2.1 Last Point Release of a Debian Release</a>
  </h6>

<h6 class="toc">
    <a href="#739">16.2.2 Point release announcement template</a>
  </h6>

<h4 class="toc">
    <a href="#744">17. Git repositories</a>
  </h4>

<h5 class="toc">
    <a href="#758">17.1 Handling multiple repositories</a>
  </h5>

<h2 class="toc">
    <a href="#762">Examples</a>
  </h2>

<h4 class="toc">
    <a href="#763">18. Examples</a>
  </h4>

<h5 class="toc">
    <a href="#765">18.1 Using the examples</a>
  </h5>

<h5 class="toc">
    <a href="#769">18.2 Tutorial 1: A standard image</a>
  </h5>

<h5 class="toc">
    <a href="#778">18.3 Tutorial 2: A web browser utility</a>
  </h5>

<h5 class="toc">
    <a href="#786">18.4 Tutorial 3: A personalized image</a>
  </h5>

<h6 class="toc">
    <a href="#789">18.4.1 First revision</a>
  </h6>

<h6 class="toc">
    <a href="#803">18.4.2 Second revision</a>
  </h6>

<h5 class="toc">
    <a href="#815">18.5 A VNC Kiosk Client</a>
  </h5>

<h5 class="toc">
    <a href="#829">18.6 A base image for a 128MB USB key</a>
  </h5>

<h5 class="toc">
    <a href="#840">18.7 A localized KDE desktop and installer</a>
  </h5>

<h2 class="toc">
    <a href="#852">Appendix</a>
  </h2>

<h4 class="toc">
    <a href="#853">19. Style guide</a>
  </h4>

<h5 class="toc">
    <a href="#854">19.1 Guidelines for authors</a>
  </h5>

<h6 class="toc">
    <a href="#857">19.1.1 Linguistic features</a>
  </h6>

<h6 class="toc">
    <a href="#890">19.1.2 Procedures</a>
  </h6>

<h5 class="toc">
    <a href="#929">19.2 Guidelines for translators</a>
  </h5>

<h6 class="toc">
    <a href="#933">19.2.1 Translation hints</a>
  </h6>

<div class="scroll">

<center><hr width="90%"></center>

<div class="substance">
  <label class="ocn"><a name="1" href="#1" class="lnkocn">1</a></label>
  <h1 class="norm" id="o1">
<a name="1"></a>
    <a name="h">Debian Live Manual</a>
  </h1>
</div>

<div class="substance">
  <label class="ocn"><a name="2" href="#2" class="lnkocn">2</a></label>
  <h2 class="norm" id="o2">
<a name="2"></a>
    <a name="h">About</a>
  </h2>
</div>

<div class="substance">
  <label class="ocn"><a name="3" href="#3" class="lnkocn">3</a></label>
  <h4 class="norm" id="o3">
<a name="3"></a>
    <a name="h1"></a><a name="about_this_manual"></a><a name="about-manual"></a><a name="habout-manual">1. About this manual</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="4" href="#4" class="lnkocn">4</a></label>
  <p class="i0" id="o4">
    This manual serves as a single access point to all documentation related to the Debian Live project and in particular applies to the software produced by the project for the Debian 7.0 "<b>wheezy</b>" release. An up-to-date version can always be found at ‹<a href="http://live.debian.net/" target="_top">http://live.debian.net/</a>›
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="5" href="#5" class="lnkocn">5</a></label>
  <p class="i0" id="o5">
    While <i>live-manual</i> is primarily focused on helping you build a live system and not on end-user topics, an end-user may find some useful information in these sections:  <a href="#the-basics">The Basics</a>  covers preparing images to be booted from media or the network, and  <a href="#customizing-run-time-behaviours">Customizing run time behaviours</a>  describes some options that may be specified at the boot prompt, such as selecting a keyboard layout and locale, and using persistence.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="6" href="#6" class="lnkocn">6</a></label>
  <p class="i0" id="o6">
    Some of the commands mentioned in the text must be executed with superuser privileges which can be obtained by becoming the root user via <tt>su</tt> or by using <tt>sudo</tt>. To distinguish between commands which may be executed by an unprivileged user and those requiring superuser privileges, commands are prepended by <tt>$</tt> or <tt>#</tt> respectively. This symbol is not a part of the command.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="7" href="#7" class="lnkocn">7</a></label>
  <h5 class="norm" id="o7">
<a name="7"></a>
    <a name="1.1"></a><a name="h1.1"></a><a name="h1.1">1.1 For the impatient</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="8" href="#8" class="lnkocn">8</a></label>
  <p class="i0" id="o8">
    While we believe that everything in this manual is important to at least some of our users, we realize it is a lot of material to cover and that you may wish to experience early success using the software before delving into the details. Therefore, we suggest reading in the following order.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="9" href="#9" class="lnkocn">9</a></label>
  <p class="i0" id="o9">
    First, read this chapter,  <a href="#about-manual">About this manual</a>,  from the beginning and ending with the  <a href="#terms">Terms</a>  section. Next, skip to the three tutorials at the front of the  <a href="#examples">Examples</a>  section designed to teach you image building and customization basics. Read  <a href="#using-the-examples">Using the examples</a>  first, followed by  <a href="#tutorial-1">Tutorial 1: A standard image</a>,   <a href="#tutorial-2">Tutorial 2: A web browser utility</a>  and finally  <a href="#tutorial-3">Tutorial 3: A personalized image</a>.  By the end of these tutorials, you will have a taste of what can be done with Debian Live.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="10" href="#10" class="lnkocn">10</a></label>
  <p class="i0" id="o10">
    We encourage you to return to more in-depth study of the manual, perhaps next reading  <a href="#the-basics">The basics</a>,  skimming or skipping  <a href="#building-netboot-image">Building a netboot image</a>,  and finishing by reading the  <a href="#customization-overview">Customization overview</a>  and the chapters that follow it. By this point, we hope you are thoroughly excited by what can be done with Debian Live and motivated to read the rest of the manual, cover-to-cover.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="11" href="#11" class="lnkocn">11</a></label>
  <h5 class="norm" id="o11">
<a name="11"></a>
    <a name="h1.2"></a><a name="terms"></a><a name="hterms">1.2 Terms</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="12" href="#12" class="lnkocn">12</a></label>
  <li class="bullet" id="o12">
    <b>Live system</b>: An operating system that can boot without installation to a hard drive. Live systems do not alter local operating system(s) or file(s) already installed on the computer hard drive unless instructed to do so. Live systems are typically booted from media such as CDs, DVDs or USB sticks. Some may also boot over the network.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="13" href="#13" class="lnkocn">13</a></label>
  <li class="bullet" id="o13">
    <b>Debian Live</b>: The Debian sub-project which maintains, among others, the <i>live-boot</i>, <i>live-build</i>, <i>live-config</i> and <i>live-manual</i> packages.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="14" href="#14" class="lnkocn">14</a></label>
  <li class="bullet" id="o14">
    <b>Debian Live system</b>: A live system that uses software from the Debian operating system that may be booted from CDs, DVDs, USB sticks, over the network (via netboot images), and over the Internet (via boot parameter <tt>fetch=URL</tt>).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="15" href="#15" class="lnkocn">15</a></label>
  <li class="bullet" id="o15">
    <b>Host system</b>: The environment used to create the live system.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="16" href="#16" class="lnkocn">16</a></label>
  <li class="bullet" id="o16">
    <b>Target system</b>: The environment used to run the live system.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="17" href="#17" class="lnkocn">17</a></label>
  <li class="bullet" id="o17">
    <b><i>live-boot</i></b>: A collection of scripts used to boot live systems. <i>live-boot</i> was formerly a part of <i>live-initramfs</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="18" href="#18" class="lnkocn">18</a></label>
  <li class="bullet" id="o18">
    <b><i>live-build</i></b>: A collection of scripts used to build customized Debian Live systems. <i>live-build</i> was formerly known as <i>live-helper</i>, and even earlier known as <i>live-package</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="19" href="#19" class="lnkocn">19</a></label>
  <li class="bullet" id="o19">
    <b><i>live-config</i></b>: A collection of scripts used to configure a live system during the boot process. <i>live-config</i> was formerly a part of <i>live-initramfs</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="20" href="#20" class="lnkocn">20</a></label>
  <li class="bullet" id="o20">
    <b><i>live-manual</i></b>: This document is maintained in a package called <i>live-manual</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="21" href="#21" class="lnkocn">21</a></label>
  <li class="bullet" id="o21">
    <b>Debian Installer (d-i)</b>: The official installation system for the Debian distribution.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="22" href="#22" class="lnkocn">22</a></label>
  <li class="bullet" id="o22">
    <b>Boot parameters</b>: Parameters that can be entered at the bootloader prompt to influence the kernel or <i>live-config</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="23" href="#23" class="lnkocn">23</a></label>
  <li class="bullet" id="o23">
    <b>chroot</b>: The <i>chroot</i> program, <tt>chroot(8)</tt>, enables us to run different instances of the GNU/Linux environment on a single system simultaneously without rebooting.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="24" href="#24" class="lnkocn">24</a></label>
  <li class="bullet" id="o24">
    <b>Binary image</b>: A file containing the live system, such as binary.iso or binary.img.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="25" href="#25" class="lnkocn">25</a></label>
  <li class="bullet" id="o25">
    <b>Target distribution</b>: The distribution upon which your live system will be based. This can differ from the distribution of your host system.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="26" href="#26" class="lnkocn">26</a></label>
  <li class="bullet" id="o26">
    <b>stable/testing/unstable</b>: The <b>stable</b> distribution contains the latest officially released distribution of Debian. The <b>testing</b> distribution is the staging area for the next <b>stable</b> release. A major advantage of using this distribution is that it has more recent versions of software relative to the <b>stable</b> release. The <b>unstable</b> distribution is where active development of Debian occurs. Generally, this distribution is run by developers and those who like to live on the edge. Throughout the manual, we tend to use codenames for the releases, such as <b>wheezy</b> or <b>sid</b>, as that is what is supported by the tools themselves.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="27" href="#27" class="lnkocn">27</a></label>
  <h5 class="norm" id="o27">
<a name="27"></a>
    <a name="1.3"></a><a name="h1.3"></a><a name="h1.3">1.3 Authors</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="28" href="#28" class="lnkocn">28</a></label>
  <p class="i0" id="o28">
    A list of authors (in alphabetical order):
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="29" href="#29" class="lnkocn">29</a></label>
  <li class="bullet" id="o29">
    Ben Armstrong
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="30" href="#30" class="lnkocn">30</a></label>
  <li class="bullet" id="o30">
    Brendan Sleight
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="31" href="#31" class="lnkocn">31</a></label>
  <li class="bullet" id="o31">
    Carlos Zuferri
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="32" href="#32" class="lnkocn">32</a></label>
  <li class="bullet" id="o32">
    Chris Lamb
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="33" href="#33" class="lnkocn">33</a></label>
  <li class="bullet" id="o33">
    Daniel Baumann
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="34" href="#34" class="lnkocn">34</a></label>
  <li class="bullet" id="o34">
    Franklin Piat
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="35" href="#35" class="lnkocn">35</a></label>
  <li class="bullet" id="o35">
    Jonas Stein
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="36" href="#36" class="lnkocn">36</a></label>
  <li class="bullet" id="o36">
    Kai Hendry
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="37" href="#37" class="lnkocn">37</a></label>
  <li class="bullet" id="o37">
    Marco Amadori
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="38" href="#38" class="lnkocn">38</a></label>
  <li class="bullet" id="o38">
    Mathieu Geli
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="39" href="#39" class="lnkocn">39</a></label>
  <li class="bullet" id="o39">
    Matthias Kirschner
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="40" href="#40" class="lnkocn">40</a></label>
  <li class="bullet" id="o40">
    Richard Nelson
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="41" href="#41" class="lnkocn">41</a></label>
  <li class="bullet" id="o41">
    Trent W. Buck
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="42" href="#42" class="lnkocn">42</a></label>
  <h5 class="norm" id="o42">
<a name="42"></a>
    <a name="h1.4"></a><a name="how-to-contribute"></a><a name="hhow-to-contribute">1.4 Contributing to this document</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="43" href="#43" class="lnkocn">43</a></label>
  <p class="i0" id="o43">
    This manual is intended as a community project and all proposals for improvements and contributions are extremely welcome. Please see the section  <a href="#contributing-to-project">Contributing to the project</a>  for detailed information on how to fetch the commit key and make good commits.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="44" href="#44" class="lnkocn">44</a></label>
  <h6 class="norm" id="o44">
<a name="44"></a>
    <a name="1.4.1"></a><a name="h1.4.1"></a><a name="h1.4.1">1.4.1 Applying changes</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="45" href="#45" class="lnkocn">45</a></label>
  <p class="i0" id="o45">
    In order to make changes to the English manual you have to edit the right files in <tt>manual/en/</tt> but prior to the submission of your contribution, please preview your work. To preview the <i>live-manual</i>, ensure the packages needed for building it are installed by executing:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="46" href="#46" class="lnkocn">46</a></label>
  <p class="code" id="o46">
    # apt-get install make po4a sisu-complete libnokogiri-ruby<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="47" href="#47" class="lnkocn">47</a></label>
  <p class="i0" id="o47">
    You may build the <i>live-manual</i> from the top level directory of your Git checkout by executing:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="48" href="#48" class="lnkocn">48</a></label>
  <p class="code" id="o48">
    $ make build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="49" href="#49" class="lnkocn">49</a></label>
  <p class="i0" id="o49">
    Since it takes a while to build the manual in all supported languages, you may find it convenient when proofing to build for only one language, e.g. by executing:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="50" href="#50" class="lnkocn">50</a></label>
  <p class="code" id="o50">
    $ make build LANGUAGES=en<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="51" href="#51" class="lnkocn">51</a></label>
  <p class="i0" id="o51">
    It is also possible to build by document type, e.g:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="52" href="#52" class="lnkocn">52</a></label>
  <p class="code" id="o52">
    $ make build FORMATS=pdf<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="53" href="#53" class="lnkocn">53</a></label>
  <p class="i0" id="o53">
    Or combine both, e.g:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="54" href="#54" class="lnkocn">54</a></label>
  <p class="code" id="o54">
    $ make build LANGUAGES=it FORMATS=html<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="55" href="#55" class="lnkocn">55</a></label>
  <p class="i0" id="o55">
    After revising your work and making sure that everything is fine, do not use <tt>make commit</tt> unless you are updating translations in the commit, and in that case, do not mix changes to the English manual and translations in the same commit, but use separate commits for each. See the  <a href="#translation">Translation</a>  section for more details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="56" href="#56" class="lnkocn">56</a></label>
  <h6 class="norm" id="o56">
<a name="56"></a>
    <a name="h1.4.2"></a><a name="translation"></a><a name="htranslation">1.4.2 Translation</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="57" href="#57" class="lnkocn">57</a></label>
  <p class="i0" id="o57">
    To start a translation for a new language, follow these steps:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="58" href="#58" class="lnkocn">58</a></label>
  <li class="bullet" id="o58">
    Translate the <b>about_manual.ssi.pot</b>, <b>about_project.ssi.pot</b> and <b>index.html.in.pot</b> files to your language with your favourite editor (such as <i>poedit</i>) . Send the translated <tt>.po</tt> files to the mailing list so that the translation team can check their integrity.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="59" href="#59" class="lnkocn">59</a></label>
  <li class="bullet" id="o59">
    To enable a new language in the autobuild it is enough to add the initial translated files to <tt>manual/po/${LANGUAGE}/</tt> and run <tt>make commit</tt>. And then edit <tt>manual/_sisu/home/index.html</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="60" href="#60" class="lnkocn">60</a></label>
  <li class="bullet" id="o60">
    Once the new language is added, you can randomly continue translating the remaining po files in <tt>manual/po/</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="61" href="#61" class="lnkocn">61</a></label>
  <li class="bullet" id="o61">
    Don't forget you need <tt>make commit</tt> to ensure the translated manuals are updated from the po files and then you can review your changes launching <tt>make build</tt> before <tt>git add .</tt>, <tt>git commit -m "Translating..."</tt> and <tt>git push</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="62" href="#62" class="lnkocn">62</a></label>
  <p class="i0" id="o62">
    After running <tt>make commit</tt> you will see some text scroll by. They are basically informative messages about the processing status and also some hints about what can be done in order to improve <i>live-manual</i>. Unless you see a fatal error, you can usually proceed and submit your contribution.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="63" href="#63" class="lnkocn">63</a></label>
  <p class="i0" id="o63">
    <i>live-manual</i> comes with two utilities that can greatly help translators to find untranslated and changed strings. The first one is "make check". It launches a po file integrity check script that tells you in detail how many complete or incomplete strings there are in each po file. It stops whenever it finds a fatal error and verbosely informs about what the problem is. The second one, the "make translate" target, only acts upon changed strings but it helps you to find and fix them one by one.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="64" href="#64" class="lnkocn">64</a></label>
  <p class="i0" id="o64">
    <b>Note:</b> You can use <tt>make clean</tt> to clean your git tree before pushing. This step is not compulsory thanks to the .gitignore file but it is a good practice to avoid committing files involuntarily.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="65" href="#65" class="lnkocn">65</a></label>
  <h4 class="norm" id="o65">
<a name="65"></a>
    <a name="h2"></a><a name="about_the_debian_live_project"></a><a name="about-project"></a><a name="habout-project">2. About the Debian Live Project</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="66" href="#66" class="lnkocn">66</a></label>
  <h5 class="norm" id="o66">
<a name="66"></a>
    <a name="2.1"></a><a name="h2.1"></a><a name="h2.1">2.1 Motivation</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="67" href="#67" class="lnkocn">67</a></label>
  <h6 class="norm" id="o67">
<a name="67"></a>
    <a name="2.1.1"></a><a name="h2.1.1"></a><a name="h2.1.1">2.1.1 What is wrong with current live systems</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="68" href="#68" class="lnkocn">68</a></label>
  <p class="i0" id="o68">
    When Debian Live was initiated, there were already several Debian based live systems available and they are doing a great job. From the Debian perspective most of them have one or more of the following disadvantages:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="69" href="#69" class="lnkocn">69</a></label>
  <li class="bullet" id="o69">
    They are not Debian projects and therefore lack support from within Debian.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="70" href="#70" class="lnkocn">70</a></label>
  <li class="bullet" id="o70">
    They mix different distributions, e.g. <b>testing</b> and <b>unstable</b>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="71" href="#71" class="lnkocn">71</a></label>
  <li class="bullet" id="o71">
    They support i386 only.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="72" href="#72" class="lnkocn">72</a></label>
  <li class="bullet" id="o72">
    They modify the behaviour and/or appearance of packages by stripping them down to save space.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="73" href="#73" class="lnkocn">73</a></label>
  <li class="bullet" id="o73">
    They include packages from outside of the Debian archive.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="74" href="#74" class="lnkocn">74</a></label>
  <li class="bullet" id="o74">
    They ship custom kernels with additional patches that are not part of Debian.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="75" href="#75" class="lnkocn">75</a></label>
  <li class="bullet" id="o75">
    They are large and slow due to their sheer size and thus not suitable for rescue issues.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="76" href="#76" class="lnkocn">76</a></label>
  <li class="bullet" id="o76">
    They are not available in different flavours, e.g. CDs, DVDs, USB-stick and netboot images.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="77" href="#77" class="lnkocn">77</a></label>
  <h6 class="norm" id="o77">
<a name="77"></a>
    <a name="2.1.2"></a><a name="h2.1.2"></a><a name="h2.1.2">2.1.2 Why create our own live system?</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="78" href="#78" class="lnkocn">78</a></label>
  <p class="i0" id="o78">
    Debian is the Universal Operating System: Debian has a live system to show around and to accurately represent the Debian system with the following main advantages:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="79" href="#79" class="lnkocn">79</a></label>
  <li class="bullet" id="o79">
    It is a subproject of Debian.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="80" href="#80" class="lnkocn">80</a></label>
  <li class="bullet" id="o80">
    It reflects the (current) state of one distribution.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="81" href="#81" class="lnkocn">81</a></label>
  <li class="bullet" id="o81">
    It runs on as many architectures as possible.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="82" href="#82" class="lnkocn">82</a></label>
  <li class="bullet" id="o82">
    It consists of unchanged Debian packages only.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="83" href="#83" class="lnkocn">83</a></label>
  <li class="bullet" id="o83">
    It does not contain any packages that are not in the Debian archive.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="84" href="#84" class="lnkocn">84</a></label>
  <li class="bullet" id="o84">
    It uses an unaltered Debian kernel with no additional patches.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="85" href="#85" class="lnkocn">85</a></label>
  <h5 class="norm" id="o85">
<a name="85"></a>
    <a name="2.2"></a><a name="h2.2"></a><a name="h2.2">2.2 Philosophy</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="86" href="#86" class="lnkocn">86</a></label>
  <h6 class="norm" id="o86">
<a name="86"></a>
    <a name="2.2.1"></a><a name="h2.2.1"></a><a name="h2.2.1">2.2.1 Only unchanged packages from Debian "main"</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="87" href="#87" class="lnkocn">87</a></label>
  <p class="i0" id="o87">
    We will only use packages from the Debian repository in the "main" section. The non-free section is not part of Debian and therefore cannot be used for official live system images.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="88" href="#88" class="lnkocn">88</a></label>
  <p class="i0" id="o88">
    We will not change any packages. Whenever we need to change something, we will do that in coordination with its package maintainer in Debian.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="89" href="#89" class="lnkocn">89</a></label>
  <p class="i0" id="o89">
    As an exception, our own packages such as <i>live-boot</i>, <i>live-build</i> or <i>live-config</i> may temporarily be used from our own repository for development reasons (e.g. to create development snapshots). They will be uploaded to Debian on a regular basis.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="90" href="#90" class="lnkocn">90</a></label>
  <h6 class="norm" id="o90">
<a name="90"></a>
    <a name="2.2.2"></a><a name="h2.2.2"></a><a name="h2.2.2">2.2.2 No package configuration of the live system</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="91" href="#91" class="lnkocn">91</a></label>
  <p class="i0" id="o91">
    In this phase we will not ship or install sample or alternative configurations. All packages are used in their default configuration as they are after a regular installation of Debian.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="92" href="#92" class="lnkocn">92</a></label>
  <p class="i0" id="o92">
    Whenever we need a different default configuration, we will do that in coordination with its package maintainer in Debian.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="93" href="#93" class="lnkocn">93</a></label>
  <p class="i0" id="o93">
    A system for configuring packages is provided using debconf allowing custom configured packages to be installed in your custom produced Debian Live images, but for official live images only default configuration will be used. For more information, please see  <a href="#customization-overview">Customization overview</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="94" href="#94" class="lnkocn">94</a></label>
  <p class="i0" id="o94">
    Exception: There are a few essential changes needed to bring a live system to life. These essential changes have to be kept as minimal as possible and should be merged within the Debian repository if possible.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="95" href="#95" class="lnkocn">95</a></label>
  <h5 class="norm" id="o95">
<a name="95"></a>
    <a name="h2.3"></a><a name="contact"></a><a name="hcontact">2.3 Contact</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="96" href="#96" class="lnkocn">96</a></label>
  <li class="bullet" id="o96">
    <b>Mailing list</b>: The primary contact for the project is the mailing list at ‹<a href="http://lists.debian.org/debian-live/" target="_top">http://lists.debian.org/debian-live/</a>›. You can email the list directly by addressing your mail to ‹<a href="mailto:debian-live@lists.debian.org.">debian-live@lists.debian.org.</a>› The list archives are available at ‹<a href="http://lists.debian.org/debian-live/" target="_top">http://lists.debian.org/debian-live/</a>›.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="97" href="#97" class="lnkocn">97</a></label>
  <li class="bullet" id="o97">
    <b>IRC</b>: A number of users and developers are present in the #debian-live channel on irc.debian.org (OFTC). When asking a question on IRC, please be patient for an answer. If no answer is forthcoming, please email the mailing list.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="98" href="#98" class="lnkocn">98</a></label>
  <li class="bullet" id="o98">
    <b>BTS</b> : The  <a href="http://www.debian.org/Bugs/">Debian Bug Tracking System</a>  (BTS) contains details of bugs reported by users and developers. Each bug is given a number, and is kept on file until it is marked as having been dealt with. For more information, please see  <a href="#bugs">Reporting bugs</a>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="99" href="#99" class="lnkocn">99</a></label>
  <h2 class="norm" id="o99">
<a name="99"></a>
    <a name="h">User</a>
  </h2>
</div>

<div class="substance">
  <label class="ocn"><a name="100" href="#100" class="lnkocn">100</a></label>
  <h4 class="norm" id="o100">
<a name="100"></a>
    <a name="h3"></a><a name="installation"></a><a name="hinstallation">3. Installation</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="101" href="#101" class="lnkocn">101</a></label>
  <h5 class="norm" id="o101">
<a name="101"></a>
    <a name="h3.1"></a><a name="requirements"></a><a name="hrequirements">3.1 Requirements</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="102" href="#102" class="lnkocn">102</a></label>
  <p class="i0" id="o102">
    Building Debian Live images has very few system requirements:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="103" href="#103" class="lnkocn">103</a></label>
  <li class="bullet" id="o103">
    Super user (root) access
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="104" href="#104" class="lnkocn">104</a></label>
  <li class="bullet" id="o104">
    An up-to-date version of <i>live-build</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="105" href="#105" class="lnkocn">105</a></label>
  <li class="bullet" id="o105">
    A POSIX-compliant shell, such as <i>bash</i> or <i>dash</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="106" href="#106" class="lnkocn">106</a></label>
  <li class="bullet" id="o106">
    <i>debootstrap</i> or <i>cdebootstrap</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="107" href="#107" class="lnkocn">107</a></label>
  <li class="bullet" id="o107">
    Linux 2.6.x or 3.x
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="108" href="#108" class="lnkocn">108</a></label>
  <p class="i0" id="o108">
    Note that using Debian or a Debian-derived distribution is not required - <i>live-build</i> will run on almost any distribution with the above requirements.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="109" href="#109" class="lnkocn">109</a></label>
  <h5 class="norm" id="o109">
<a name="109"></a>
    <a name="h3.2"></a><a name="installing-live-build"></a><a name="hinstalling-live-build">3.2 Installing live-build</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="110" href="#110" class="lnkocn">110</a></label>
  <p class="i0" id="o110">
    You can install <i>live-build</i> in a number of different ways:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="111" href="#111" class="lnkocn">111</a></label>
  <li class="bullet" id="o111">
    From the Debian repository
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="112" href="#112" class="lnkocn">112</a></label>
  <li class="bullet" id="o112">
    From source
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="113" href="#113" class="lnkocn">113</a></label>
  <li class="bullet" id="o113">
    From snapshots
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="114" href="#114" class="lnkocn">114</a></label>
  <p class="i0" id="o114">
    If you are using Debian, the recommended way is to install <i>live-build</i> via the Debian repository.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="115" href="#115" class="lnkocn">115</a></label>
  <h6 class="norm" id="o115">
<a name="115"></a>
    <a name="3.2.1"></a><a name="h3.2.1"></a><a name="h3.2.1">3.2.1 From the Debian repository</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="116" href="#116" class="lnkocn">116</a></label>
  <p class="i0" id="o116">
    Simply install <i>live-build</i> like any other package:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="117" href="#117" class="lnkocn">117</a></label>
  <p class="code" id="o117">
    # apt-get install live-build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="118" href="#118" class="lnkocn">118</a></label>
  <p class="i0" id="o118">
    or
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="119" href="#119" class="lnkocn">119</a></label>
  <p class="code" id="o119">
    # aptitude install live-build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="120" href="#120" class="lnkocn">120</a></label>
  <h6 class="norm" id="o120">
<a name="120"></a>
    <a name="3.2.2"></a><a name="h3.2.2"></a><a name="h3.2.2">3.2.2 From source</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="121" href="#121" class="lnkocn">121</a></label>
  <p class="i0" id="o121">
    <i>live-build</i> is developed using the Git version control system. On Debian based systems, this is provided by the <i>git</i> package. To check out the latest code, execute:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="122" href="#122" class="lnkocn">122</a></label>
  <p class="code" id="o122">
    $ git clone git://live.debian.net/git/live-build.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="123" href="#123" class="lnkocn">123</a></label>
  <p class="i0" id="o123">
    You can build and install your own Debian package by executing:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="124" href="#124" class="lnkocn">124</a></label>
  <p class="code" id="o124">
    $ cd live-build<br>
$ dpkg-buildpackage -rfakeroot -b -uc -us<br>
$ cd ..<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="125" href="#125" class="lnkocn">125</a></label>
  <p class="i0" id="o125">
    Now install whichever of the freshly built <tt>.deb</tt> files you were interested in, e.g.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="126" href="#126" class="lnkocn">126</a></label>
  <p class="code" id="o126">
    # dpkg -i live-build_3.0-1_all.deb<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="127" href="#127" class="lnkocn">127</a></label>
  <p class="i0" id="o127">
    You can also install <i>live-build</i> directly to your system by executing:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="128" href="#128" class="lnkocn">128</a></label>
  <p class="code" id="o128">
    # make install<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="129" href="#129" class="lnkocn">129</a></label>
  <p class="i0" id="o129">
    and uninstall it with:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="130" href="#130" class="lnkocn">130</a></label>
  <p class="code" id="o130">
    # make uninstall<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="131" href="#131" class="lnkocn">131</a></label>
  <h6 class="norm" id="o131">
<a name="131"></a>
    <a name="3.2.3"></a><a name="h3.2.3"></a><a name="h3.2.3">3.2.3 From 'snapshots'</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="132" href="#132" class="lnkocn">132</a></label>
  <p class="i0" id="o132">
    If you do not wish to build or install <i>live-build</i> from source, you can use snapshots. These are built automatically from the latest version in Git and are available on ‹<a href="http://live.debian.net/debian/" target="_top">http://live.debian.net/debian/</a>›.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="133" href="#133" class="lnkocn">133</a></label>
  <h5 class="norm" id="o133">
<a name="133"></a>
    <a name="3.3"></a><a name="h3.3"></a><a name="h3.3">3.3 Installing live-boot and live-config</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="134" href="#134" class="lnkocn">134</a></label>
  <p class="i0" id="o134">
    <b>Note:</b> You do not need to install <i>live-boot</i> or <i>live-config</i> on your system to create customized Debian Live systems. However, doing so will do no harm and is useful for reference purposes. If you only want the documentation, you may now install the <i>live-boot-doc</i> and <i>live-config-doc</i> packages separately.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="135" href="#135" class="lnkocn">135</a></label>
  <h6 class="norm" id="o135">
<a name="135"></a>
    <a name="3.3.1"></a><a name="h3.3.1"></a><a name="h3.3.1">3.3.1 From the Debian repository</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="136" href="#136" class="lnkocn">136</a></label>
  <p class="i0" id="o136">
    Both <i>live-boot</i> and <i>live-config</i> are available from the Debian repository as per  <a href="#installing-live-build">Installing live-build</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="137" href="#137" class="lnkocn">137</a></label>
  <h6 class="norm" id="o137">
<a name="137"></a>
    <a name="3.3.2"></a><a name="h3.3.2"></a><a name="h3.3.2">3.3.2 From source</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="138" href="#138" class="lnkocn">138</a></label>
  <p class="i0" id="o138">
    To use the latest source from git, you can follow the process below. Please ensure you are familiar with the terms mentioned in  <a href="#terms">Terms</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="139" href="#139" class="lnkocn">139</a></label>
  <li class="bullet" id="o139">
    Checkout the <i>live-boot</i> and <i>live-config</i> source
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="140" href="#140" class="lnkocn">140</a></label>
  <p class="code" id="o140">
    $ git clone git://live.debian.net/git/live-boot.git<br>
$ git clone git://live.debian.net/git/live-config.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="141" href="#141" class="lnkocn">141</a></label>
  <p class="i0" id="o141">
    Consult the <i>live-boot</i> and <i>live-config</i> man pages for details on customizing if that is your reason for building these packages from source.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="142" href="#142" class="lnkocn">142</a></label>
  <li class="bullet" id="o142">
    Build <i>live-boot</i> and <i>live-config</i> .deb files
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="143" href="#143" class="lnkocn">143</a></label>
  <p class="i0" id="o143">
    You must build either on your target distribution or in a chroot containing your target platform: this means if your target is <b>wheezy</b> then you should build against <b>wheezy</b>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="144" href="#144" class="lnkocn">144</a></label>
  <p class="i0" id="o144">
    Use a personal builder such as <i>pbuilder</i> or <i>sbuild</i> if you need to build <i>live-boot</i> for a target distribution that differs from your build system. For example, for <b>wheezy</b> live images, build <i>live-boot</i> in a <b>wheezy</b> chroot. If your target distribution happens to match your build system distribution, you may build directly on the build system using <tt>dpkg-buildpackage</tt> (provided by the <i>dpkg-dev</i> package):
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="145" href="#145" class="lnkocn">145</a></label>
  <p class="code" id="o145">
    $ cd live-boot<br>
$ dpkg-buildpackage -b -uc -us<br>
$ cd ../live-config<br>
$ dpkg-buildpackage -b -uc -us<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="146" href="#146" class="lnkocn">146</a></label>
  <li class="bullet" id="o146">
    Use applicable generated .deb files
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="147" href="#147" class="lnkocn">147</a></label>
  <p class="i0" id="o147">
    As <i>live-boot</i> and <i>live-config</i> are installed by <i>live-build</i> system, installing the packages in the host system is not sufficient: you should treat the generated .deb files like any other custom packages. Since your purpose for building from source is like to test new things over the short term before the official release, follow  <a href="#installing-modified-or-third-party-packages">Installing modified or third-party packages</a>  to temporarily include the relevant files in your configuration. In particular, notice that both packages are divided into a generic part, a documentation part and one or more back-ends. Include the generic part, only one back-end matching your configuration, and optionally the documentation. Assuming you are building a live image in the current directory and have generated all .deb files for a single version of both packages in the directory above, these bash commands would copy all of the relevant packages including default back-ends:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="148" href="#148" class="lnkocn">148</a></label>
  <p class="code" id="o148">
    $ cp ../live-boot{_,-initramfs-tools,-doc}*.deb  config/packages.chroot/<br>
$ cp ../live-config{_,-sysvinit,-doc}*.deb  config/packages.chroot/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="149" href="#149" class="lnkocn">149</a></label>
  <h6 class="norm" id="o149">
<a name="149"></a>
    <a name="3.3.3"></a><a name="h3.3.3"></a><a name="h3.3.3">3.3.3 From 'snapshots'</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="150" href="#150" class="lnkocn">150</a></label>
  <p class="i0" id="o150">
    You can let <i>live-build</i> automatically use the latest snapshots of <i>live-boot</i> and <i>live-config</i> by configuring a third-party repository in your <i>live-build</i> configuration directory. Assuming you have already created a configuration tree in the current directory with <tt>lb config</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="151" href="#151" class="lnkocn">151</a></label>
  <p class="code" id="o151">
    $ lb config --archives live.debian.net<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="152" href="#152" class="lnkocn">152</a></label>
  <h4 class="norm" id="o152">
<a name="152"></a>
    <a name="h4"></a><a name="the_basics"></a><a name="the-basics"></a><a name="hthe-basics">4. The basics</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="153" href="#153" class="lnkocn">153</a></label>
  <p class="i0" id="o153">
    This chapter contains a brief overview of the build process and instructions for using the three most commonly used image types. The most versatile image type, <tt>iso-hybrid</tt>, may be used on a virtual machine, optical media or USB portable storage device. In certain special cases, such as the use of persistence, <tt>hdd</tt> may be more suitable for USB devices. The chapter finishes with instructions for building and using a <tt>net</tt> type image, which is a bit more involved due to the setup required on the server. This is a slightly advanced topic for anyone who is not familiar already with netbooting, but is included here because once the setup is done, it is a very convenient way to test and deploy images for booting on the local network without the hassle of dealing with image media.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="154" href="#154" class="lnkocn">154</a></label>
  <p class="i0" id="o154">
    Throughout the chapter, we will often refer to the default filenames produced by <i>live-build</i>. If you are downloading a prebuilt image instead, the actual filenames may vary.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="155" href="#155" class="lnkocn">155</a></label>
  <h5 class="norm" id="o155">
<a name="155"></a>
    <a name="h4.1"></a><a name="what-is-live"></a><a name="hwhat-is-live">4.1 What is a live system?</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="156" href="#156" class="lnkocn">156</a></label>
  <p class="i0" id="o156">
    A live system usually means an operating system booted on a computer from a removable medium, such as a CD-ROM or USB stick, or from a network, ready to use without any installation on the usual drive(s), with auto-configuration done at run time (see  <a href="#terms">Terms</a>).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="157" href="#157" class="lnkocn">157</a></label>
  <p class="i0" id="o157">
    With Debian Live, it's a Debian GNU/Linux operating system, built for one of the supported architectures (currently amd64, i386, powerpc and sparc). It is made from the following parts:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="158" href="#158" class="lnkocn">158</a></label>
  <li class="bullet" id="o158">
    <b>Linux kernel image</b>, usually named <tt>vmlinuz*</tt>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="159" href="#159" class="lnkocn">159</a></label>
  <li class="bullet" id="o159">
    <b>Initial RAM disk image (initrd)</b>: a RAM disk set up for the Linux boot, containing modules possibly needed to mount the System image and some scripts to do it.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="160" href="#160" class="lnkocn">160</a></label>
  <li class="bullet" id="o160">
    <b>System image</b>: The operating system's filesystem image. Usually, a SquashFS compressed filesystem is used to minimize the Debian Live image size. Note that it is read-only. So, during boot the Debian Live system will use a RAM disk and 'union' mechanism to enable writing files within the running system. However, all modifications will be lost upon shutdown unless optional persistence is used (see  <a href="#persistence">Persistence</a>).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="161" href="#161" class="lnkocn">161</a></label>
  <li class="bullet" id="o161">
    <b>Bootloader</b>: A small piece of code crafted to boot from the chosen media, possibly presenting a prompt or menu to allow selection of options/configuration. It loads the Linux kernel and its initrd to run with an associated system filesystem. Different solutions can be used, depending on the target media and format of the filesystem containing the previously mentioned components: isolinux to boot from a CD or DVD in ISO9660 format, syslinux for HDD or USB drive booting from a VFAT partition, extlinux for ext2/3/4 and btrfs partitions, pxelinux for PXE netboot, GRUB for ext2/3/4 partitions, etc.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="162" href="#162" class="lnkocn">162</a></label>
  <p class="i0" id="o162">
    You can use <i>live-build</i> to build the system image from your specifications, set up a Linux kernel, its initrd, and a bootloader to run them, all in one media-dependant format (ISO9660 image, disk image, etc.).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="163" href="#163" class="lnkocn">163</a></label>
  <h5 class="norm" id="o163">
<a name="163"></a>
    <a name="h4.2"></a><a name="building-iso-hybrid"></a><a name="hbuilding-iso-hybrid">4.2 First steps: building an ISO hybrid image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="164" href="#164" class="lnkocn">164</a></label>
  <p class="i0" id="o164">
    Regardless of the image type, you will need to perform the same basic steps to build an image each time. As a first example, execute the following sequence of <i>live-build</i> commands to create a basic ISO hybrid image containing just the Debian standard system without X.org. It is suitable for burning to CD or DVD media, and also to copy onto a USB stick.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="165" href="#165" class="lnkocn">165</a></label>
  <p class="i0" id="o165">
    First, run the <tt>lb config</tt> command. This will create a "config/" hierarchy in the current directory for use by other commands:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="166" href="#166" class="lnkocn">166</a></label>
  <p class="code" id="o166">
    $ lb config<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="167" href="#167" class="lnkocn">167</a></label>
  <p class="i0" id="o167">
    No parameters are passed to <tt>lb config</tt>, so defaults for all of its various options will be used. See  <a href="#lb-config">The lb config command</a>  for more details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="168" href="#168" class="lnkocn">168</a></label>
  <p class="i0" id="o168">
    Now that the "config/" hierarchy exists, build the image with the <tt>lb build</tt> command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="169" href="#169" class="lnkocn">169</a></label>
  <p class="code" id="o169">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="170" href="#170" class="lnkocn">170</a></label>
  <p class="i0" id="o170">
    This process can take a while, depending on the speed of your network connection. When it is complete, there should be a <tt>binary.hybrid.iso</tt> image file, ready to use, in the current directory.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="171" href="#171" class="lnkocn">171</a></label>
  <h5 class="norm" id="o171">
<a name="171"></a>
    <a name="h4.3"></a><a name="using-iso-hybrid"></a><a name="husing-iso-hybrid">4.3 Using an ISO hybrid live image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="172" href="#172" class="lnkocn">172</a></label>
  <p class="i0" id="o172">
    After either building or downloading an ISO hybrid image, which can be obtained at ‹<a href="http://www.debian.org/CD/live/" target="_top">http://www.debian.org/CD/live/</a>›, the usual next step is to prepare your media for booting, either CD-R(W) or DVD-R(W) optical media or a USB stick.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="173" href="#173" class="lnkocn">173</a></label>
  <h6 class="norm" id="o173">
<a name="173"></a>
    <a name="h4.3.1"></a><a name="burning-iso-image"></a><a name="hburning-iso-image">4.3.1 Burning an ISO image to a physical medium</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="174" href="#174" class="lnkocn">174</a></label>
  <p class="i0" id="o174">
    Burning an ISO image is easy. Just install wodim and use it from the command-line to burn the image. For instance:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="175" href="#175" class="lnkocn">175</a></label>
  <p class="code" id="o175">
    # apt-get install wodim<br><br>
$ wodim binary.hybrid.iso<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="176" href="#176" class="lnkocn">176</a></label>
  <h6 class="norm" id="o176">
<a name="176"></a>
    <a name="h4.3.2"></a><a name="copying-iso-hybrid-to-usb"></a><a name="hcopying-iso-hybrid-to-usb">4.3.2 Copying an ISO hybrid image to a USB stick</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="177" href="#177" class="lnkocn">177</a></label>
  <p class="i0" id="o177">
    ISO images prepared with the <tt>isohybrid</tt> command, like the images produced by the default <tt>iso-hybrid</tt> binary image type, can be simply copied to a USB stick with the <tt>dd</tt> program or an equivalent. Plug in a USB stick with a size large enough for your image file and determine which device it is, which we hereafter refer to as <tt>${USBSTICK}</tt>. This is the device file of your key, such as <tt>/dev/sdb</tt>, not a partition, such as <tt>/dev/sdb1</tt>! You can find the right device name by looking in <tt>dmesg</tt>'s output after plugging in the stick, or better yet, <tt>ls -l /dev/disk/by-id</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="178" href="#178" class="lnkocn">178</a></label>
  <p class="i0" id="o178">
    Once you are certain you have the correct device name, use the <tt>dd</tt> command to copy the image to the stick.  <b>This will definitely overwrite any previous contents on your stick!</b>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="179" href="#179" class="lnkocn">179</a></label>
  <p class="code" id="o179">
    $ dd if=binary.hybrid.iso of=${USBSTICK}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="180" href="#180" class="lnkocn">180</a></label>
  <h6 class="norm" id="o180">
<a name="180"></a>
    <a name="h4.3.3"></a><a name="booting-live-media"></a><a name="hbooting-live-media">4.3.3 Booting the live media</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="181" href="#181" class="lnkocn">181</a></label>
  <p class="i0" id="o181">
    The first time you boot your live media, whether CD, DVD, USB key, or PXE boot, some setup in your computer's BIOS may be needed first. Since BIOSes vary greatly in features and key bindings, we cannot get into the topic in depth here. Some BIOSes provide a key to bring up a menu of boot devices at boot time, which is the easiest way if it is available on your system. Otherwise, you need to enter the BIOS configuration menu and change the boot order to place the boot device for the live system before your normal boot device.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="182" href="#182" class="lnkocn">182</a></label>
  <p class="i0" id="o182">
    Once you've booted the media, you are presented with a boot menu. If you just press enter here, the system will boot using the default entry, <tt>Live</tt> and default options. For more information about boot options, see the "help" entry in the menu and also the <i>live-boot</i> and <i>live-config</i> man pages found within the live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="183" href="#183" class="lnkocn">183</a></label>
  <p class="i0" id="o183">
    Assuming you've selected <tt>Live</tt> and booted a default desktop live image, after the boot messages scroll by, you should be automatically logged into the <tt>user</tt> account and see a desktop, ready to use. If you've booted a console-only image, such as <tt>standard</tt> or <tt>rescue</tt> flavour prebuilt images, you should be automatically logged in on the console to the <tt>user</tt> account and see a shell prompt, ready to use.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="184" href="#184" class="lnkocn">184</a></label>
  <h5 class="norm" id="o184">
<a name="184"></a>
    <a name="h4.4"></a><a name="using-virtual-machine"></a><a name="husing-virtual-machine">4.4 Using a virtual machine for testing</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="185" href="#185" class="lnkocn">185</a></label>
  <p class="i0" id="o185">
    It can be a great time-saver for the development of live images to run them in a virtual machine (VM). This is not without its caveats:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="186" href="#186" class="lnkocn">186</a></label>
  <li class="bullet" id="o186">
    Running a VM requires enough RAM for both the guest OS and the host and a CPU with hardware support for virtualization is recommended.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="187" href="#187" class="lnkocn">187</a></label>
  <li class="bullet" id="o187">
    There are some inherent limitations to running on a VM, e.g. poor video performance, limited choice of emulated hardware.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="188" href="#188" class="lnkocn">188</a></label>
  <li class="bullet" id="o188">
    When developing for specific hardware, there is no substitute for running on the hardware itself.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="189" href="#189" class="lnkocn">189</a></label>
  <li class="bullet" id="o189">
    Occasionally there are bugs that relate only to running in a VM. When in doubt, test your image directly on the hardware.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="190" href="#190" class="lnkocn">190</a></label>
  <p class="i0" id="o190">
    Provided you can work within these constraints, survey the available VM software and choose one that is suitable for your needs.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="191" href="#191" class="lnkocn">191</a></label>
  <h6 class="norm" id="o191">
<a name="191"></a>
    <a name="h4.4.1"></a><a name="testing-iso-with-qemu"></a><a name="htesting-iso-with-qemu">4.4.1 Testing an ISO image with QEMU</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="192" href="#192" class="lnkocn">192</a></label>
  <p class="i0" id="o192">
    The most versatile VM in Debian is QEMU. If your processor has hardware support for virtualization, use the <i>qemu-kvm</i> package; the <i>qemu-kvm</i> package description briefly lists the requirements.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="193" href="#193" class="lnkocn">193</a></label>
  <p class="i0" id="o193">
    First, install <i>qemu-kvm</i> if your processor supports it. If not, install <i>qemu</i>, in which case the program name is <tt>qemu</tt> instead of <tt>kvm</tt> in the following examples. The <i>qemu-utils</i> package is also valuable for creating virtual disk images with <tt>qemu-img</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="194" href="#194" class="lnkocn">194</a></label>
  <p class="code" id="o194">
    # apt-get install qemu-kvm qemu-utils<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="195" href="#195" class="lnkocn">195</a></label>
  <p class="i0" id="o195">
    Booting an ISO image is simple:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="196" href="#196" class="lnkocn">196</a></label>
  <p class="code" id="o196">
    $ kvm -cdrom binary.hybrid.iso<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="197" href="#197" class="lnkocn">197</a></label>
  <p class="i0" id="o197">
    See the man pages for more details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="198" href="#198" class="lnkocn">198</a></label>
  <h6 class="norm" id="o198">
<a name="198"></a>
    <a name="h4.4.2"></a><a name="testing-iso-with-virtualbox"></a><a name="htesting-iso-with-virtualbox">4.4.2 Testing an ISO image with virtualbox</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="199" href="#199" class="lnkocn">199</a></label>
  <p class="i0" id="o199">
    In order to test the ISO with <i>virtualbox</i>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="200" href="#200" class="lnkocn">200</a></label>
  <p class="code" id="o200">
    # apt-get install virtualbox virtualbox-dkms<br><br>
$ virtualbox<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="201" href="#201" class="lnkocn">201</a></label>
  <p class="i0" id="o201">
    Create a new virtual machine, change the storage settings to use <tt>binary.hybrid.iso</tt> as the CD/DVD device, and start the machine.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="202" href="#202" class="lnkocn">202</a></label>
  <p class="i0" id="o202">
    <b>Note:</b> For live systems containing X.org that you want to test with <i>virtualbox</i>, you may wish to include the VirtualBox X.org driver package, <i>virtualbox-guest-x11</i>, in your <i>live-build</i> configuration. Otherwise, the resolution is limited to 800x600.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="203" href="#203" class="lnkocn">203</a></label>
  <p class="code" id="o203">
    $ echo virtualbox-guest-x11 &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="204" href="#204" class="lnkocn">204</a></label>
  <h5 class="norm" id="o204">
<a name="204"></a>
    <a name="h4.5"></a><a name="building-hdd"></a><a name="hbuilding-hdd">4.5 Building an HDD image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="205" href="#205" class="lnkocn">205</a></label>
  <p class="i0" id="o205">
    Building an HDD image is similar to ISO hybrid in all respects except you specify <tt>-b hdd</tt> and the resulting filename is <tt>binary.img</tt> which cannot be burnt to optical media. It is suitable for booting from USB sticks, USB hard drives, and various other portable storage devices. Normally, an ISO hybrid image can be used for this purpose instead, but if you have a BIOS which does not handle hybrid images properly, or want to use the remaining space on the media for some purpose, such as a persistence partition, you need an HDD image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="206" href="#206" class="lnkocn">206</a></label>
  <p class="i0" id="o206">
    <b>Note:</b>  if you created an ISO hybrid image with the previous example, you will need to clean up your working directory with the <tt>lb clean</tt> command (see  <a href="#lb-clean">The lb clean command</a>):
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="207" href="#207" class="lnkocn">207</a></label>
  <p class="code" id="o207">
    # lb clean --binary<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="208" href="#208" class="lnkocn">208</a></label>
  <p class="i0" id="o208">
    Run the <tt>lb config</tt> command as before, except this time specifying the HDD image type:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="209" href="#209" class="lnkocn">209</a></label>
  <p class="code" id="o209">
    $ lb config -b hdd<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="210" href="#210" class="lnkocn">210</a></label>
  <p class="i0" id="o210">
    Now build the image with the <tt>lb build</tt> command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="211" href="#211" class="lnkocn">211</a></label>
  <p class="code" id="o211">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="212" href="#212" class="lnkocn">212</a></label>
  <p class="i0" id="o212">
    When the build finishes, a <tt>binary.img</tt> file should be present in the current directory.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="213" href="#213" class="lnkocn">213</a></label>
  <h5 class="norm" id="o213">
<a name="213"></a>
    <a name="h4.6"></a><a name="using-hdd-image"></a><a name="husing-hdd-image">4.6 Using an HDD image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="214" href="#214" class="lnkocn">214</a></label>
  <p class="i0" id="o214">
    The generated binary image contains a VFAT partition and the syslinux bootloader, ready to be directly written on a USB stick. Since using an HDD image is just like using an ISO hybrid image on USB, follow the instructions in  <a href="#using-iso-hybrid">Using an ISO hybrid live image</a>,  except use the filename <tt>binary.img</tt> instead of <tt>binary.hybrid.iso</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="215" href="#215" class="lnkocn">215</a></label>
  <h6 class="norm" id="o215">
<a name="215"></a>
    <a name="h4.6.1"></a><a name="testing-hdd-with-qemu"></a><a name="htesting-hdd-with-qemu">4.6.1 Testing an HDD image with Qemu</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="216" href="#216" class="lnkocn">216</a></label>
  <p class="i0" id="o216">
    First, install <i>qemu</i> as described above in  <a href="#testing-iso-with-qemu">Testing an ISO image with QEMU</a>.  Then run <tt>kvm</tt> or <tt>qemu</tt>, depending on which version your host system needs, specifying <tt>binary.img</tt> as the first hard drive.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="217" href="#217" class="lnkocn">217</a></label>
  <p class="code" id="o217">
    $ kvm -hda binary.img<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="218" href="#218" class="lnkocn">218</a></label>
  <h6 class="norm" id="o218">
<a name="218"></a>
    <a name="h4.6.2"></a><a name="using-usb-extra-space"></a><a name="husing-usb-extra-space">4.6.2 Using the space left on a USB stick</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="219" href="#219" class="lnkocn">219</a></label>
  <p class="i0" id="o219">
    To use the remaining free space after copying <tt>binary.img</tt> to a USB stick, use a partitioning tool such as <i>gparted</i> or <i>parted</i> to create a new partition on the stick. The first partition will be used by the Debian Live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="220" href="#220" class="lnkocn">220</a></label>
  <p class="code" id="o220">
    # gparted ${USBSTICK}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="221" href="#221" class="lnkocn">221</a></label>
  <p class="i0" id="o221">
    After the partition is created, where <tt>${PARTITION}</tt> is the name of the partition, such as <tt>/dev/sdb2</tt>, you have to create a filesystem on it. One possible choice would be ext4.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="222" href="#222" class="lnkocn">222</a></label>
  <p class="code" id="o222">
    # mkfs.ext4 ${PARTITION}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="223" href="#223" class="lnkocn">223</a></label>
  <p class="i0" id="o223">
    <b>Note:</b>  If you want to use the extra space with Windows, apparently that OS cannot normally access any partitions but the first. Some solutions to this problem have been discussed on our  <a href="#contact">mailing list</a>,  but it seems there are no easy answers.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="224" href="#224" class="lnkocn">224</a></label>
  <p class="i0" id="o224">
    <b>Remember: Every time you install a new binary.img on the stick, all data on the stick will be lost because the partition table is overwritten by the contents of the image, so back up your extra partition first to restore again after updating the live image.</b>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="225" href="#225" class="lnkocn">225</a></label>
  <h5 class="norm" id="o225">
<a name="225"></a>
    <a name="h4.7"></a><a name="building-netboot-image"></a><a name="hbuilding-netboot-image">4.7 Building a netboot image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="226" href="#226" class="lnkocn">226</a></label>
  <p class="i0" id="o226">
    The following sequence of commands will create a basic netboot image containing the Debian standard system without X.org. It is suitable for booting over the network.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="227" href="#227" class="lnkocn">227</a></label>
  <p class="i0" id="o227">
    <b>Note:</b> if you performed any previous examples, you will need to clean up your working directory with the <tt>lb clean</tt> command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="228" href="#228" class="lnkocn">228</a></label>
  <p class="code" id="o228">
    # lb clean --binary<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="229" href="#229" class="lnkocn">229</a></label>
  <p class="i0" id="o229">
    Run the <tt>lb config</tt> command as follows to configure your image for netbooting:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="230" href="#230" class="lnkocn">230</a></label>
  <p class="code" id="o230">
    $ lb config -b net --net-root-path "/srv/debian-live" --net-root-server "192.168.0.1"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="231" href="#231" class="lnkocn">231</a></label>
  <p class="i0" id="o231">
    In contrast with the ISO and HDD images, netbooting does not, itself, serve the filesystem image to the client, so the files must be served via NFS. The <tt>--net-root-path</tt> and <tt>--net-root-server</tt> options specify the location and server, respectively, of the NFS server where the filesytem image will be located at boot time. Make sure these are set to suitable values for your network and server.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="232" href="#232" class="lnkocn">232</a></label>
  <p class="i0" id="o232">
    Now build the image with the <tt>lb build</tt> command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="233" href="#233" class="lnkocn">233</a></label>
  <p class="code" id="o233">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="234" href="#234" class="lnkocn">234</a></label>
  <p class="i0" id="o234">
    In a network boot, the client runs a small piece of software which usually resides on the EPROM of the Ethernet card. This program sends a DHCP request to get an IP address and information about what to do next. Typically, the next step is getting a higher level bootloader via the TFTP protocol. That could be pxelinux, GRUB, or even boot directly to an operating system like Linux.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="235" href="#235" class="lnkocn">235</a></label>
  <p class="i0" id="o235">
    For example, if you unpack the generated <tt>binary.netboot.tar.xz</tt> archive in the <tt>/srv/debian-live</tt> directory, you'll find the filesystem image in <tt>live/filesystem.squashfs</tt> and the kernel, initrd and pxelinux bootloader in <tt>tftpboot/debian-live/i386</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="236" href="#236" class="lnkocn">236</a></label>
  <p class="i0" id="o236">
    We must now configure three services on the server to enable netboot: the DHCP server, the TFTP server and the NFS server.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="237" href="#237" class="lnkocn">237</a></label>
  <h6 class="norm" id="o237">
<a name="237"></a>
    <a name="4.7.1"></a><a name="h4.7.1"></a><a name="h4.7.1">4.7.1 DHCP server</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="238" href="#238" class="lnkocn">238</a></label>
  <p class="i0" id="o238">
    We must configure our network's DHCP server to be sure to give an IP address to the netbooting client system, and to advertise the location of the PXE bootloader.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="239" href="#239" class="lnkocn">239</a></label>
  <p class="i0" id="o239">
    Here is an example for inspiration, written for the ISC DHCP server <tt>isc-dhcp-server</tt> in the <tt>/etc/dhcp/dhcpd.conf</tt> configuration file:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="240" href="#240" class="lnkocn">240</a></label>
  <p class="code" id="o240">
    # /etc/dhcp/dhcpd.conf - configuration file for isc-dhcp-server<br><br>
ddns-update-style none;<br><br>
option domain-name "example.org";<br>
option domain-name-servers ns1.example.org, ns2.example.org;<br><br>
default-lease-time 600;<br>
max-lease-time 7200;<br><br>
log-facility local7;<br><br>
subnet 192.168.0.0 netmask 255.255.255.0 {<br>
   range 192.168.0.1 192.168.0.254;<br>
   next-server servername;<br>
   filename "pxelinux.0";<br>
}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="241" href="#241" class="lnkocn">241</a></label>
  <h6 class="norm" id="o241">
<a name="241"></a>
    <a name="4.7.2"></a><a name="h4.7.2"></a><a name="h4.7.2">4.7.2 TFTP server</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="242" href="#242" class="lnkocn">242</a></label>
  <p class="i0" id="o242">
    This serves the kernel and initial ramdisk to the system at run time.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="243" href="#243" class="lnkocn">243</a></label>
  <p class="i0" id="o243">
    You should install the <i>tftpd-hpa</i> package. It can serve all files contained inside a root directory, usually <tt>/srv/tftp</tt>. To let it serve files inside <tt>/srv/debian-live/tftpboot</tt>, run as root the following command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="244" href="#244" class="lnkocn">244</a></label>
  <p class="code" id="o244">
    # dpkg-reconfigure -plow tftpd-hpa<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="245" href="#245" class="lnkocn">245</a></label>
  <p class="i0" id="o245">
    and fill in the new tftp server directory when being asked about it.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="246" href="#246" class="lnkocn">246</a></label>
  <h6 class="norm" id="o246">
<a name="246"></a>
    <a name="4.7.3"></a><a name="h4.7.3"></a><a name="h4.7.3">4.7.3 NFS server</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="247" href="#247" class="lnkocn">247</a></label>
  <p class="i0" id="o247">
    Once the guest computer has downloaded and booted a Linux kernel and loaded its initrd, it will try to mount the Live filesystem image through a NFS server.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="248" href="#248" class="lnkocn">248</a></label>
  <p class="i0" id="o248">
    You need to install the <i>nfs-kernel-server</i> package.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="249" href="#249" class="lnkocn">249</a></label>
  <p class="i0" id="o249">
    Then, make the filesystem image available through NFS by adding a line like the following to <tt>/etc/exports</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="250" href="#250" class="lnkocn">250</a></label>
  <p class="code" id="o250">
    /srv/debian-live *(ro,async,no_root_squash,no_subtree_check)<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="251" href="#251" class="lnkocn">251</a></label>
  <p class="i0" id="o251">
    and tell the NFS server about this new export with the following command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="252" href="#252" class="lnkocn">252</a></label>
  <p class="code" id="o252">
    # exportfs -rv<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="253" href="#253" class="lnkocn">253</a></label>
  <p class="i0" id="o253">
    Setting up these three services can be a little tricky. You might need some patience to get all of them working together. For more information, see the syslinux wiki at ‹<a href="http://syslinux.zytor.com/wiki/index.php/PXELINUX" target="_top">http://syslinux.zytor.com/wiki/index.php/PXELINUX</a>› or the Debian Installer Manual's TFTP Net Booting section at ‹<a href="http://d-i.alioth.debian.org/manual/en.i386/ch04s05.html" target="_top">http://d-i.alioth.debian.org/manual/en.i386/ch04s05.html</a>›. They might help, as their processes are very similar.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="254" href="#254" class="lnkocn">254</a></label>
  <h6 class="norm" id="o254">
<a name="254"></a>
    <a name="4.7.4"></a><a name="h4.7.4"></a><a name="h4.7.4">4.7.4 Netboot testing HowTo</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="255" href="#255" class="lnkocn">255</a></label>
  <p class="i0" id="o255">
    Netboot image creation is made easy with <i>live-build</i> magic, but testing the images on physical machines can be really time consuming.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="256" href="#256" class="lnkocn">256</a></label>
  <p class="i0" id="o256">
    To make our life easier, we can use virtualization. There are two solutions.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="257" href="#257" class="lnkocn">257</a></label>
  <h6 class="norm" id="o257">
<a name="257"></a>
    <a name="4.7.5"></a><a name="h4.7.5"></a><a name="h4.7.5">4.7.5 Qemu</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="258" href="#258" class="lnkocn">258</a></label>
  <li class="bullet" id="o258">
    Install <i>qemu</i>, <i>bridge-utils</i>, <i>sudo</i>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="259" href="#259" class="lnkocn">259</a></label>
  <p class="i0" id="o259">
    Edit <tt>/etc/qemu-ifup</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="260" href="#260" class="lnkocn">260</a></label>
  <p class="code" id="o260">
    #!/bin/sh<br>
sudo -p "Password for $0:" /sbin/ifconfig $1 172.20.0.1<br>
echo "Executing /etc/qemu-ifup"<br>
echo "Bringing up $1 for bridged mode..."<br>
sudo /sbin/ifconfig $1 0.0.0.0 promisc up<br>
echo "Adding $1 to br0..."<br>
sudo /usr/sbin/brctl addif br0 $1<br>
sleep 2<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="261" href="#261" class="lnkocn">261</a></label>
  <p class="i0" id="o261">
    Get, or build a <tt>grub-floppy-netboot</tt> (in the svn).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="262" href="#262" class="lnkocn">262</a></label>
  <p class="i0" id="o262">
    Launch <tt>qemu</tt> with "<tt>-net nic,vlan=0 -net tap,vlan=0,ifname=tun0</tt>"
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="263" href="#263" class="lnkocn">263</a></label>
  <h6 class="norm" id="o263">
<a name="263"></a>
    <a name="4.7.6"></a><a name="h4.7.6"></a><a name="h4.7.6">4.7.6 VMWare Player</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="264" href="#264" class="lnkocn">264</a></label>
  <li class="bullet" id="o264">
    Install VMWare Player ("free as in beer" edition)
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="265" href="#265" class="lnkocn">265</a></label>
  <li class="bullet" id="o265">
    Create a PXETester directory, and create a text file called <tt>pxe.vwx</tt> inside
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="266" href="#266" class="lnkocn">266</a></label>
  <li class="bullet" id="o266">
    Paste this text inside:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="267" href="#267" class="lnkocn">267</a></label>
  <p class="code" id="o267">
    #!/usr/bin/vmware<br>
config.version = "8"<br>
virtualHW.version = "4"<br>
memsize = "512"<br>
MemAllowAutoScaleDown = "FALSE"<br><br>
ide0:0.present = "FALSE"<br>
ide1:0.present = "FALSE"<br>
floppy0.present = "FALSE"<br>
sound.present = "FALSE"<br>
tools.remindInstall = "FALSE"<br><br>
ethernet0.present = "TRUE"<br>
ethernet0.addressType = "generated"<br><br>
displayName = "Test Boot PXE"<br>
guestOS = "other"<br><br>
ethernet0.generatedAddress = "00:0c:29:8d:71:3b"<br>
uuid.location = "56 4d 83 72 5c c4 de 3f-ae 9e 07 91 1d 8d 71 3b"<br>
uuid.bios = "56 4d 83 72 5c c4 de 3f-ae 9e 07 91 1d 8d 71 3b"<br>
ethernet0.generatedAddressOffset = "0"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="268" href="#268" class="lnkocn">268</a></label>
  <li class="bullet" id="o268">
    You can play with this configuration file (e.g. change memory limit to 256)
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="269" href="#269" class="lnkocn">269</a></label>
  <li class="bullet" id="o269">
    Double click on this file (or run VMWare player and select this file).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="270" href="#270" class="lnkocn">270</a></label>
  <li class="bullet" id="o270">
    When running just press space if that strange question comes up...
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="271" href="#271" class="lnkocn">271</a></label>
  <h4 class="norm" id="o271">
<a name="271"></a>
    <a name="h5"></a><a name="overview_of_tools"></a><a name="overview-of-tools"></a><a name="hoverview-of-tools">5. Overview of tools</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="272" href="#272" class="lnkocn">272</a></label>
  <p class="i0" id="o272">
    This chapter contains an overview of the three main tools used in building Debian Live systems: <i>live-build</i>, <i>live-boot</i> and <i>live-config</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="273" href="#273" class="lnkocn">273</a></label>
  <h5 class="norm" id="o273">
<a name="273"></a>
    <a name="h5.1"></a><a name="live-build"></a><a name="hlive-build">5.1 The live-build package</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="274" href="#274" class="lnkocn">274</a></label>
  <p class="i0" id="o274">
    <i>live-build</i> is a collection of scripts to build Debian Live systems. These scripts are also referred to as "commands".
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="275" href="#275" class="lnkocn">275</a></label>
  <p class="i0" id="o275">
    The idea behind <i>live-build</i> is to be a framework that uses a configuration directory to completely automate and customize all aspects of building a Live image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="276" href="#276" class="lnkocn">276</a></label>
  <p class="i0" id="o276">
    Many concepts are similar to those in the <i>debhelper</i> Debian package tools written by Joey Hess:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="277" href="#277" class="lnkocn">277</a></label>
  <li class="bullet" id="o277">
    The scripts have a central location for configuring their operation. In <i>debhelper</i>, this is the <tt>debian/</tt> subdirectory of a package tree. For example, dh_install will look, amongst others, for a file called <tt>debian/install</tt> to determine which files should exist in a particular binary package. In much the same way, <i>live-build</i> stores its configuration entirely under a <tt>config/</tt> subdirectory.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="278" href="#278" class="lnkocn">278</a></label>
  <li class="bullet" id="o278">
    The scripts are independent - that is to say, it is always safe to run each command.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="279" href="#279" class="lnkocn">279</a></label>
  <p class="i0" id="o279">
    Unlike <i>debhelper</i>, <i>live-build</i> contains a tool to generate a skeleton configuration directory, <tt>lb config</tt>. This could be considered to be similar to tools such as <i>dh-make</i>. For more information about <tt>lb config</tt>, please see  <a href="#lb-config">The lb config command</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="280" href="#280" class="lnkocn">280</a></label>
  <p class="i0" id="o280">
    The remainder of this section discusses the three most important commands:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="281" href="#281" class="lnkocn">281</a></label>
  <li class="bullet" id="o281">
    <b>lb config</b>: Responsible for initializing a Live system configuration directory. See  <a href="#lb-config">The lb config command</a>  for more information.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="282" href="#282" class="lnkocn">282</a></label>
  <li class="bullet" id="o282">
    <b>lb build</b>: Responsible for starting a Live system build. See  <a href="#lb-build">The lb build command</a>  for more information.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="283" href="#283" class="lnkocn">283</a></label>
  <li class="bullet" id="o283">
    <b>lb clean</b>: Responsible for removing parts of a Live system build. See  <a href="#lb-clean">The lb clean command</a>  for more information.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="284" href="#284" class="lnkocn">284</a></label>
  <h6 class="norm" id="o284">
<a name="284"></a>
    <a name="h5.1.1"></a><a name="lb-config"></a><a name="hlb-config">5.1.1 The <tt>lb config</tt> command</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="285" href="#285" class="lnkocn">285</a></label>
  <p class="i0" id="o285">
    As discussed in  <a href="#live-build">live-build</a>,  the scripts that make up <i>live-build</i> read their configuration with the <tt>source</tt> command from a single directory named <tt>config/</tt>. As constructing this directory by hand would be time-consuming and error-prone, the <tt>lb config</tt> command can be used to create skeleton configuration folders.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="286" href="#286" class="lnkocn">286</a></label>
  <p class="i0" id="o286">
    Issuing <tt>lb config</tt> without any arguments creates a <tt>config/</tt> subdirectory which it populates with some default settings, and a skeleton <tt>auto/</tt> subdirectory tree.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="287" href="#287" class="lnkocn">287</a></label>
  <p class="code" id="o287">
    $ lb config<br>
[2012-08-03 22:59:17] lb_config<br>
P: Considering defaults defined in /etc/live/build.conf<br>
P: Creating config tree for a debian/i386 system<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="288" href="#288" class="lnkocn">288</a></label>
  <p class="i0" id="o288">
    Using <tt>lb config</tt> without any arguments would be suitable for users who need a very basic image, or who intend to later provide a more complete configuration via <tt>auto/config</tt> (see  <a href="#managing-a-configuration">Managing a configuration</a>  for details).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="289" href="#289" class="lnkocn">289</a></label>
  <p class="i0" id="o289">
    Normally, you will want to specify some options. For example, to specify which distribution you want to build using its codename:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="290" href="#290" class="lnkocn">290</a></label>
  <p class="code" id="o290">
    $ lb config --distribution sid<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="291" href="#291" class="lnkocn">291</a></label>
  <p class="i0" id="o291">
    It is possible to specify many options, such as:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="292" href="#292" class="lnkocn">292</a></label>
  <p class="code" id="o292">
    $ lb config --binary-images net --bootappend-live "boot=live config hostname=live-machine username=live-user" ...<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="293" href="#293" class="lnkocn">293</a></label>
  <p class="i0" id="o293">
    A full list of options is available in the <tt>lb_config</tt> man page.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="294" href="#294" class="lnkocn">294</a></label>
  <h6 class="norm" id="o294">
<a name="294"></a>
    <a name="h5.1.2"></a><a name="lb-build"></a><a name="hlb-build">5.1.2 The <tt>lb build</tt> command</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="295" href="#295" class="lnkocn">295</a></label>
  <p class="i0" id="o295">
    The <tt>lb build</tt> command reads in your configuration from the <tt>config/</tt> directory. It then runs the lower level commands needed to build your Live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="296" href="#296" class="lnkocn">296</a></label>
  <h6 class="norm" id="o296">
<a name="296"></a>
    <a name="h5.1.3"></a><a name="lb-clean"></a><a name="hlb-clean">5.1.3 The <tt>lb clean</tt> command</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="297" href="#297" class="lnkocn">297</a></label>
  <p class="i0" id="o297">
    It is the job of the <tt>lb clean</tt> command to remove various parts of a build so subsequent builds can start from a clean state. By default, <tt>chroot</tt>, <tt>binary</tt> and <tt>source</tt> stages are cleaned, but the cache is left intact. Also, individual stages can be cleaned. For example, if you have made changes that only affect the binary stage, use <tt>lb clean --binary</tt> prior to building a new binary. See the <tt>lb_clean</tt> man page for a full list of options.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="298" href="#298" class="lnkocn">298</a></label>
  <h5 class="norm" id="o298">
<a name="298"></a>
    <a name="h5.2"></a><a name="live-boot"></a><a name="hlive-boot">5.2 The live-boot package</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="299" href="#299" class="lnkocn">299</a></label>
  <p class="i0" id="o299">
    <i>live-boot</i> is a collection of scripts providing hooks for the <i>initramfs-tools</i>, used to generate an initramfs capable of booting live systems, such as those created by <i>live-build</i>. This includes the Debian Live ISOs, netboot tarballs, and USB stick images.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="300" href="#300" class="lnkocn">300</a></label>
  <p class="i0" id="o300">
    At boot time it will look for read-only media containing a <tt>/live/</tt> directory where a root filesystem (often a compressed filesystem image like squashfs) is stored. If found, it will create a writable environment, using aufs, for Debian like systems to boot from.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="301" href="#301" class="lnkocn">301</a></label>
  <p class="i0" id="o301">
    More information on initial ramfs in Debian can be found in the Debian Linux Kernel Handbook at ‹<a href="http://kernel-handbook.alioth.debian.org/" target="_top">http://kernel-handbook.alioth.debian.org/</a>› in the chapter on initramfs.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="302" href="#302" class="lnkocn">302</a></label>
  <h5 class="norm" id="o302">
<a name="302"></a>
    <a name="h5.3"></a><a name="live-config"></a><a name="hlive-config">5.3 The live-config package</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="303" href="#303" class="lnkocn">303</a></label>
  <p class="i0" id="o303">
    <i>live-config</i> consists of the scripts that run at boot time after <i>live-boot</i> to configure the live system automatically. It handles such tasks as setting the hostname, locales and timezone, creating the live user, inhibiting cron jobs and performing autologin of the live user.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="304" href="#304" class="lnkocn">304</a></label>
  <h4 class="norm" id="o304">
<a name="304"></a>
    <a name="h6"></a><a name="managing_a_configuration"></a><a name="managing-a-configuration"></a><a name="hmanaging-a-configuration">6. Managing a configuration</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="305" href="#305" class="lnkocn">305</a></label>
  <p class="i0" id="o305">
    This chapter explains how to manage a live configuration from initial creation, through successive revisions and successive releases of both the <i>live-build</i> software and the live image itself.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="306" href="#306" class="lnkocn">306</a></label>
  <h5 class="norm" id="o306">
<a name="306"></a>
    <a name="6.1"></a><a name="h6.1"></a><a name="h6.1">6.1 Dealing with configuration changes</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="307" href="#307" class="lnkocn">307</a></label>
  <p class="i0" id="o307">
    Live configurations rarely are perfect on the first try. It may be fine to pass <tt>lb config</tt> options from the command-line to perform a single build, but it is more typical to revise those options and build again until you are satisfied. To support these changes, you will need auto scripts which ensure your configuration is kept in a consistent state.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="308" href="#308" class="lnkocn">308</a></label>
  <h6 class="norm" id="o308">
<a name="308"></a>
    <a name="6.1.1"></a><a name="h6.1.1"></a><a name="h6.1.1">6.1.1 Why use auto scripts? What do they do?</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="309" href="#309" class="lnkocn">309</a></label>
  <p class="i0" id="o309">
    The <tt>lb config</tt> command stores the options you pass to it in <tt>config/*</tt> files along with many other options set to default values. If you run <tt>lb config</tt> again, it will not reset any option that was defaulted based on your initial options. So, for example, if you run <tt>lb config</tt> again with a new value for <tt>--distribution</tt>, any dependent options that were defaulted for the old distribution may no longer work with the new. Nor are these files intended to be read or edited. They store values for over a hundred options, so nobody, let alone yourself, will be able to see in these which options you actually specified. And finally, if you run <tt>lb config</tt>, then upgrade <i>live-build</i> and it happens to rename an option, <tt>config/*</tt> would still contain variables named after the old option that are no longer valid.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="310" href="#310" class="lnkocn">310</a></label>
  <p class="i0" id="o310">
    For all these reasons, <tt>auto/*</tt> scripts will make your life easier. They are simple wrappers to the <tt>lb config</tt>, <tt>lb build</tt> and <tt>lb clean</tt> commands that are designed to help you manage your configuration. The <tt>auto/config</tt> script stores your <tt>lb config</tt> command with all desired options, the <tt>auto/clean</tt> script removes the files containing configuration variable values, and the <tt>auto/build</tt> script keeps a <tt>build.log</tt> of each build. Each of these scripts is run automatically every time you run the corresponding <tt>lb</tt> command. By using these scripts, your configuration is easier to read and is kept internally consistent from one revision to the next. Also, it will be much easier for you identify and fix options which need to change when you upgrade <i>live-build</i> after reading the updated documentation.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="311" href="#311" class="lnkocn">311</a></label>
  <h6 class="norm" id="o311">
<a name="311"></a>
    <a name="6.1.2"></a><a name="h6.1.2"></a><a name="h6.1.2">6.1.2 Use example auto scripts</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="312" href="#312" class="lnkocn">312</a></label>
  <p class="i0" id="o312">
    For your convenience, <i>live-build</i> comes with example auto shell scripts to copy and edit. Start a new, default configuration, then copy the examples into it:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="313" href="#313" class="lnkocn">313</a></label>
  <p class="code" id="o313">
    $ mkdir mylive &amp;&amp; cd mylive &amp;&amp; lb config<br>
$ cp /usr/share/doc/live-build/examples/auto/* auto/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="314" href="#314" class="lnkocn">314</a></label>
  <p class="i0" id="o314">
    Edit <tt>auto/config</tt>, adding any options as you see fit. For instance:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="315" href="#315" class="lnkocn">315</a></label>
  <p class="code" id="o315">
    #!/bin/sh<br>
lb config noauto \<br>
     --architectures i386 \<br>
     --linux-flavours 686-pae \<br>
     --binary-images hdd \<br>
     --mirror-bootstrap http://ftp.es.debian.org/debian/ \<br>
     --mirror-binary http://ftp.es.debian.org/debian/ \<br>
     "${@}"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="316" href="#316" class="lnkocn">316</a></label>
  <p class="i0" id="o316">
    Now, each time you use <tt>lb config</tt>, <tt>auto/config</tt> will reset the configuration based on these options. When you want to make changes to them, edit the options in this file instead of passing them to <tt>lb config</tt>. When you use <tt>lb clean</tt>, <tt>auto/clean</tt> will clean up the <tt>config/*</tt> files along with any other build products. And finally, when you use <tt>lb build</tt>, a log of the build will be written by <tt>auto/build</tt> in <tt>build.log</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="317" href="#317" class="lnkocn">317</a></label>
  <p class="i0" id="o317">
    <b>Note:</b> A special <tt>noauto</tt> parameter is used here to suppress another call to <tt>auto/config</tt>, thereby preventing infinite recursion. Make sure you don't accidentally remove it when making edits. Also, take care to ensure when you split the <tt>lb config</tt> command across multiple lines for readability, as shown in the example above, that you don't forget the backslash (\) at the end of each line that continues to the next.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="318" href="#318" class="lnkocn">318</a></label>
  <h5 class="norm" id="o318">
<a name="318"></a>
    <a name="6.2"></a><a name="h6.2"></a><a name="h6.2">6.2 Clone a configuration published via Git</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="319" href="#319" class="lnkocn">319</a></label>
  <p class="i0" id="o319">
    Use the <tt>lb config --config</tt> option to clone a Git repository that contains a Debian Live configuration. If you would like to base your configuration on one maintained by the Debian Live project, look at ‹<a href="http://live.debian.net/gitweb" target="_top">http://live.debian.net/gitweb</a>› for the repositories prefixed with <tt>debian-</tt> in the category <tt>Configurations</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="320" href="#320" class="lnkocn">320</a></label>
  <p class="i0" id="o320">
    For example, to build a rescue image, use the <tt>debian-rescue</tt> repository as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="321" href="#321" class="lnkocn">321</a></label>
  <p class="code" id="o321">
    $ mkdir live-rescue &amp;&amp; cd live-rescue<br>
$ lb config --config git://live.debian.net/git/debian-rescue.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="322" href="#322" class="lnkocn">322</a></label>
  <p class="i0" id="o322">
    Edit <tt>auto/config</tt> and any other things you need in the <tt>config</tt> tree to suit your needs.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="323" href="#323" class="lnkocn">323</a></label>
  <p class="i0" id="o323">
    You may optionally define a shortcut in your Git configuration by adding the following to your <tt>${HOME}/.gitconfig</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="324" href="#324" class="lnkocn">324</a></label>
  <p class="code" id="o324">
    [url "git://live.debian.net/git/"]<br>
     insteadOf = ldn:<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="325" href="#325" class="lnkocn">325</a></label>
  <p class="i0" id="o325">
    This enables you to use <tt>ldn:</tt> anywhere you need to specify the address of a <tt>live.debian.net</tt> git repository. If you also drop the optional <tt>.git</tt> suffix, starting a new image using this configuration is as easy as:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="326" href="#326" class="lnkocn">326</a></label>
  <p class="code" id="o326">
    $ lb config --config ldn:debian-rescue<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="327" href="#327" class="lnkocn">327</a></label>
  <h4 class="norm" id="o327">
<a name="327"></a>
    <a name="h7"></a><a name="customization_overview"></a><a name="customization-overview"></a><a name="hcustomization-overview">7. Customization overview</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="328" href="#328" class="lnkocn">328</a></label>
  <p class="i0" id="o328">
    This chapter gives an overview of the various ways in which you may customize a Debian Live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="329" href="#329" class="lnkocn">329</a></label>
  <h5 class="norm" id="o329">
<a name="329"></a>
    <a name="7.1"></a><a name="h7.1"></a><a name="h7.1">7.1 Build time vs. boot time configuration</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="330" href="#330" class="lnkocn">330</a></label>
  <p class="i0" id="o330">
    Live system configuration options are divided into build-time options which are options that are applied at build time and boot-time options which are applied at boot time. Boot-time options are further divided into those occurring early in the boot, applied by the <i>live-boot</i> package, and those that happen later in the boot, applied by <i>live-config</i>. Any boot-time option may be modified by the user by specifying it at the boot prompt. The image may also be built with default boot parameters so users can normally just boot directly to the live system without specifying any options when all of the defaults are suitable. In particular, the argument to <tt>lb --bootappend-live</tt> consists of any default kernel command line options for the Live system, such as persistence, keyboard layouts, or timezone. See  <a href="#customizing-locale-and-language">Customizing locale and language</a>,  for example.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="331" href="#331" class="lnkocn">331</a></label>
  <p class="i0" id="o331">
    Build-time configuration options are described in the <tt>lb config</tt> man page. Boot-time options are described in the man pages for <i>live-boot</i> and <i>live-config</i>. Although the <i>live-boot</i> and <i>live-config</i> packages are installed within the live system you are building, it is recommended that you also install them on your build system for easy reference when you are working on your configuration. It is safe to do so, as none of the scripts contained within them are executed unless the system is configured as a live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="332" href="#332" class="lnkocn">332</a></label>
  <h5 class="norm" id="o332">
<a name="332"></a>
    <a name="h7.2"></a><a name="stages-of-the-build"></a><a name="hstages-of-the-build">7.2 Stages of the build</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="333" href="#333" class="lnkocn">333</a></label>
  <p class="i0" id="o333">
    The build process is divided into stages, with various customizations applied in sequence in each. The first stage to run is the <b>bootstrap</b> stage. This is the initial phase of populating the chroot directory with packages to make a barebones Debian system. This is followed by the <b>chroot</b> stage, which completes the construction of chroot directory, populating it with all of the packages listed in the configuration, along with any other materials. Most customization of content occurs in this stage. The final stage of preparing the live image is the <b>binary</b> stage, which builds a bootable image, using the contents of the chroot directory to construct the root filesystem for the Live system, and including the installer and any other additional material on the target media outside of the Live system's filesystem. After the live image is built, if enabled, the source tarball is built in the <b>source</b> stage.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="334" href="#334" class="lnkocn">334</a></label>
  <p class="i0" id="o334">
    Within each of these stages, there is a particular sequence in which commands are applied. These are arranged in such a way as to ensure customizations can be layered in a reasonable fashion. For example, within the <b>chroot</b> stage, preseeds are applied before any packages are installed, packages are installed before any locally included files or patches are applied, and hooks are run later, after all of the materials are in place.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="335" href="#335" class="lnkocn">335</a></label>
  <h5 class="norm" id="o335">
<a name="335"></a>
    <a name="7.3"></a><a name="h7.3"></a><a name="h7.3">7.3 Supplement lb config with files</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="336" href="#336" class="lnkocn">336</a></label>
  <p class="i0" id="o336">
    Although <tt>lb config</tt> creates a skeletal configuration in the config/ directory, to accomplish your goals, you may need to provide additional files in subdirectories of config/. Depending on where the files are stored in the configuration, they may be copied into the live system's filesystem or into the binary image filesystem, or may provide build-time configurations of the system that would be cumbersome to pass as command-line options. You may include things such as custom lists of packages, custom artwork, or hook scripts to run either at build time or at boot time, boosting the already considerable flexibility of debian-live with code of your own.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="337" href="#337" class="lnkocn">337</a></label>
  <h5 class="norm" id="o337">
<a name="337"></a>
    <a name="7.4"></a><a name="h7.4"></a><a name="h7.4">7.4 Customization tasks</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="338" href="#338" class="lnkocn">338</a></label>
  <p class="i0" id="o338">
    The following chapters are organized by the kinds of customization task users typically perform:  <a href="#customizing-package-installation">Customizing package installation</a>,   <a href="#customizing-contents">Customizing contents</a>  and  <a href="#customizing-locale-and-language">Customizing locale and language</a>  cover just a few of the things you might want to do.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="339" href="#339" class="lnkocn">339</a></label>
  <h4 class="norm" id="o339">
<a name="339"></a>
    <a name="h8"></a><a name="customizing_package_installation"></a><a name="customizing-package-installation"></a><a name="hcustomizing-package-installation">8. Customizing package installation</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="340" href="#340" class="lnkocn">340</a></label>
  <p class="i0" id="o340">
    Perhaps the most basic customization of a Debian live system is the selection of packages to be included in the image. This chapter guides you through the various build-time options to customize <i>live-build</i>' s installation of packages. The broadest choices influencing which packages are available to install in the image are the distribution and archive areas. To ensure decent download speeds, you should choose a nearby distribution mirror. You can also add your own repositories for backports, experimental or custom packages, or include packages directly as files. You can define lists of packages, including metapackages which will install many related packages at once, such as packages for a particular desktop or language. Finally, a number of options give some control over <i>apt</i>, or if you prefer, <i>aptitude</i>, at build time when packages are installed. You may find these handy if you use a proxy, want to disable installation of recommended packages to save space, or need to control which versions of packages are installed via APT pinning, to name a few possibilities.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="341" href="#341" class="lnkocn">341</a></label>
  <h5 class="norm" id="o341">
<a name="341"></a>
    <a name="8.1"></a><a name="h8.1"></a><a name="h8.1">8.1 Package sources</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="342" href="#342" class="lnkocn">342</a></label>
  <h6 class="norm" id="o342">
<a name="342"></a>
    <a name="8.1.1"></a><a name="h8.1.1"></a><a name="h8.1.1">8.1.1 Distribution, archive areas and mode</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="343" href="#343" class="lnkocn">343</a></label>
  <p class="i0" id="o343">
    The distribution you choose has the broadest impact on which packages are available to include in your live image. Specify the codename, which defaults to <b>wheezy</b> for the <b>wheezy</b> version of <i>live-build</i>. Any current distribution carried in the Debian archive may be specified by its codename here. (See  <a href="#terms">Terms</a>  for more details.) The <tt>--distribution</tt> option not only influences the source of packages within the archive, but also instructs <i>live-build</i> to behave as needed to build each supported distribution. For example, to build against the <b>unstable</b> release, <b>sid</b>, specify:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="344" href="#344" class="lnkocn">344</a></label>
  <p class="code" id="o344">
    $ lb config --distribution sid<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="345" href="#345" class="lnkocn">345</a></label>
  <p class="i0" id="o345">
    Within the distribution archive, archive areas are major divisions of the archive. In Debian, these are <tt>main</tt>, <tt>contrib</tt> and <tt>non-free</tt>. Only <tt>main</tt> contains software that is part of the Debian distribution, hence that is the default. One or more values may be specified, e.g.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="346" href="#346" class="lnkocn">346</a></label>
  <p class="code" id="o346">
    $ lb config --archive-areas "main contrib"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="347" href="#347" class="lnkocn">347</a></label>
  <p class="i0" id="o347">
    Experimental support is available for some Debian derivatives through a <tt>--mode</tt> option. By default, this option is set to <tt>debian</tt>, even if you are building on a non-Debian system. If you specify <tt>--mode ubuntu</tt> or <tt>--mode emdebian</tt>, the distribution names and archive areas for the specified derivative are supported instead of the ones for Debian. The mode also modifies <i>live-build</i> behaviour to suit the derivatives.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="348" href="#348" class="lnkocn">348</a></label>
  <p class="i0" id="o348">
    <b>Note:</b> The projects for whom these modes were added are primarily responsible for supporting users of these options. The Debian live project, in turn, provides development support on a best-effort basis only, based on feedback from the derivative projects as we do not develop or support these derivatives ourselves.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="349" href="#349" class="lnkocn">349</a></label>
  <h6 class="norm" id="o349">
<a name="349"></a>
    <a name="8.1.2"></a><a name="h8.1.2"></a><a name="h8.1.2">8.1.2 Distribution mirrors</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="350" href="#350" class="lnkocn">350</a></label>
  <p class="i0" id="o350">
    The Debian archive is replicated across a large network of mirrors around the world so that people in each region can choose a nearby mirror for best download speed. Each of the <tt>--mirror-*</tt> options governs which distribution mirror is used at various stages of the build. Recall from  <a href="#stages-of-the-build">Stages of the build</a>  that the <b>bootstrap</b> stage is when the chroot is initially populated by <i>debootstrap</i> with a minimal system, and the <b>chroot</b> stage is when the chroot used to construct the live system's filesystem is built. Thus, the corresponding mirror switches are used for those stages, and later, in the <b>binary</b> stage, the <tt>--mirror-binary</tt> and <tt>--mirror-binary-security</tt> values are used, superceding any mirrors used in an earlier stage.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="351" href="#351" class="lnkocn">351</a></label>
  <h6 class="norm" id="o351">
<a name="351"></a>
    <a name="h8.1.3"></a><a name="distribution-mirrors-build-time"></a><a name="hdistribution-mirrors-build-time">8.1.3 Distribution mirrors used at build time</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="352" href="#352" class="lnkocn">352</a></label>
  <p class="i0" id="o352">
    To set the distribution mirrors used at build time to point at a local mirror, it is sufficient to set <tt>--mirror-bootstrap</tt>, <tt>--mirror-chroot-security</tt> and <tt>--mirror-chroot-backports</tt> as follows.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="353" href="#353" class="lnkocn">353</a></label>
  <p class="code" id="o353">
    $ lb config --mirror-bootstrap http://localhost/debian/ \<br>
             --mirror-chroot-security http://localhost/debian-security/ \<br>
      --mirror-chroot-backports http://localhost/debian-backports/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="354" href="#354" class="lnkocn">354</a></label>
  <p class="i0" id="o354">
    The chroot mirror, specified by <tt>--mirror-chroot</tt>, defaults to the <tt>--mirror-bootstrap</tt> value.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="355" href="#355" class="lnkocn">355</a></label>
  <h6 class="norm" id="o355">
<a name="355"></a>
    <a name="8.1.4"></a><a name="h8.1.4"></a><a name="h8.1.4">8.1.4 Distribution mirrors used at run time</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="356" href="#356" class="lnkocn">356</a></label>
  <p class="i0" id="o356">
    The <tt>--mirror-binary*</tt> options govern the distribution mirrors placed in the binary image. These may be used to install additional packages while running the live system. The defaults employ <tt>http.debian.net</tt>, a service that chooses a geographically close mirror based, among other things, on the user's IP family and the availability of the mirrors. This is a suitable choice when you cannot predict which mirror will be best for all of your users. Or you may specify your own values as shown in the example below. An image built from this configuration would only be suitable for users on a network where "<tt>mirror</tt>" is reachable.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="357" href="#357" class="lnkocn">357</a></label>
  <p class="code" id="o357">
    $ lb config --mirror-binary http://mirror/debian/ \<br>
             --mirror-binary-security http://mirror/debian-security/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="358" href="#358" class="lnkocn">358</a></label>
  <h6 class="norm" id="o358">
<a name="358"></a>
    <a name="h8.1.5"></a><a name="additional-repositories"></a><a name="hadditional-repositories">8.1.5 Additional repositories</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="359" href="#359" class="lnkocn">359</a></label>
  <p class="i0" id="o359">
    You may add more repositories, broadening your package choices beyond what is available in your target distribution. These may be, for example, for backports, experimental or custom packages. To configure additional repositories, create <tt>config/archives/your-repository.list.chroot</tt>, and/or <tt>config/archives/your-repository.list.binary</tt> files. As with the <tt>--mirror-*</tt> options, these govern the repositories used in the <b>chroot</b> stage when building the image, and in the <b>binary</b> stage, i.e. for use when running the live system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="360" href="#360" class="lnkocn">360</a></label>
  <p class="i0" id="o360">
    For example, <tt>config/archives/live.list.chroot</tt> allows you to install packages from the debian live snapshot repository at live system build time.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="361" href="#361" class="lnkocn">361</a></label>
  <p class="code" id="o361">
    deb http://live.debian.net/ sid-snapshots main contrib non-free<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="362" href="#362" class="lnkocn">362</a></label>
  <p class="i0" id="o362">
    If you add the same line to <tt>config/archives/live.list.binary</tt>, the repository will be added to your live system's <tt>/etc/apt/sources.list.d/</tt> directory.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="363" href="#363" class="lnkocn">363</a></label>
  <p class="i0" id="o363">
    If such files exist, they will be picked up automatically.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="364" href="#364" class="lnkocn">364</a></label>
  <p class="i0" id="o364">
    You should also put the GPG key used to sign the repository into <tt>config/archives/your-repository.key.{binary,chroot}</tt> files.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="365" href="#365" class="lnkocn">365</a></label>
  <p class="i0" id="o365">
    <b>Note:</b> some preconfigured package repositories are available for easy selection through the <tt>--archives</tt> option, e.g. for enabling live snapshots, a simple command is enough to enable it:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="366" href="#366" class="lnkocn">366</a></label>
  <p class="code" id="o366">
    $ lb config --archives live.debian.net<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="367" href="#367" class="lnkocn">367</a></label>
  <h5 class="norm" id="o367">
<a name="367"></a>
    <a name="h8.2"></a><a name="choosing-packages-to-install"></a><a name="hchoosing-packages-to-install">8.2 Choosing packages to install</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="368" href="#368" class="lnkocn">368</a></label>
  <p class="i0" id="o368">
    There are a number of ways to choose which packages <i>live-build</i> will install in your image, covering a variety of different needs. You can simply name individual packages to install in a package list. You can also use metapackages in those lists, or select them using package control file fields. And finally, you may place package files in your <tt>config/</tt> tree, which is well suited to testing of new or experimental packages before they are available from a repository.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="369" href="#369" class="lnkocn">369</a></label>
  <h6 class="norm" id="o369">
<a name="369"></a>
    <a name="h8.2.1"></a><a name="package-lists"></a><a name="hpackage-lists">8.2.1 Package lists</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="370" href="#370" class="lnkocn">370</a></label>
  <p class="i0" id="o370">
    Package lists are a powerful way of expressing which packages should be installed. The list syntax supports included files and conditional sections which makes it easy to build lists from other lists and adapt them for use in multiple configurations. Package names may also be injected into the list using shell helpers at build time.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="371" href="#371" class="lnkocn">371</a></label>
  <p class="i0" id="o371">
    <b>Note:</b>  The behaviour of <i>live-build</i> when specifying a package that does not exist is determined by your choice of APT utility. See  <a href="#choosing-apt-or-aptitude">Choosing apt or aptitude</a>  for more details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="372" href="#372" class="lnkocn">372</a></label>
  <h6 class="norm" id="o372">
<a name="372"></a>
    <a name="h8.2.2"></a><a name="using-metapackages"></a><a name="husing-metapackages">8.2.2 Using metapackages</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="373" href="#373" class="lnkocn">373</a></label>
  <p class="i0" id="o373">
    The simplest way to populate your package list is to use a task metapackage maintained by your distribution. For example:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="374" href="#374" class="lnkocn">374</a></label>
  <p class="code" id="o374">
    $ lb config<br>
$ echo task-gnome-desktop &gt; config/package-lists/gnome-desktop.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="375" href="#375" class="lnkocn">375</a></label>
  <p class="i0" id="o375">
    This supercedes the older predefined list method supported in <tt>live-build</tt> 2.x. Unlike predefined lists, task metapackages are not specific to the Debian Live project. Instead, they are maintained by specialist working groups within the distribution and therefore reflect the consensus of each group about which packages best serve the needs of the intended users. They also cover a much broader range of use cases than the predefined lists they replace.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="376" href="#376" class="lnkocn">376</a></label>
  <p class="i0" id="o376">
    All task metapackages are prefixed <tt>task-</tt>, so a quick way to determine which are available (though it may contain a handful of false hits that match the name but aren't metapackages) is to match on the package name with:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="377" href="#377" class="lnkocn">377</a></label>
  <p class="code" id="o377">
    $ apt-cache search --names-only ^task-<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="378" href="#378" class="lnkocn">378</a></label>
  <p class="i0" id="o378">
    In addition to these, you will find other metapackages with various purposes. Some are subsets of broader task packages, like <tt>gnome-core</tt>, while others are individual specialized parts of a Debian Pure Blend, such as the <tt>education-*</tt> metapackages. To list all metapackages in the archive, install the <tt>debtags</tt> package and list all packages with the <tt>role::metapackage</tt> tag as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="379" href="#379" class="lnkocn">379</a></label>
  <p class="code" id="o379">
    $ debtags search role::metapackage<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="380" href="#380" class="lnkocn">380</a></label>
  <h6 class="norm" id="o380">
<a name="380"></a>
    <a name="8.2.3"></a><a name="h8.2.3"></a><a name="h8.2.3">8.2.3 Local package lists</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="381" href="#381" class="lnkocn">381</a></label>
  <p class="i0" id="o381">
    Whether you list metapackages, individual packages, or a combination of both, all local package lists are stored in <tt>config/package-lists/</tt>. Since more than one list can be used, this lends itself well to modular designs. For example, you may decide to devote one list to a particular choice of desktop, another to a collection of related packages that might as easily be used on top of a different desktop. This allows you to experiment with different combinations of sets of packages with a minimum of fuss, sharing common lists between different live image projects.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="382" href="#382" class="lnkocn">382</a></label>
  <p class="i0" id="o382">
    Package lists that exist in this directory need to have a <tt>.list</tt> suffix in order to be processed, and then an additional stage suffix, <tt>.chroot</tt> or <tt>.binary</tt> to indicate which stage the list is for.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="383" href="#383" class="lnkocn">383</a></label>
  <p class="i0" id="o383">
    <b>Note:</b> If you don't specify the stage suffix, the list will be used for both stages. Normally, you want to specify <tt>.list.chroot</tt> so that the packages will only be installed in the live filesystem and not have an extra copy of the <tt>.deb</tt> placed on the media.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="384" href="#384" class="lnkocn">384</a></label>
  <h6 class="norm" id="o384">
<a name="384"></a>
    <a name="8.2.4"></a><a name="h8.2.4"></a><a name="h8.2.4">8.2.4 Local binary package lists</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="385" href="#385" class="lnkocn">385</a></label>
  <p class="i0" id="o385">
    To make a binary stage list, place a file suffixed with <tt>.list.binary</tt> in <tt>config/package-lists/</tt>. These packages are not installed in the live filesystem, but are included on the live media under <tt>pool/</tt>. You would typically use such a list with one of the non-live installer variants. As mentioned above, if you want this list to be the same as your chroot stage list, simply use the <tt>.list</tt> suffix by itself.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="386" href="#386" class="lnkocn">386</a></label>
  <h6 class="norm" id="o386">
<a name="386"></a>
    <a name="h8.2.5"></a><a name="generated-package-lists"></a><a name="hgenerated-package-lists">8.2.5 Generated package lists</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="387" href="#387" class="lnkocn">387</a></label>
  <p class="i0" id="o387">
    It sometimes happens that the best way to compose a list is to generate it with a script. Any line starting with an exclamation point indicates a command to be executed within the chroot when the image is built. For example, one might include the line <tt>! grep-aptavail -n -sPackage -FPriority standard | sort</tt> in a package list to produce a sorted list of available packages with <tt>Priority: standard</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="388" href="#388" class="lnkocn">388</a></label>
  <p class="i0" id="o388">
    In fact, selecting packages with the <tt>grep-aptavail</tt> command (from the <tt>dctrl-tools</tt> package) is so useful that <tt>live-build</tt> provides a <tt>Packages</tt> helper script as a convenience. This script takes two arguments: <tt>field</tt> and <tt>pattern</tt>. Thus, you can create a list with the following contents:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="389" href="#389" class="lnkocn">389</a></label>
  <p class="code" id="o389">
    $ lb config<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="390" href="#390" class="lnkocn">390</a></label>
  <h6 class="norm" id="o390">
<a name="390"></a>
    <a name="8.2.6"></a><a name="h8.2.6"></a><a name="h8.2.6">8.2.6 Using conditionals inside package lists</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="391" href="#391" class="lnkocn">391</a></label>
  <p class="i0" id="o391">
    Any of the <i>live-build</i> configuration variables stored in <tt>config/*</tt> (minus the <tt>LB_</tt> prefix) may be used in conditional statements in package lists. Generally, this means any <tt>lb config</tt> option uppercased and with dashes changed to underscores. But in practice, it is only the ones that influence package selection that make sense, such as <tt>DISTRIBUTION</tt>, <tt>ARCHITECTURES</tt> or <tt>ARCHIVE_AREAS</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="392" href="#392" class="lnkocn">392</a></label>
  <p class="i0" id="o392">
    For example, to install <tt>ia32-libs</tt> if the <tt>--architectures amd64</tt> is specified:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="393" href="#393" class="lnkocn">393</a></label>
  <p class="code" id="o393">
    #if ARCHITECTURES amd64<br>
ia32-libs<br>
#endif<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="394" href="#394" class="lnkocn">394</a></label>
  <p class="i0" id="o394">
    You may test for any one of a number of values, e.g. to install <i>memtest86+</i> if either <tt>--architectures i386</tt> or <tt>--architectures amd64</tt> is specified:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="395" href="#395" class="lnkocn">395</a></label>
  <p class="code" id="o395">
    #if ARCHITECTURES i386 amd64<br>
memtest86+<br>
#endif<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="396" href="#396" class="lnkocn">396</a></label>
  <p class="i0" id="o396">
    You may also test against variables that may contain more than one value, e.g. to install <i>vrms</i> if either <tt>contrib</tt> or <tt>non-free</tt> is specified via <tt>--archive-areas</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="397" href="#397" class="lnkocn">397</a></label>
  <p class="code" id="o397">
    #if ARCHIVE_AREAS contrib non-free<br>
vrms<br>
#endif<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="398" href="#398" class="lnkocn">398</a></label>
  <p class="i0" id="o398">
    A conditional may surround an <tt>#include</tt> directive:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="399" href="#399" class="lnkocn">399</a></label>
  <p class="code" id="o399">
    #if ARCHITECTURES amd64<br>
#include &lt;gnome-full&gt;<br>
#endif<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="400" href="#400" class="lnkocn">400</a></label>
  <p class="i0" id="o400">
    The nesting of conditionals is not supported.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="401" href="#401" class="lnkocn">401</a></label>
  <h6 class="norm" id="o401">
<a name="401"></a>
    <a name="h8.2.7"></a><a name="desktop-and-language-tasks"></a><a name="hdesktop-and-language-tasks">8.2.7 Desktop and language tasks</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="402" href="#402" class="lnkocn">402</a></label>
  <p class="i0" id="o402">
    Desktop and language tasks are special cases that need some extra planning and configuration. Live images are different from Debian Installer images in this respect. In the Debian Installer, if the medium was prepared for a particular desktop environment flavour, the corresponding task will be automatically installed. Thus, there are internal <tt>gnome-desktop</tt>, <tt>kde-desktop</tt>, <tt>lxde-desktop</tt> and <tt>xfce-desktop</tt> tasks, none of which are offered in <tt>tasksel</tt>'s menu. Likewise, there are no menu entries for tasks for languages, but the user's language choice during the install influences the selection of corresponding language tasks.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="403" href="#403" class="lnkocn">403</a></label>
  <p class="i0" id="o403">
    When developing a desktop live image, the image typically boots directly to a working desktop, the choices of both desktop and default language having been made at build time, not at run time as in the case of the Debian Installer. That's not to say that a live image couldn't be built to support multiple desktops or multiple languages and offer the user a choice, but that is not <i>live-build</i>' s default behaviour.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="404" href="#404" class="lnkocn">404</a></label>
  <p class="i0" id="o404">
    Because there is no provision made automatically for language tasks, which include such things as language-specific fonts and input-method packages, if you want them, you need to specify them in your configuration. For example, a GNOME desktop image containing support for Japanese might include these task metapackages:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="405" href="#405" class="lnkocn">405</a></label>
  <p class="code" id="o405">
    $ lb config<br>
$ echo "task-gnome-desktop task-laptop" &gt;&gt; config/package-lists/my.list.chroot<br>
$ echo "task-japanese task-japanese-desktop task-japanese-gnome-desktop" &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="406" href="#406" class="lnkocn">406</a></label>
  <h6 class="norm" id="o406">
<a name="406"></a>
    <a name="h8.2.8"></a><a name="kernel-flavour-and-version"></a><a name="hkernel-flavour-and-version">8.2.8 Kernel flavour and version</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="407" href="#407" class="lnkocn">407</a></label>
  <p class="i0" id="o407">
    One or more kernel flavours will be included in your image by default, depending on the architecture. You can choose different flavours via the <tt>--linux-flavours</tt> option. Each flavour is suffixed to the default stub <tt>linux-image</tt> to form each metapackage name which in turn depends on an exact kernel package to be included in your image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="408" href="#408" class="lnkocn">408</a></label>
  <p class="i0" id="o408">
    Thus by default, an <tt>amd64</tt> architecture image will include the <tt>linux-image-amd64</tt> flavour metapackage, and an <tt>i386</tt> architecture image will include the <tt>linux-image-486</tt> and <tt>linux-image-686-pae</tt> metapackages. At time of writing, these packages depend on <tt>linux-image-3.2.0-4-amd64</tt>, <tt>linux-image-3.2.0-4-486</tt> and <tt>linux-image-3.2.0-4-686-pae</tt>, respectively.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="409" href="#409" class="lnkocn">409</a></label>
  <p class="i0" id="o409">
    When more than one kernel package version is available in your configured archives, you can specify a different kernel package name stub with the <tt>--linux-packages</tt> option. For example, supposing you are building an <tt>amd64</tt> architecture image and add the experimental archive for testing purposes so you can install the <tt>linux-image-3.5-trunk-amd64</tt> kernel. You would configure that image as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="410" href="#410" class="lnkocn">410</a></label>
  <p class="code" id="o410">
    $ lb config --linux-packages linux-image-3.5-trunk<br>
$ echo "deb http://ftp.debian.org/debian/ experimental main" &gt; config/archives/experimental.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="411" href="#411" class="lnkocn">411</a></label>
  <h6 class="norm" id="o411">
<a name="411"></a>
    <a name="h8.2.9"></a><a name="custom-kernels"></a><a name="hcustom-kernels">8.2.9 Custom kernels</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="412" href="#412" class="lnkocn">412</a></label>
  <p class="i0" id="o412">
    You can build and include your own custom kernels, so long as they are integrated within the Debian package management system. The <i>live-build</i> system does not support kernels not built as <tt>.deb</tt> packages.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="413" href="#413" class="lnkocn">413</a></label>
  <p class="i0" id="o413">
    The proper and recommended way to deploy your own kernel packages is to follow the instructions in the <tt>kernel-handbook</tt>. Remember to modify the ABI and flavour suffixes appropriately, then include a complete build of the <tt>linux</tt> and matching <tt>linux-latest</tt> packages in your reposistory.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="414" href="#414" class="lnkocn">414</a></label>
  <p class="i0" id="o414">
    If you opt to build the kernel packages without the matching metapackages, you need to specify an appropriate <tt>--linux-packages</tt> stub as discussed in  <a href="#kernel-flavour-and-version">Kernel flavour and version</a>.  As we explain in  <a href="#installing-modified-or-third-party-packages">Installing modified or third-party packages</a>,  it is best if you include your custom kernel packages in your own repository, though the alternatives discussed in that section work as well.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="415" href="#415" class="lnkocn">415</a></label>
  <p class="i0" id="o415">
    It is beyond the scope of this document to give advice on how to customize your kernel. However, you must at least ensure your configuration satisfies these minimum requirements:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="416" href="#416" class="lnkocn">416</a></label>
  <li class="bullet" id="o416">
    Use an initial ramdisk.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="417" href="#417" class="lnkocn">417</a></label>
  <li class="bullet" id="o417">
    Include the union filesystem module (i.e. usually <tt>aufs</tt>).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="418" href="#418" class="lnkocn">418</a></label>
  <li class="bullet" id="o418">
    Include any other filesystem modules required by your configuration (i.e. usually <tt>squashfs</tt>).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="419" href="#419" class="lnkocn">419</a></label>
  <li class="bullet" id="o419">
    Suffix each kernel package name with the kernel flavour (e.g. <tt>-amd64</tt>).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="420" href="#420" class="lnkocn">420</a></label>
  <h5 class="norm" id="o420">
<a name="420"></a>
    <a name="h8.3"></a><a name="installing-modified-or-third-party-packages"></a><a name="hinstalling-modified-or-third-party-packages">8.3 Installing modified or third-party packages</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="421" href="#421" class="lnkocn">421</a></label>
  <p class="i0" id="o421">
    While it is against the philosophy of Debian Live, it may sometimes be necessary to build a Live system with modified versions of packages that are in the Debian repository. This may be to modify or support additional features, languages and branding, or even to remove elements of existing packages that are undesirable. Similarly, "third-party" packages may be used to add bespoke and/or proprietary functionality.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="422" href="#422" class="lnkocn">422</a></label>
  <p class="i0" id="o422">
    This section does not cover advice regarding building or maintaining modified packages. Joachim Breitner's 'How to fork privately' method from ‹<a href="http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html" target="_top">http://www.joachim-breitner.de/blog/archives/282-How-to-fork-privately.html</a>› may be of interest, however. The creation of bespoke packages is covered in the Debian New Maintainers' Guide at ‹<a href="http://www.debian.org/doc/maint-guide/" target="_top">http://www.debian.org/doc/maint-guide/</a>› and elsewhere.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="423" href="#423" class="lnkocn">423</a></label>
  <p class="i0" id="o423">
    There are two ways of installing modified custom packages:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="424" href="#424" class="lnkocn">424</a></label>
  <li class="bullet" id="o424">
    <tt>packages.chroot</tt>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="425" href="#425" class="lnkocn">425</a></label>
  <li class="bullet" id="o425">
    Using a custom APT repository
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="426" href="#426" class="lnkocn">426</a></label>
  <p class="i0" id="o426">
    Using <tt>packages.chroot</tt> is simpler to achieve and useful for "one-off" customizations but has a number of drawbacks, while using a custom APT repository is more time-consuming to set up.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="427" href="#427" class="lnkocn">427</a></label>
  <h6 class="norm" id="o427">
<a name="427"></a>
    <a name="8.3.1"></a><a name="h8.3.1"></a><a name="h8.3.1">8.3.1 Using <tt>packages.chroot</tt> to install custom packages</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="428" href="#428" class="lnkocn">428</a></label>
  <p class="i0" id="o428">
    To install a custom package, simply copy it to the <tt>config/packages.chroot/</tt> directory. Packages that are inside this directory will be automatically installed into the live system during build - you do not need to specify them elsewhere.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="429" href="#429" class="lnkocn">429</a></label>
  <p class="i0" id="o429">
    Packages <b>must</b> be named in the prescribed way. One simple way to do this is to use <tt>dpkg-name</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="430" href="#430" class="lnkocn">430</a></label>
  <p class="i0" id="o430">
    Using <tt>packages.chroot</tt> for installation of custom packages has disadvantages:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="431" href="#431" class="lnkocn">431</a></label>
  <li class="bullet" id="o431">
    It is not possible to use secure APT.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="432" href="#432" class="lnkocn">432</a></label>
  <li class="bullet" id="o432">
    You must install all appropriate packages in the <tt>config/packages.chroot/</tt> directory.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="433" href="#433" class="lnkocn">433</a></label>
  <li class="bullet" id="o433">
    It does not lend itself to storing Debian Live configurations in revision control.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="434" href="#434" class="lnkocn">434</a></label>
  <h6 class="norm" id="o434">
<a name="434"></a>
    <a name="8.3.2"></a><a name="h8.3.2"></a><a name="h8.3.2">8.3.2 Using an APT repository to install custom packages</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="435" href="#435" class="lnkocn">435</a></label>
  <p class="i0" id="o435">
    Unlike using <tt>packages.chroot</tt>, when using a custom APT repository you must ensure that you specify the packages elsewhere. See  <a href="#choosing-packages-to-install">Choosing packages to install</a>  for details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="436" href="#436" class="lnkocn">436</a></label>
  <p class="i0" id="o436">
    While it may seem unnecessary effort to create an APT repository to install custom packages, the infrastructure can be easily re-used at a later date to offer updates of the modified packages.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="437" href="#437" class="lnkocn">437</a></label>
  <h6 class="norm" id="o437">
<a name="437"></a>
    <a name="8.3.3"></a><a name="h8.3.3"></a><a name="h8.3.3">8.3.3 Custom packages and APT</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="438" href="#438" class="lnkocn">438</a></label>
  <p class="i0" id="o438">
    <i>live-build</i> uses APT to install all packages into the live system so will therefore inherit behaviours from this program. One relevant example is that (assuming a default configuration) given a package available in two different repositories with different version numbers, APT will elect to install the package with the higher version number.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="439" href="#439" class="lnkocn">439</a></label>
  <p class="i0" id="o439">
    Because of this, you may wish to increment the version number in your custom packages' <tt>debian/changelog</tt> files to ensure that your modified version is installed over one in the official Debian repositories. This may also be achieved by altering the live system's APT pinning preferences - see  <a href="#apt-pinning">APT pinning</a>  for more information.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="440" href="#440" class="lnkocn">440</a></label>
  <h5 class="norm" id="o440">
<a name="440"></a>
    <a name="8.4"></a><a name="h8.4"></a><a name="h8.4">8.4 Configuring APT at build time</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="441" href="#441" class="lnkocn">441</a></label>
  <p class="i0" id="o441">
    You can configure APT through a number of options applied only at build time. (APT configuration used in the running live system may be configured in the normal way for live system contents, that is, by including the appropriate configurations through <tt>config/includes.chroot/</tt>.) For a complete list, look for options starting with <tt>apt</tt> in the <tt>lb_config</tt> man page.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="442" href="#442" class="lnkocn">442</a></label>
  <h6 class="norm" id="o442">
<a name="442"></a>
    <a name="h8.4.1"></a><a name="choosing-apt-or-aptitude"></a><a name="hchoosing-apt-or-aptitude">8.4.1 Choosing apt or aptitude</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="443" href="#443" class="lnkocn">443</a></label>
  <p class="i0" id="o443">
    You can elect to use either <i>apt</i> or <i>aptitude</i> when installing packages at build time. Which utility is used is governed by the <tt>--apt</tt> argument to <tt>lb config</tt>. Choose the method implementing the preferred behaviour for package installation, the notable difference being how missing packages are handled.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="444" href="#444" class="lnkocn">444</a></label>
  <li class="bullet" id="o444">
    <tt>apt</tt>: With this method, if a missing package is specified, the package installation will fail. This is the default setting.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="445" href="#445" class="lnkocn">445</a></label>
  <li class="bullet" id="o445">
    <tt>aptitude</tt>: With this method, if a missing package is specified, the package installation will succeed.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="446" href="#446" class="lnkocn">446</a></label>
  <h6 class="norm" id="o446">
<a name="446"></a>
    <a name="8.4.2"></a><a name="h8.4.2"></a><a name="h8.4.2">8.4.2 Using a proxy with APT</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="447" href="#447" class="lnkocn">447</a></label>
  <p class="i0" id="o447">
    One commonly required APT configuration is to deal with building an image behind a proxy. You may specify your APT proxy with the <tt>--apt-ftp-proxy</tt> or <tt>--apt-http-proxy</tt> options as needed, e.g.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="448" href="#448" class="lnkocn">448</a></label>
  <p class="code" id="o448">
    $ lb config --apt-http-proxy http://proxy/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="449" href="#449" class="lnkocn">449</a></label>
  <h6 class="norm" id="o449">
<a name="449"></a>
    <a name="h8.4.3"></a><a name="tweaking-apt-to-save-space"></a><a name="htweaking-apt-to-save-space">8.4.3 Tweaking APT to save space</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="450" href="#450" class="lnkocn">450</a></label>
  <p class="i0" id="o450">
    You may find yourself needing to save some space on the image media, in which case one or the other or both of the following options may be of interest.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="451" href="#451" class="lnkocn">451</a></label>
  <p class="i0" id="o451">
    If you don't want to include APT indices in the image, you can omit those with:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="452" href="#452" class="lnkocn">452</a></label>
  <p class="code" id="o452">
    $ lb config --apt-indices false<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="453" href="#453" class="lnkocn">453</a></label>
  <p class="i0" id="o453">
    This will not influence the entries in <tt>/etc/apt/sources.list</tt>, but merely whether <tt>/var/lib/apt</tt> contains the indices files or not. The tradeoff is that APT needs those indices in order to operate in the live system, so before performing <tt>apt-cache search</tt> or <tt>apt-get install</tt>, for instance, the user must <tt>apt-get update</tt> first to create those indices.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="454" href="#454" class="lnkocn">454</a></label>
  <p class="i0" id="o454">
    If you find the installation of recommended packages bloats your image too much, provided you are prepared to deal with the consequences discussed below, you may disable that default option of APT with:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="455" href="#455" class="lnkocn">455</a></label>
  <p class="code" id="o455">
    $ lb config --apt-recommends false<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="456" href="#456" class="lnkocn">456</a></label>
  <p class="i0" id="o456">
    The most important consequence of turning off recommends is that <tt>live-boot</tt> and <tt>live-config</tt> themselves recommend some packages that provide important functionality used by most Live configurations, such as <tt>user-setup</tt> which <tt>live-config</tt> recommends and is used to create the live user. In all but the most exceptional circumstances you need to add back at least some of these recommends to your package lists or else your image will not work as expected, if at all. Look at the recommended packages for each of the <tt>live-*</tt> packages included in your build and if you are not certain you can omit them, add them back into your package lists.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="457" href="#457" class="lnkocn">457</a></label>
  <p class="i0" id="o457">
    The more general consequence is that if you don't install recommended packages for any given package, that is, "packages that would be found together with this one in all but unusual installations" (Debian Policy Manual, section 7.2), some packages that users of your Live system actually need may be omitted. Therefore, we suggest you review the difference turning off recommends makes to your packages list (see the <tt>binary.packages</tt> file generated by <tt>lb build</tt>) and re-include in your list any missing packages that you still want installed. Alternatively, if you find you only want a small number of recommended packages left out, leave recommends enabled and set a negative APT pin priority on selected packages to prevent them from being installed, as explained in  <a href="#apt-pinning">APT pinning</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="458" href="#458" class="lnkocn">458</a></label>
  <h6 class="norm" id="o458">
<a name="458"></a>
    <a name="8.4.4"></a><a name="h8.4.4"></a><a name="h8.4.4">8.4.4 Passing options to apt or aptitude</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="459" href="#459" class="lnkocn">459</a></label>
  <p class="i0" id="o459">
    If there is not a <tt>lb config</tt> option to alter APT's behaviour in the way you need, use <tt>--apt-options</tt> or <tt>--aptitude-options</tt> to pass any options through to your configured APT tool. See the man pages for <tt>apt</tt> and <tt>aptitude</tt> for details. Note that both options have default values that you will need to retain in addition to any overrides you may provide. So, for example, suppose you have included something from <tt>snapshot.debian.org</tt> for testing purposes and want to specify <tt>Acquire::Check-Valid-Until=false</tt> to make APT happy with the stale <tt>Release</tt> file, you would do so as per the following example, appending the new option after the default value <tt>--yes</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="460" href="#460" class="lnkocn">460</a></label>
  <p class="code" id="o460">
    $ lb config --apt-options "--yes -oAcquire::Check-Valid-Until=false"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="461" href="#461" class="lnkocn">461</a></label>
  <p class="i0" id="o461">
    Please check the man pages to fully understand these options and when to use them. This is an example only and should not be construed as advice to configure your image this way. This option would not be appropriate for, say, a final release of a live image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="462" href="#462" class="lnkocn">462</a></label>
  <p class="i0" id="o462">
    For more complicated APT configurations involving <tt>apt.conf</tt> options you might want to create a <tt>config/apt/apt.conf</tt> file instead. See also the other <tt>apt-*</tt> options for a few convenient shortcuts for frequently needed options.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="463" href="#463" class="lnkocn">463</a></label>
  <h6 class="norm" id="o463">
<a name="463"></a>
    <a name="h8.4.5"></a><a name="apt-pinning"></a><a name="hapt-pinning">8.4.5 APT pinning</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="464" href="#464" class="lnkocn">464</a></label>
  <p class="i0" id="o464">
    For background, please first read the <tt>apt_preferences(5)</tt> man page. APT pinning can be configured either for build time, or else for run time. For the former, create <tt>config/apt/preferences</tt>. For the latter, create <tt>config/includes.chroot/etc/apt/preferences</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="465" href="#465" class="lnkocn">465</a></label>
  <p class="i0" id="o465">
    Let's say you are building a <b>wheezy</b> live system but need all the live packages that end up in the binary image to be installed from <b>sid</b> at build time. You need to add <b>sid</b> to your APT sources and pin it so that only the packages you want are installed from it at build time and all others are taken from the target system distribution, <b>wheezy</b>. The following will accomplish this:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="466" href="#466" class="lnkocn">466</a></label>
  <p class="code" id="o466">
    $ echo "deb http://mirror/debian/ sid main" &gt; config/archives/sid.list.chroot<br>
$ cat &gt;&gt; config/apt/preferences &lt;&lt; EOF<br>
Package: live-*<br>
Pin: release n=sid<br>
Pin-Priority: 600<br><br>
Package: *<br>
Pin: release n=sid<br>
Pin-Priority: 1<br>
EOF<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="467" href="#467" class="lnkocn">467</a></label>
  <p class="i0" id="o467">
    Negative pin priorities will prevent a package from being installed, as in the case where you do not want a package that is recommended by another package. Suppose you are building an LXDE image using <tt>task-lxde-desktop</tt> in <tt>config/package-lists/lxde-desktop.list.chroot</tt>, but don't want the user prompted to store wifi passwords in the keyring. This metapackage depends on <i>lxde-core</i>, which recommends <i>gksu</i>, which in turn recommends <i>gnome-keyring</i>. So you want to omit the recommended <i>gnome-keyring</i> package. This can be done by adding the following stanza to <tt>config/apt/preferences</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="468" href="#468" class="lnkocn">468</a></label>
  <p class="code" id="o468">
    Package: gnome-keyring<br>
Pin: version *<br>
Pin-Priority: -1<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="469" href="#469" class="lnkocn">469</a></label>
  <h4 class="norm" id="o469">
<a name="469"></a>
    <a name="h9"></a><a name="customizing_contents"></a><a name="customizing-contents"></a><a name="hcustomizing-contents">9. Customizing contents</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="470" href="#470" class="lnkocn">470</a></label>
  <p class="i0" id="o470">
    This chapter discusses fine-tuning customization of the live system contents beyond merely choosing which packages to include. Includes allow you to add or replace arbitrary files in your Debian Live image, hooks allow you to execute arbitrary commands at different stages of the build and at boot time, and preseeding allows you to configure packages when they are installed by supplying answers to debconf questions.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="471" href="#471" class="lnkocn">471</a></label>
  <h5 class="norm" id="o471">
<a name="471"></a>
    <a name="h9.1"></a><a name="includes"></a><a name="hincludes">9.1 Includes</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="472" href="#472" class="lnkocn">472</a></label>
  <p class="i0" id="o472">
    While ideally a Debian live system would include files entirely provided by unmodified Debian packages, it is sometimes convenient to provide or modify some content by means of files. Using includes, it is possible to add (or replace) arbitrary files in your Debian Live image. <i>live-build</i> provides two mechanisms for using them:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="473" href="#473" class="lnkocn">473</a></label>
  <li class="bullet" id="o473">
    Chroot local includes: These allow you to add or replace files to the chroot/Live filesystem. Please see  <a href="#live-chroot-local-includes">Live/chroot local includes</a>  for more information.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="474" href="#474" class="lnkocn">474</a></label>
  <li class="bullet" id="o474">
    Binary local includes: These allow you to add or replace files in the binary image. Please see  <a href="#binary-local-includes">Binary local includes</a>  for more information.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="475" href="#475" class="lnkocn">475</a></label>
  <p class="i0" id="o475">
    Please see  <a href="#terms">Terms</a>  for more information about the distinction between the "Live" and "binary" images.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="476" href="#476" class="lnkocn">476</a></label>
  <h6 class="norm" id="o476">
<a name="476"></a>
    <a name="h9.1.1"></a><a name="live-chroot-local-includes"></a><a name="hlive-chroot-local-includes">9.1.1 Live/chroot local includes</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="477" href="#477" class="lnkocn">477</a></label>
  <p class="i0" id="o477">
    Chroot local includes can be used to add or replace files in the chroot/Live filesystem so that they may be used in the Live system. A typical use is to populate the skeleton user directory (<tt>/etc/skel</tt>) used by the Live system to create the live user's home directory. Another is to supply configuration files that can be simply added or replaced in the image without processing; see  <a href="#live-chroot-local-hooks">Live/chroot local hooks</a>  if processing is needed.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="478" href="#478" class="lnkocn">478</a></label>
  <p class="i0" id="o478">
    To include files, simply add them to your <tt>config/includes.chroot</tt> directory. This directory corresponds to the root directory <tt>/</tt> of the live system. For example, to add a file <tt>/var/www/index.html</tt> in the live system, use:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="479" href="#479" class="lnkocn">479</a></label>
  <p class="code" id="o479">
    $ mkdir -p config/includes.chroot/var/www<br>
$ cp /path/to/my/index.html config/includes.chroot/var/www<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="480" href="#480" class="lnkocn">480</a></label>
  <p class="i0" id="o480">
    Your configuration will then have the following layout:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="481" href="#481" class="lnkocn">481</a></label>
  <p class="code" id="o481">
    -- config<br>
    [...]<br>
     |-- includes.chroot<br>
     |   `-- var<br>
     |       `-- www<br>
     |           `-- index.html<br>
    [...]<br>
     `-- templates<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="482" href="#482" class="lnkocn">482</a></label>
  <p class="i0" id="o482">
    Chroot local includes are installed after package installation so that files installed by packages are overwritten.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="483" href="#483" class="lnkocn">483</a></label>
  <h6 class="norm" id="o483">
<a name="483"></a>
    <a name="h9.1.2"></a><a name="binary-local-includes"></a><a name="hbinary-local-includes">9.1.2 Binary local includes</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="484" href="#484" class="lnkocn">484</a></label>
  <p class="i0" id="o484">
    To include material such as documentation or videos on the media filesystem so that it is accessible immediately upon insertion of the media without booting the Live system, you can use binary local includes. This works in a similar fashion to chroot local includes. For example, suppose the files <tt>~/video_demo.*</tt> are demo videos of the live system described by and linked to by an HTML index page. Simply copy the material to <tt>config/includes.binary/</tt> as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="485" href="#485" class="lnkocn">485</a></label>
  <p class="code" id="o485">
    $ cp ~/video_demo.* config/includes.binary/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="486" href="#486" class="lnkocn">486</a></label>
  <p class="i0" id="o486">
    These files will now appear in the root directory of the live media.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="487" href="#487" class="lnkocn">487</a></label>
  <h5 class="norm" id="o487">
<a name="487"></a>
    <a name="h9.2"></a><a name="hooks"></a><a name="hhooks">9.2 Hooks</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="488" href="#488" class="lnkocn">488</a></label>
  <p class="i0" id="o488">
    Hooks allow commands to be performed in the chroot and binary stages of the build in order to customize the image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="489" href="#489" class="lnkocn">489</a></label>
  <h6 class="norm" id="o489">
<a name="489"></a>
    <a name="h9.2.1"></a><a name="live-chroot-local-hooks"></a><a name="hlive-chroot-local-hooks">9.2.1 Live/chroot local hooks</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="490" href="#490" class="lnkocn">490</a></label>
  <p class="i0" id="o490">
    To run commands in the chroot stage, create a hook script with a <tt>.chroot</tt> suffix containing the commands in the <tt>config/hooks/</tt> directory. The hook will run in the chroot after the rest of your chroot configuration has been applied, so remember to ensure your configuration includes all packages and files your hook needs in order to run. See the example chroot hook scripts for various common chroot customization tasks provided in <tt>/usr/share/doc/live-build/examples/hooks</tt> which you can copy or symlink to use them in your own configuration.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="491" href="#491" class="lnkocn">491</a></label>
  <h6 class="norm" id="o491">
<a name="491"></a>
    <a name="h9.2.2"></a><a name="boot-time-hooks"></a><a name="hboot-time-hooks">9.2.2 Boot-time hooks</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="492" href="#492" class="lnkocn">492</a></label>
  <p class="i0" id="o492">
    To execute commands at boot time, you can supply <i>live-config</i> hooks as explained in the "Customization" section of its man page. Examine <i>live-config</i>' s own hooks provided in <tt>/lib/live/config/</tt>, noting the sequence numbers. Then provide your own hook prefixed with an appropriate sequence number, either as a chroot local include in <tt>config/includes.chroot/lib/live/config/</tt>, or as a custom package as discussed in  <a href="#installing-modified-or-third-party-packages">Installing modified or third-party packages</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="493" href="#493" class="lnkocn">493</a></label>
  <h6 class="norm" id="o493">
<a name="493"></a>
    <a name="9.2.3"></a><a name="h9.2.3"></a><a name="h9.2.3">9.2.3 Binary local hooks</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="494" href="#494" class="lnkocn">494</a></label>
  <p class="i0" id="o494">
    To run commands in the binary stage, create a hook script with a <tt>.binary</tt> suffix containing the commands in the <tt>config/hooks/</tt> directory. The hook will run after all other binary commands are run, but before binary_checksums, the very last binary command. The commands in your hook do not run in the chroot, so take care to not modify any files outside of the build tree, or you may damage your build system! See the example binary hook scripts for various common binary customization tasks provided in <tt>/usr/share/doc/live-build/examples/hooks</tt> which you can copy or symlink to use them in your own configuration.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="495" href="#495" class="lnkocn">495</a></label>
  <h5 class="norm" id="o495">
<a name="495"></a>
    <a name="9.3"></a><a name="h9.3"></a><a name="h9.3">9.3 Preseeding Debconf questions</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="496" href="#496" class="lnkocn">496</a></label>
  <p class="i0" id="o496">
    Files in the <tt>config/preseed/</tt> directory suffixed with <tt>.preseed</tt> followed by the stage (<tt>.chroot</tt> or <tt>.binary</tt>) are considered to be debconf preseed files and are installed by <i>live-build</i> using <tt>debconf-set-selections</tt> during the corresponding stage.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="497" href="#497" class="lnkocn">497</a></label>
  <p class="i0" id="o497">
    For more information about debconf, please see <tt>debconf(7)</tt> in the <i>debconf</i> package.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="498" href="#498" class="lnkocn">498</a></label>
  <h4 class="norm" id="o498">
<a name="498"></a>
    <a name="h10"></a><a name="customizing_run_time_behaviours"></a><a name="customizing-run-time-behaviours"></a><a name="hcustomizing-run-time-behaviours">10. Customizing run time behaviours</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="499" href="#499" class="lnkocn">499</a></label>
  <p class="i0" id="o499">
    All configuration that is done during run time is done by <i>live-config</i>. Here are some of the most common options of <i>live-config</i> that users are interested in. A full list of all possibilities can be found in the manpage of <i>live-config</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="500" href="#500" class="lnkocn">500</a></label>
  <h5 class="norm" id="o500">
<a name="500"></a>
    <a name="10.1"></a><a name="h10.1"></a><a name="h10.1">10.1 Customizing the live user</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="501" href="#501" class="lnkocn">501</a></label>
  <p class="i0" id="o501">
    One important consideration is that the live user is created by <i>live-boot</i> at boot time, not by <i>live-build</i> at build time. This not only influences where materials relating to the live user are introduced in your build, as discussed in  <a href="#live-chroot-local-includes">Live/chroot local includes</a>,  but also any groups and permissions associated with the live user.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="502" href="#502" class="lnkocn">502</a></label>
  <p class="i0" id="o502">
    You can specify additional groups that the live user will belong to by preseeding the <tt>passwd/user-default-groups</tt> debconf value. For example, to add the live user to the <tt>fuse</tt> group, add the following preseed under <tt>config/preseed/</tt> for the chroot stage:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="503" href="#503" class="lnkocn">503</a></label>
  <p class="code" id="o503">
    $ lb config<br>
$ echo user-setup passwd/user-default-groups string audio cdrom \<br>
   dip floppy video plugdev netdev powerdev scanner bluetooth fuse \<br>
   &gt;&gt; config/preseed/my.preseed.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="504" href="#504" class="lnkocn">504</a></label>
  <p class="i0" id="o504">
    It is also possible to change the default username "user" and the default password "live". If you want to do that for any reason, you can easily achieve it as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="505" href="#505" class="lnkocn">505</a></label>
  <p class="i0" id="o505">
    To change the default username you can simply specify it in your config:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="506" href="#506" class="lnkocn">506</a></label>
  <p class="code" id="o506">
    $ lb config --bootappend-live "boot=live config username=live-user"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="507" href="#507" class="lnkocn">507</a></label>
  <p class="i0" id="o507">
    One possible way of changing the default password is by means of a hook as described in  <a href="#boot-time-hooks">Boot-time hooks</a>.  In order to do that you can use the "passwd" hook from <tt>/usr/share/doc/live-config/examples/hooks</tt>, prefix it accordingly (e.g. 2000-passwd) and add it to <tt>config/includes.chroot/lib/live/config/</tt>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="508" href="#508" class="lnkocn">508</a></label>
  <h5 class="norm" id="o508">
<a name="508"></a>
    <a name="h10.2"></a><a name="customizing-locale-and-language"></a><a name="hcustomizing-locale-and-language">10.2 Customizing locale and language</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="509" href="#509" class="lnkocn">509</a></label>
  <p class="i0" id="o509">
    When the live system boots, language is involved in two steps:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="510" href="#510" class="lnkocn">510</a></label>
  <li class="bullet" id="o510">
    the locale generation
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="511" href="#511" class="lnkocn">511</a></label>
  <li class="bullet" id="o511">
    setting the keyboard configuration
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="512" href="#512" class="lnkocn">512</a></label>
  <p class="i0" id="o512">
    The default locale when building a Live system is <tt>locales=en_US.UTF-8</tt>. To define the locale that should be generated, use the <tt>locales</tt> parameter in the <tt>--bootappend-live</tt> option of <tt>lb config</tt>, e.g.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="513" href="#513" class="lnkocn">513</a></label>
  <p class="code" id="o513">
    $ lb config --bootappend-live "boot=live config locales=de_CH.UTF-8"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="514" href="#514" class="lnkocn">514</a></label>
  <p class="i0" id="o514">
    Multiple locales may be specified as a comma-delimited list.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="515" href="#515" class="lnkocn">515</a></label>
  <p class="i0" id="o515">
    This parameter, as well as the keyboard configuration parameters indicated below, can also be used at the kernel command line. You can specify a locale by <tt>language_country</tt> (in which case the default encoding is used) or the full <tt>language_country.encoding</tt> word. A list of supported locales and the encoding for each can be found in <tt>/usr/share/i18n/SUPPORTED</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="516" href="#516" class="lnkocn">516</a></label>
  <p class="i0" id="o516">
    Both the console and X keyboard configuration are performed by <tt>live-config</tt> using the <tt>console-setup</tt> package. To configure them, use the <tt>keyboard-layouts</tt>, <tt>keyboard-variants</tt>, <tt>keyboard-options</tt> and <tt>keyboard-model</tt> boot parameters via the <tt>--bootappend-live</tt> option. Valid options for these can be found in <tt>/usr/share/X11/xkb/rules/base.lst</tt>. To find layouts and variants for a given language, try searching for the English name of the language and/or the country where the language is spoken, e.g:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="517" href="#517" class="lnkocn">517</a></label>
  <p class="code" id="o517">
    $ egrep -i '(^!|german.*switzerland)' /usr/share/X11/xkb/rules/base.lst<br>
! model<br>
! layout<br>
   ch              German (Switzerland)<br>
! variant<br>
   legacy          ch: German (Switzerland, legacy)<br>
   de_nodeadkeys   ch: German (Switzerland, eliminate dead keys)<br>
   de_sundeadkeys  ch: German (Switzerland, Sun dead keys)<br>
   de_mac          ch: German (Switzerland, Macintosh)<br>
! option<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="518" href="#518" class="lnkocn">518</a></label>
  <p class="i0" id="o518">
    Note that each variant lists the layout to which it applies in the description.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="519" href="#519" class="lnkocn">519</a></label>
  <p class="i0" id="o519">
    Often, only the layout needs to be configured. For example, to get the locale files for German and Swiss German keyboard layout in X use:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="520" href="#520" class="lnkocn">520</a></label>
  <p class="code" id="o520">
    $ lb config --bootappend-live "boot=live config locales=de_CH.UTF-8 keyboard-layouts=ch"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="521" href="#521" class="lnkocn">521</a></label>
  <p class="i0" id="o521">
    However, for very specific use cases, you may wish to include other parameters. For example, to set up a French system with a French-Dvorak layout (called Bepo) on a TypeMatrix EZ-Reach 2030 USB keyboard, use:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="522" href="#522" class="lnkocn">522</a></label>
  <p class="code" id="o522">
    $ lb config --bootappend-live \<br>
     "boot=live config locales=fr_FR.UTF-8 keyboard-layouts=fr keyboard-variants=bepo keyboard-model=tm2030usb"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="523" href="#523" class="lnkocn">523</a></label>
  <p class="i0" id="o523">
    Multiple values may be specified as comma-delimited lists for each of the <tt>keyboard-*</tt> options, with the exception of <tt>keyboard-model</tt>, which accepts only one value. Please see the <tt>keyboard(5)</tt> man page for details and examples of <tt>XKBMODEL</tt>, <tt>XKBLAYOUT</tt>, <tt>XKBVARIANT</tt> and <tt>XKBOPTIONS</tt> variables. If multiple <tt>keyboard-variants</tt> values are given, they will be matched one-to-one with <tt>keyboard-layouts</tt> values (see <tt>setxkbmap(1)</tt> <tt>-variant</tt> option). Empty values are allowed; e.g. to define two layouts, the default being US QWERTY and the other being US Dvorak, use:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="524" href="#524" class="lnkocn">524</a></label>
  <p class="code" id="o524">
    $ lb config --bootappend-live \<br>
     "boot=live config keyboard-layouts=us,us keyboard-variants=,dvorak"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="525" href="#525" class="lnkocn">525</a></label>
  <h5 class="norm" id="o525">
<a name="525"></a>
    <a name="h10.3"></a><a name="persistence"></a><a name="hpersistence">10.3 Persistence</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="526" href="#526" class="lnkocn">526</a></label>
  <p class="i0" id="o526">
    A live cd paradigm is a pre-installed system which runs from read-only media, like a cdrom, where writes and modifications do not survive reboots of the host hardware which runs it.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="527" href="#527" class="lnkocn">527</a></label>
  <p class="i0" id="o527">
    A Debian Live system is a generalization of this paradigm and thus supports other media in addition to CDs; but still, in its default behaviour, it should be considered read-only and all the run-time evolutions of the system are lost at shutdown.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="528" href="#528" class="lnkocn">528</a></label>
  <p class="i0" id="o528">
    'Persistence' is a common name for different kinds of solutions for saving across reboots some, or all, of this run-time evolution of the system. To understand how it works it would be handy to know that even if the system is booted and run from read-only media, modifications to the files and directories are written on writable media, typically a ram disk (tmpfs) and ram disks' data do not survive reboots.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="529" href="#529" class="lnkocn">529</a></label>
  <p class="i0" id="o529">
    The data stored on this ramdisk should be saved on a writable persistent medium like local storage media, a network share or even a session of a multisession (re)writable CD/DVD. All these media are supported in Debian Live in different ways, and all but the last one require a special boot parameter to be specified at boot time: <tt>persistence</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="530" href="#530" class="lnkocn">530</a></label>
  <p class="i0" id="o530">
    If the boot parameter <tt>persistence</tt> is set (and <tt>nopersistence</tt> is not set), local storage media (e.g. hard disks, USB drives) will be probed for persistence volumes during boot. It is possible to restrict which types of persistence volumes to use by specifying certain boot parameters described in the <i>live-boot</i>(7) man page. A persistence volume is any of the following:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="531" href="#531" class="lnkocn">531</a></label>
  <li class="bullet" id="o531">
    a partition, identified by its GPT name.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="532" href="#532" class="lnkocn">532</a></label>
  <li class="bullet" id="o532">
    a filesystem, identified by its filesystem label.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="533" href="#533" class="lnkocn">533</a></label>
  <li class="bullet" id="o533">
    an image file located on the root of any readable filesystem (even an NTFS partition of a foreign OS), identified by its file name.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="534" href="#534" class="lnkocn">534</a></label>
  <p class="i0" id="o534">
    The volume label for overlays must be <tt>persistence</tt> but it will be ignored unless it contains in its root a file named <tt>persistence.conf</tt> which is used to fully customize the volume's persistence, this is to say, specifying the directories that you want to save in your persistence volume after a reboot. See  <a href="#persistence-conf">The persistence.conf file</a>  for more details.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="535" href="#535" class="lnkocn">535</a></label>
  <p class="i0" id="o535">
    Here are some examples of how to prepare a volume to be used for persistence. It can be, for instance, an ext4 partition on a hard disk or on a usb key created with, e.g.:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="536" href="#536" class="lnkocn">536</a></label>
  <p class="code" id="o536">
    # mkfs.ext4 -L persistence /dev/sdb1<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="537" href="#537" class="lnkocn">537</a></label>
  <p class="i0" id="o537">
    See also  <a href="#using-usb-extra-space">Using the space left on a USB stick</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="538" href="#538" class="lnkocn">538</a></label>
  <p class="i0" id="o538">
    If you already have a partition on your device, you could just change the label with one of the following:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="539" href="#539" class="lnkocn">539</a></label>
  <p class="code" id="o539">
    # tune2fs -L persistence /dev/sdb1 # for ext2,3,4 filesystems<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="540" href="#540" class="lnkocn">540</a></label>
  <p class="i0" id="o540">
    Here's an example of how to create an ext4-based image file to be used for persistence:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="541" href="#541" class="lnkocn">541</a></label>
  <p class="code" id="o541">
    $ dd if=/dev/null of=persistence bs=1 count=0 seek=1G # for a 1GB sized image file<br>
$ /sbin/mkfs.ext4 -F persistence<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="542" href="#542" class="lnkocn">542</a></label>
  <p class="i0" id="o542">
    Once the image file is created, as an example, to make <tt>/usr</tt> persistent but only saving the changes you make to that directory and not all the contents of <tt>/usr</tt>, you can use the "union" option. If the image file is located in your home directory, copy it to the root of your hard drive's filesystem and mount it in <tt>/mnt</tt> as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="543" href="#543" class="lnkocn">543</a></label>
  <p class="code" id="o543">
    # cp persistence /<br>
# mount -t ext4 /persistence /mnt<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="544" href="#544" class="lnkocn">544</a></label>
  <p class="i0" id="o544">
    Then, create the <tt>persistence.conf</tt> file adding content and unmount the image file.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="545" href="#545" class="lnkocn">545</a></label>
  <p class="code" id="o545">
    # echo "/usr union" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="546" href="#546" class="lnkocn">546</a></label>
  <p class="i0" id="o546">
    Now, reboot into your live media with the boot parameter "persistence".
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="547" href="#547" class="lnkocn">547</a></label>
  <h6 class="norm" id="o547">
<a name="547"></a>
    <a name="h10.3.1"></a><a name="persistence-conf"></a><a name="hpersistence-conf">10.3.1 The persistence.conf file</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="548" href="#548" class="lnkocn">548</a></label>
  <p class="i0" id="o548">
    A volume with the label <tt>persistence</tt> must be configured by means of the <tt>persistence.conf</tt> file to make arbitrary directories persistent. That file, located on the volume's filesystem root, controls which directories it makes persistent, and in which way.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="549" href="#549" class="lnkocn">549</a></label>
  <p class="i0" id="o549">
    How custom overlay mounts are configured is described in full detail in the persistence.conf(5) man page, but a simple example should be sufficient for most uses. Let's say we want to make our home directory and APT cache persistent in an ext4 filesystem on the /dev/sdb1 partition:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="550" href="#550" class="lnkocn">550</a></label>
  <p class="code" id="o550">
    # mkfs.ext4 -L persistence /dev/sdb1<br>
# mount -t ext4 /dev/sdb1 /mnt<br>
# echo "/home" &gt;&gt; /mnt/persistence.conf<br>
# echo "/var/cache/apt" &gt;&gt; /mnt/persistence.conf<br>
# umount /mnt<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="551" href="#551" class="lnkocn">551</a></label>
  <p class="i0" id="o551">
    Then we reboot. During the first boot the contents of <tt>/home</tt> and <tt>/var/cache/apt</tt> will be copied into the persistence volume, and from then on all changes to these directories will live in the persistence volume. Please note that any paths listed in the <tt>persistence.conf</tt> file cannot contain white spaces or the special <tt>.</tt> and <tt>..</tt> path components. Also, neither <tt>/live</tt> (or any of its sub-directories) nor <tt>/</tt> can be made persistent using custom mounts.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="552" href="#552" class="lnkocn">552</a></label>
  <p class="i0" id="o552">
    Several different custom overlay volumes (with their own <tt>persistence.conf</tt> files) can be used at the same time, but if several volumes make the same directory persistent, only one of them will be used. If any two mounts are "nested" (i.e. one is a sub-directory of the other) the parent will be mounted before the child so no mount will be hidden by the other. Nested custom mounts are problematic if they are listed in the same <tt>persistence.conf</tt> file. See the persistence.conf(5) man page for how to handle that case if you really need it (hint: you usually don't).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="553" href="#553" class="lnkocn">553</a></label>
  <h6 class="norm" id="o553">
<a name="553"></a>
    <a name="10.3.2"></a><a name="h10.3.2"></a><a name="h10.3.2">10.3.2 Using more than one persistence store</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="554" href="#554" class="lnkocn">554</a></label>
  <p class="i0" id="o554">
    If a user would need multiple persistence store of the same type for different locations or testing, such as <tt>persistence-nonwork</tt> and <tt>persistence-work</tt>, the boot parameter <tt>persistence-label</tt> used in conjunction with the boot parameter <tt>persistence</tt> will allow for multiple but unique persistence media. An example would be if a user wanted to use a persistence partition labeled <tt>persistence-subText</tt> they would use the boot parameters of: <tt>persistence</tt> <tt>persistence-label=subText</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="555" href="#555" class="lnkocn">555</a></label>
  <h4 class="norm" id="o555">
<a name="555"></a>
    <a name="h11"></a><a name="customizing_the_binary_image"></a><a name="customizing-binary"></a><a name="hcustomizing-binary">11. Customizing the binary image</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="556" href="#556" class="lnkocn">556</a></label>
  <h5 class="norm" id="o556">
<a name="556"></a>
    <a name="11.1"></a><a name="h11.1"></a><a name="h11.1">11.1 Bootloader</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="557" href="#557" class="lnkocn">557</a></label>
  <p class="i0" id="o557">
    <i>live-build</i> uses <i>syslinux</i> and some of its derivatives (depending on the image type) as bootloaders by default. They can be easily customized in a number of ways that range from providing a full theme to only modifying some files that allow you to, for example, change the boot timeout or simply add a personalized splash image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="558" href="#558" class="lnkocn">558</a></label>
  <p class="i0" id="o558">
    In order to use a full theme, specify the <tt>--syslinux-theme</tt> option (see man <tt>lb_config</tt>). <i>live-build</i> will then retrieve the theme from the mirror and install it. You can also package your own theme or modify an already existing one and upload it to your local mirror.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="559" href="#559" class="lnkocn">559</a></label>
  <p class="i0" id="o559">
    Imagine that you want to build a progress client but you prefer to include the server's theme because you want to have the help menu. Then you would launch <tt>lb config</tt> as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="560" href="#560" class="lnkocn">560</a></label>
  <p class="code" id="o560">
    $ lb config --mode progress-linux --syslinux-theme progress-server<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="561" href="#561" class="lnkocn">561</a></label>
  <p class="i0" id="o561">
    If you do not want to bother building a .deb, simply add your local configuration files for a default image to <tt>config/bootloaders/isolinux</tt>. Replacing "isolinux" for <b>extlinux</b>, <b>pxelinux</b> or <b>syslinux</b> depending on your use case.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="562" href="#562" class="lnkocn">562</a></label>
  <p class="i0" id="o562">
    There is also the possibility of making smaller changes. For instance, syslinux derivatives are configured by default with a timeout of 0 (zero) which means that they will pause indefinitely at their splash screen until you press a key.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="563" href="#563" class="lnkocn">563</a></label>
  <p class="i0" id="o563">
    To modify the boot timeout of a default <tt>iso-hybrid</tt> image just edit a default <b>isolinux.cfg</b> file specifying the timeout in units of seconds and add it to <tt>config/includes.binary/isolinux/</tt>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="564" href="#564" class="lnkocn">564</a></label>
  <p class="i0" id="o564">
    A modified <b>isolinux.cfg</b> to boot after five seconds would be similar to this:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="565" href="#565" class="lnkocn">565</a></label>
  <p class="code" id="o565">
    include menu.cfg<br>
default vesamenu.c32<br>
prompt 0<br>
timeout 50<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="566" href="#566" class="lnkocn">566</a></label>
  <p class="i0" id="o566">
    An alternative way of achieving the same goal could be writing a hook and adding it to <tt>config/hooks/</tt> Remember to add the <tt>.binary</tt> suffix to run in the binary stage. A proposed example:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="567" href="#567" class="lnkocn">567</a></label>
  <p class="code" id="o567">
    #!/bin/sh<br><br>
sed -i 's|timeout 0|timeout 50|' binary/isolinux/isolinux.cfg<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="568" href="#568" class="lnkocn">568</a></label>
  <p class="i0" id="o568">
    Likewise, if you want to use a personalized splash.png image, add a picture of 640x480 pixels to <tt>config/includes.binary/isolinux/</tt>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="569" href="#569" class="lnkocn">569</a></label>
  <h5 class="norm" id="o569">
<a name="569"></a>
    <a name="11.2"></a><a name="h11.2"></a><a name="h11.2">11.2 ISO metadata</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="570" href="#570" class="lnkocn">570</a></label>
  <p class="i0" id="o570">
    When creating an ISO9660 binary image, you can use the following options to add various textual metadata for your image. This can help you easily identify the version or configuration of an image without booting it.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="571" href="#571" class="lnkocn">571</a></label>
  <li class="bullet" id="o571">
    <tt>LB_ISO_APPLICATION/--iso-application NAME</tt>: This should describe the application that will be on the image. The maximum length for this field is 128 characters.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="572" href="#572" class="lnkocn">572</a></label>
  <li class="bullet" id="o572">
    <tt>LB_ISO_PREPARER/--iso-preparer NAME</tt>: This should describe the preparer of the image, usually with some contact details. The default for this option is the <i>live-build</i> version you are using, which may help with debugging later. The maximum length for this field is 128 characters.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="573" href="#573" class="lnkocn">573</a></label>
  <li class="bullet" id="o573">
    <tt>LB_ISO_PUBLISHER/--iso-publisher NAME</tt>: This should describe the publisher of the image, usually with some contact details. The maximum length for this field is 128 characters.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="574" href="#574" class="lnkocn">574</a></label>
  <li class="bullet" id="o574">
    <tt>LB_ISO_VOLUME/--iso-volume NAME</tt>: This should specify the volume ID of the image. This is used as a user-visible label on some platforms such as Windows and Apple Mac OS. The maximum length for this field is 32 characters.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="575" href="#575" class="lnkocn">575</a></label>
  <h4 class="norm" id="o575">
<a name="575"></a>
    <a name="h12"></a><a name="customizing_debian_installer"></a><a name="customizing-installer"></a><a name="hcustomizing-installer">12. Customizing Debian Installer</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="576" href="#576" class="lnkocn">576</a></label>
  <p class="i0" id="o576">
    Debian Live system images can be integrated with Debian Installer. There are a number of different types of installation, varying in what is included and how the installer operates.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="577" href="#577" class="lnkocn">577</a></label>
  <p class="i0" id="o577">
    Please note the careful use of capital letters when referring to the "Debian Installer" in this section - when used like this we refer explicitly to the official installer for the Debian system, not anything else. It is often seen abbreviated to "d-i".
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="578" href="#578" class="lnkocn">578</a></label>
  <h5 class="norm" id="o578">
<a name="578"></a>
    <a name="12.1"></a><a name="h12.1"></a><a name="h12.1">12.1 Types of Debian Installer</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="579" href="#579" class="lnkocn">579</a></label>
  <p class="i0" id="o579">
    The three main types of installer are:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="580" href="#580" class="lnkocn">580</a></label>
  <p class="i0" id="o580">
    <b>"Regular" Debian Installer</b>: This is a normal Debian Live image with a separate kernel and initrd which (when selected from the appropriate bootloader) launches into a standard Debian Installer instance, just as if you had downloaded a CD image of Debian and booted it. Images containing a live system and such an otherwise independent installer are often referred to as "combined images".
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="581" href="#581" class="lnkocn">581</a></label>
  <p class="i0" id="o581">
    On such images, Debian is installed by fetching and installing .deb packages using <i>debootstrap</i> or <i>cdebootstrap</i>, from the local media or some network-based network, resulting in a standard Debian system being installed to the hard disk.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="582" href="#582" class="lnkocn">582</a></label>
  <p class="i0" id="o582">
    This whole process can be preseeded and customized in a number of ways; see the relevant pages in the Debian Installer manual for more information. Once you have a working preseeding file, <i>live-build</i> can automatically put it in the image and enable it for you.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="583" href="#583" class="lnkocn">583</a></label>
  <p class="i0" id="o583">
    <b>"Live" Debian Installer</b>: This is a Debian Live image with a separate kernel and initrd which (when selected from the appropriate bootloader) launches into an instance of the Debian Installer.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="584" href="#584" class="lnkocn">584</a></label>
  <p class="i0" id="o584">
    Installation will proceed in an identical fashion to the "Regular" installation described above, but at the actual package installation stage, instead of using <i>debootstrap</i> to fetch and install packages, the live filesystem image is copied to the target. This is achieved with a special udeb called <i>live-installer</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="585" href="#585" class="lnkocn">585</a></label>
  <p class="i0" id="o585">
    After this stage, the Debian Installer continues as normal, installing and configuring items such as bootloaders and local users, etc.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="586" href="#586" class="lnkocn">586</a></label>
  <p class="i0" id="o586">
    <b>Note:</b> to support both normal and live installer entries in the bootloader of the same live media, you must disable <i>live-installer</i> by preseeding <tt>live-installer/enable=false</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="587" href="#587" class="lnkocn">587</a></label>
  <p class="i0" id="o587">
    <b>"Desktop" Debian Installer</b>: Regardless of the type of Debian Installer included, <tt>d-i</tt> can be launched from the Desktop by clicking on an icon. This is user friendlier in some situations. In order to make use of this, the <i>debian-installer-launcher</i> package needs to be included.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="588" href="#588" class="lnkocn">588</a></label>
  <p class="i0" id="o588">
    Note that by default, <i>live-build</i> does not include Debian Installer images in the images, it needs to be specifically enabled with <tt>lb config</tt>. Also, please note that for the "Desktop" installer to work, the kernel of the live system must match the kernel <tt>d-i</tt> uses for the specified architecture. For example:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="589" href="#589" class="lnkocn">589</a></label>
  <p class="code" id="o589">
    $ lb config --architectures i386 --linux-flavours 486 \<br>
     --debian-installer live<br>
$ echo debian-installer-launcher &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="590" href="#590" class="lnkocn">590</a></label>
  <h5 class="norm" id="o590">
<a name="590"></a>
    <a name="12.2"></a><a name="h12.2"></a><a name="h12.2">12.2 Customizing Debian Installer by preseeding</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="591" href="#591" class="lnkocn">591</a></label>
  <p class="i0" id="o591">
    As described in the Debian Installer Manual, Appendix B at ‹<a href="http://www.debian.org/releases/stable/i386/apb.html" target="_top">http://www.debian.org/releases/stable/i386/apb.html</a>›, "Preseeding provides a way to set answers to questions asked during the installation process, without having to manually enter the answers while the installation is running. This makes it possible to fully automate most types of installation and even offers some features not available during normal installations." This kind of customization is best accomplished with <i>live-build</i> by placing the configuration in a <tt>preseed.cfg</tt> file included in <tt>config/debian-installer/</tt>. For example, to preseed setting the locale to <tt>en_US</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="592" href="#592" class="lnkocn">592</a></label>
  <p class="code" id="o592">
    $ echo "d-i debian-installer/locale string en_US" \<br>
     &gt;&gt; config/debian-installer/preseed.cfg<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="593" href="#593" class="lnkocn">593</a></label>
  <h5 class="norm" id="o593">
<a name="593"></a>
    <a name="12.3"></a><a name="h12.3"></a><a name="h12.3">12.3 Customizing Debian Installer content</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="594" href="#594" class="lnkocn">594</a></label>
  <p class="i0" id="o594">
    For experimental or debugging purposes, you might want to include locally built <tt>d-i</tt> component udeb packages. Place these in <tt>config/packages.binary/</tt> to include them in the image. Additional or replacement files and directories may be included in the installer initrd as well, in a similar fashion to  <a href="#live-chroot-local-includes">Live/chroot local includes</a>,  by placing the material in <tt>config/includes.debian-installer/</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="595" href="#595" class="lnkocn">595</a></label>
  <h2 class="norm" id="o595">
<a name="595"></a>
    <a name="h">Project</a>
  </h2>
</div>

<div class="substance">
  <label class="ocn"><a name="596" href="#596" class="lnkocn">596</a></label>
  <h4 class="norm" id="o596">
<a name="596"></a>
    <a name="h13"></a><a name="contributing_to_the_project"></a><a name="contributing-to-project"></a><a name="hcontributing-to-project">13. Contributing to the project</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="597" href="#597" class="lnkocn">597</a></label>
  <p class="i0" id="o597">
    When submitting a contribution, please clearly identify its copyright holder and include the licensing statement. Note that to be accepted, the contribution must be licensed under the same license as the rest of the documents, namely, GPL version 3 or later.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="598" href="#598" class="lnkocn">598</a></label>
  <p class="i0" id="o598">
    Contributions to the project, such as translations and patches, are greatly welcome. Anyone can directly commit to the repositories, however, we ask you to send bigger changes to the mailing list to discuss them first. See the section  <a href="#contact">Contact</a>  for more information.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="599" href="#599" class="lnkocn">599</a></label>
  <p class="i0" id="o599">
    The Debian Live Project uses Git as version control system and source code management. As explained in  <a href="#git-repositories">Git repositories</a>  there are two main development branches: <b>debian</b> and <b>debian-next</b>. Everybody can commit to the debian-next branches of the <i>live-boot</i>, <i>live-build</i>, <i>live-config</i>, <i>live-debconfig</i>, <i>live-manual</i> and <i>live-tools</i> repositories.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="600" href="#600" class="lnkocn">600</a></label>
  <p class="i0" id="o600">
    However, there are certain restrictions. The server will reject:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="601" href="#601" class="lnkocn">601</a></label>
  <li class="bullet" id="o601">
    Non fast-forward pushes.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="602" href="#602" class="lnkocn">602</a></label>
  <li class="bullet" id="o602">
    Merge commits.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="603" href="#603" class="lnkocn">603</a></label>
  <li class="bullet" id="o603">
    Adding or removing tags or branches.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="604" href="#604" class="lnkocn">604</a></label>
  <p class="i0" id="o604">
    Even though all commits might be revised, we ask you to use your common sense and make good commits with good commit messages.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="605" href="#605" class="lnkocn">605</a></label>
  <li class="bullet" id="o605">
    Write commit messages that consist of complete, meaningful sentences in English, starting with a capital letter and ending with a full stop. Usually, these will start with the form "Fixing/Adding/Removing/Correcting/Translating/...".
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="606" href="#606" class="lnkocn">606</a></label>
  <li class="bullet" id="o606">
    Write good commit messages. The first line must be an accurate summary of the contents of the commit which will be included in the changelog. If you need to make some further explanations, write them below leaving a blank line after the first one and then another blank line after each paragraph. Lines of paragraphs should not exceed 80 characters in length.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="607" href="#607" class="lnkocn">607</a></label>
  <li class="bullet" id="o607">
    Commit atomically, this is to say, do not mix unrelated things in the same commit. Make one different commit for each change you make.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="608" href="#608" class="lnkocn">608</a></label>
  <h5 class="norm" id="o608">
<a name="608"></a>
    <a name="13.1"></a><a name="h13.1"></a><a name="h13.1">13.1 Making changes</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="609" href="#609" class="lnkocn">609</a></label>
  <p class="i0" id="o609">
    In order to push to the repositories, you must follow the following procedure. Here we use <i>live-manual</i> as an example so replace it with the name of the repository you want to work with. For detailed information on how to edit <i>live-manual</i> see  <a href="#how-to-contribute">Contributing to this document</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="610" href="#610" class="lnkocn">610</a></label>
  <li class="bullet" id="o610">
    Fetch the public commit key:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="611" href="#611" class="lnkocn">611</a></label>
  <p class="code" id="o611">
    $ mkdir -p ~/.ssh/identity.d<br>
$ wget http://live.debian.net/other/keys/git@live.debian.net -O ~/.ssh/identity.d/git@live.debian.net<br>
$ wget http://live.debian.net/other/keys/git@live.debian.net.pub -O ~/.ssh/identity.d/git@live.debian.net.pub<br>
$ chmod 0600 ~/.ssh/identity.d/git@live.debian.net*<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="612" href="#612" class="lnkocn">612</a></label>
  <li class="bullet" id="o612">
    Add the following section to your openssh-client config:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="613" href="#613" class="lnkocn">613</a></label>
  <p class="code" id="o613">
    $ cat &gt;&gt; ~/.ssh/config &lt;&lt; EOF<br>
Host live.debian.net<br>
     Hostname live.debian.net<br>
     User git<br>
     IdentityFile ~/.ssh/identity.d/git@live.debian.net<br>
EOF<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="614" href="#614" class="lnkocn">614</a></label>
  <li class="bullet" id="o614">
    Check out a clone of <i>live-manual</i> through ssh:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="615" href="#615" class="lnkocn">615</a></label>
  <p class="code" id="o615">
    $ git clone git@live.debian.net:/live-manual.git<br>
$ cd live-manual &amp;&amp; git checkout debian-next<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="616" href="#616" class="lnkocn">616</a></label>
  <li class="bullet" id="o616">
    Make sure you have Git author and email set:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="617" href="#617" class="lnkocn">617</a></label>
  <p class="code" id="o617">
      $ git config user.name "John Doe"<br>
  $ git config user.email john@example.org<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="618" href="#618" class="lnkocn">618</a></label>
  <p class="i0" id="o618">
    <b>Important:</b> Remember that you should commit any changes on the <b>debian-next</b> branch.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="619" href="#619" class="lnkocn">619</a></label>
  <li class="bullet" id="o619">
    Make your changes. In this example you would first write a new section dealing with applying patches and then prepare to commit adding the files and writing your commit message like this:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="620" href="#620" class="lnkocn">620</a></label>
  <p class="code" id="o620">
    $ git commit -a -m "Adding a section on applying patches."<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="621" href="#621" class="lnkocn">621</a></label>
  <li class="bullet" id="o621">
    Push the commit to the server:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="622" href="#622" class="lnkocn">622</a></label>
  <p class="code" id="o622">
    $ git push<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="623" href="#623" class="lnkocn">623</a></label>
  <h4 class="norm" id="o623">
<a name="623"></a>
    <a name="h14"></a><a name="reporting_bugs"></a><a name="bugs"></a><a name="hbugs">14. Reporting bugs</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="624" href="#624" class="lnkocn">624</a></label>
  <p class="i0" id="o624">
    Debian Live is far from being perfect, but we want to make it as close as possible to perfect - with your help. Do not hesitate to report a bug. It is better to fill a report twice than never. However, this chapter includes recommendations on how to file good bug reports.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="625" href="#625" class="lnkocn">625</a></label>
  <p class="i0" id="o625">
    For the impatient:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="626" href="#626" class="lnkocn">626</a></label>
  <li class="bullet" id="o626">
    Always check first the image status updates on our homepage at ‹<a href="http://live.debian.net/" target="_top">http://live.debian.net/</a>› for known issues.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="627" href="#627" class="lnkocn">627</a></label>
  <li class="bullet" id="o627">
    Always try to reproduce the bug with the <b>most recent versions</b> of <i>live-build</i>, <i>live-boot</i>, <i>live-config</i> and <i>live-tools</i> before submitting a bug report.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="628" href="#628" class="lnkocn">628</a></label>
  <li class="bullet" id="o628">
    Try to give <b>as specific information as possible</b> about the bug. This includes (at least) the version of <i>live-build</i>, <i>live-boot</i>, <i>live-config</i>, and <i>live-tools</i> used and the distribution of the live system you are building.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="629" href="#629" class="lnkocn">629</a></label>
  <h5 class="norm" id="o629">
<a name="629"></a>
    <a name="14.1"></a><a name="h14.1"></a><a name="h14.1">14.1 Known issues</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="630" href="#630" class="lnkocn">630</a></label>
  <p class="i0" id="o630">
    Since Debian <b>testing</b> and Debian <b>unstable</b> distributions are moving targets, when you specify either of them as the target system distribution, a successful build may not always be possible.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="631" href="#631" class="lnkocn">631</a></label>
  <p class="i0" id="o631">
    If this causes too much difficulty for you, do not build a system based on <b>testing</b> or <b>unstable</b>, but rather, use <b>stable</b>. <i>live-build</i> always defaults to the <b>stable</b> release.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="632" href="#632" class="lnkocn">632</a></label>
  <p class="i0" id="o632">
    Currently known issues are listed under the section 'status' on our homepage at ‹<a href="http://live.debian.net/" target="_top">http://live.debian.net/</a>›.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="633" href="#633" class="lnkocn">633</a></label>
  <p class="i0" id="o633">
    It is out of the scope of this manual to train you to correctly identify and fix problems in packages of the development distributions, however, there are two things you can always try: If a build fails when the target distribution is <b>testing</b>, try <b>unstable</b>. If <b>unstable</b> does not work either, revert to <b>testing</b> and pin the newer version of the failing package from <b>unstable</b> (see  <a href="#apt-pinning">APT pinning</a>  for details).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="634" href="#634" class="lnkocn">634</a></label>
  <h5 class="norm" id="o634">
<a name="634"></a>
    <a name="14.2"></a><a name="h14.2"></a><a name="h14.2">14.2 Rebuild from scratch</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="635" href="#635" class="lnkocn">635</a></label>
  <p class="i0" id="o635">
    To ensure that a particular bug is not caused by an uncleanly built system, please always rebuild the whole live system from scratch to see if the bug is reproducible.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="636" href="#636" class="lnkocn">636</a></label>
  <h5 class="norm" id="o636">
<a name="636"></a>
    <a name="14.3"></a><a name="h14.3"></a><a name="h14.3">14.3 Use up-to-date packages</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="637" href="#637" class="lnkocn">637</a></label>
  <p class="i0" id="o637">
    Using outdated packages can cause significant problems when trying to reproduce (and ultimately fix) your problem. Make sure your build system is up-to-date and any packages included in your image are up-to-date as well.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="638" href="#638" class="lnkocn">638</a></label>
  <h5 class="norm" id="o638">
<a name="638"></a>
    <a name="h14.4"></a><a name="collect-information"></a><a name="hcollect-information">14.4 Collect information</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="639" href="#639" class="lnkocn">639</a></label>
  <p class="i0" id="o639">
    Please provide enough information with your report. Include, at least, the exact version of <i>live-build</i> where the bug is encountered and the steps to reproduce it. Please use your common sense and provide any other relevant information if you think that it might help in solving the problem.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="640" href="#640" class="lnkocn">640</a></label>
  <p class="i0" id="o640">
    To make the most out of your bug report, we require at least the following information:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="641" href="#641" class="lnkocn">641</a></label>
  <li class="bullet" id="o641">
    Architecture of the host system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="642" href="#642" class="lnkocn">642</a></label>
  <li class="bullet" id="o642">
    Version of <i>live-build</i> on the host system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="643" href="#643" class="lnkocn">643</a></label>
  <li class="bullet" id="o643">
    Version of <i>live-boot</i> on the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="644" href="#644" class="lnkocn">644</a></label>
  <li class="bullet" id="o644">
    Version of <i>live-config</i> on the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="645" href="#645" class="lnkocn">645</a></label>
  <li class="bullet" id="o645">
    Version of <i>live-tools</i> on the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="646" href="#646" class="lnkocn">646</a></label>
  <li class="bullet" id="o646">
    Version of <i>debootstrap</i> and/or <i>cdebootstrap</i> on the host system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="647" href="#647" class="lnkocn">647</a></label>
  <li class="bullet" id="o647">
    Architecture of the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="648" href="#648" class="lnkocn">648</a></label>
  <li class="bullet" id="o648">
    Distribution of the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="649" href="#649" class="lnkocn">649</a></label>
  <li class="bullet" id="o649">
    Version of the kernel on the live system
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="650" href="#650" class="lnkocn">650</a></label>
  <p class="i0" id="o650">
    You can generate a log of the build process by using the <tt>tee</tt> command. We recommend doing this automatically with an <tt>auto/build</tt> script (see  <a href="#managing-a-configuration">Managing a configuration</a>  for details).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="651" href="#651" class="lnkocn">651</a></label>
  <p class="code" id="o651">
    # lb build 2&gt;&amp;1 | tee build.log<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="652" href="#652" class="lnkocn">652</a></label>
  <p class="i0" id="o652">
    At boot time, <i>live-boot</i> stores a log in <tt>/var/log/live-boot.log</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="653" href="#653" class="lnkocn">653</a></label>
  <p class="i0" id="o653">
    Additionally, to rule out other errors, it is always a good idea to tar up your <tt>config/</tt> directory and upload it somewhere (do <b>not</b> send it as an attachment to the mailing list), so that we can try to reproduce the errors you encountered. If this is difficult (e.g. due to size) you can use the output of <tt>lb config --dump</tt> which produces a summary of your config tree (i.e. lists files in subdirectories of <tt>config/</tt> but does not include them).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="654" href="#654" class="lnkocn">654</a></label>
  <p class="i0" id="o654">
    Remember to send in any logs that were produced with English locale settings, e.g. run your <i>live-build</i> commands with a leading <tt>LC_ALL=C</tt> or <tt>LC_ALL=en_US</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="655" href="#655" class="lnkocn">655</a></label>
  <h5 class="norm" id="o655">
<a name="655"></a>
    <a name="14.5"></a><a name="h14.5"></a><a name="h14.5">14.5 Isolate the failing case if possible</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="656" href="#656" class="lnkocn">656</a></label>
  <p class="i0" id="o656">
    If possible, isolate the failing case to the smallest possible change that breaks. It is not always easy to do this so if you cannot manage it for your report, do not worry. However, if you plan your development cycle well, using small enough change sets per iteration, you may be able to isolate the problem by constructing a simpler 'base' configuration that closely matches your actual configuration plus just the broken change set added to it. If you have a hard time sorting out which of your changes broke, it may be that you are including too much in each change set and should develop in smaller increments.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="657" href="#657" class="lnkocn">657</a></label>
  <h5 class="norm" id="o657">
<a name="657"></a>
    <a name="14.6"></a><a name="h14.6"></a><a name="h14.6">14.6 Use the correct package to report the bug against</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="658" href="#658" class="lnkocn">658</a></label>
  <p class="i0" id="o658">
    If you do not know what component is responsible for the bug or if the bug is a general bug concerning live systems, you can fill a bug against the debian-live pseudo-package.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="659" href="#659" class="lnkocn">659</a></label>
  <p class="i0" id="o659">
    However, we would appreciate it if you try to narrow it down according to where the bug appears.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="660" href="#660" class="lnkocn">660</a></label>
  <h6 class="norm" id="o660">
<a name="660"></a>
    <a name="14.6.1"></a><a name="h14.6.1"></a><a name="h14.6.1">14.6.1 At build time while bootstrapping</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="661" href="#661" class="lnkocn">661</a></label>
  <p class="i0" id="o661">
    <i>live-build</i> first bootstraps a basic Debian system with <i>debootstrap</i> or <i>cdebootstrap</i>. Depending on the bootstrapping tool used and the Debian distribution it is bootstrapping, it may fail. If a bug appears here, check if the error is related to a specific Debian package (most likely), or if it is related to the bootstrapping tool itself.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="662" href="#662" class="lnkocn">662</a></label>
  <p class="i0" id="o662">
    In both cases, this is not a bug in Debian Live, but rather in Debian itself and probably we cannot fix it directly. Please report such a bug against the bootstrapping tool or the failing package.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="663" href="#663" class="lnkocn">663</a></label>
  <h6 class="norm" id="o663">
<a name="663"></a>
    <a name="14.6.2"></a><a name="h14.6.2"></a><a name="h14.6.2">14.6.2 At build time while installing packages</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="664" href="#664" class="lnkocn">664</a></label>
  <p class="i0" id="o664">
    <i>live-build</i> installs additional packages from the Debian archive and depending on the Debian distribution used and the daily archive state, it can fail. If a bug appears here, check if the error is also reproducible on a normal system.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="665" href="#665" class="lnkocn">665</a></label>
  <p class="i0" id="o665">
    If this is the case, this is not a bug in Debian Live, but rather in Debian - please report it against the failing package. Running <i>debootstrap</i> separately from the Live system build or running <tt>lb bootstrap --debug</tt> will give you more information.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="666" href="#666" class="lnkocn">666</a></label>
  <p class="i0" id="o666">
    Also, if you are using a local mirror and/or any sort of proxy and you are experiencing a problem, please always reproduce it first by bootstrapping from an official mirror.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="667" href="#667" class="lnkocn">667</a></label>
  <h6 class="norm" id="o667">
<a name="667"></a>
    <a name="14.6.3"></a><a name="h14.6.3"></a><a name="h14.6.3">14.6.3 At boot time</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="668" href="#668" class="lnkocn">668</a></label>
  <p class="i0" id="o668">
    If your image does not boot, please report it to the mailing list together with the information requested in  <a href="#collect-information">Collect information</a>.  Do not forget to mention, how/when the image failed, whether in Qemu, Virtualbox, VMWare or real hardware. If you are using a virtualization technology of any kind, please always run it on real hardware before reporting a bug. Providing a screenshot of the failure is also very helpful.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="669" href="#669" class="lnkocn">669</a></label>
  <h6 class="norm" id="o669">
<a name="669"></a>
    <a name="14.6.4"></a><a name="h14.6.4"></a><a name="h14.6.4">14.6.4 At run time</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="670" href="#670" class="lnkocn">670</a></label>
  <p class="i0" id="o670">
    If a package was successfully installed, but fails while actually running the Live system, this is probably a bug in Debian Live. However:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="671" href="#671" class="lnkocn">671</a></label>
  <h5 class="norm" id="o671">
<a name="671"></a>
    <a name="14.7"></a><a name="h14.7"></a><a name="h14.7">14.7 Do the research</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="672" href="#672" class="lnkocn">672</a></label>
  <p class="i0" id="o672">
    Before filing the bug, please search the web for the particular error message or symptom you are getting. As it is highly unlikely that you are the only person experiencing a particular problem. There is always a chance that it has been discussed elsewhere and a possible solution, patch, or workaround has been proposed.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="673" href="#673" class="lnkocn">673</a></label>
  <p class="i0" id="o673">
    You should pay particular attention to the Debian Live mailing list, as well as the homepage, as these are likely to contain the most up-to-date information. If such information exists, always include the references to it in your bug report.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="674" href="#674" class="lnkocn">674</a></label>
  <p class="i0" id="o674">
    In addition, you should check the current bug lists for <i>live-build</i>, <i>live-boot</i>, <i>live-config</i> and <i>live-tools</i> to see whether something similar has already been reported.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="675" href="#675" class="lnkocn">675</a></label>
  <h5 class="norm" id="o675">
<a name="675"></a>
    <a name="14.8"></a><a name="h14.8"></a><a name="h14.8">14.8 Where to report bugs</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="676" href="#676" class="lnkocn">676</a></label>
  <p class="i0" id="o676">
    The Debian Live project keeps track of all bugs in the Debian Bug Tracking System (BTS). For information on how to use the system, please see ‹<a href="http://bugs.debian.org/" target="_top">http://bugs.debian.org/</a>›. You can also submit the bugs by using the <tt>reportbug</tt> command from the package with the same name.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="677" href="#677" class="lnkocn">677</a></label>
  <p class="i0" id="o677">
    In general, you should report build time errors against the <i>live-build</i> package, boot time errors against <i>live-boot</i>, and run time errors against <i>live-config</i>. If you are unsure of which package is appropriate or need more help before submitting a bug report, please report it against the debian-live pseudo-package. We will then take care about it and reassign it where appropriate.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="678" href="#678" class="lnkocn">678</a></label>
  <p class="i0" id="o678">
    Please note that bugs found in distributions derived from Debian (such as Ubuntu and others) should <b>not</b> be reported to the Debian BTS unless they can be also reproduced on a Debian system using official Debian packages.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="679" href="#679" class="lnkocn">679</a></label>
  <h4 class="norm" id="o679">
<a name="679"></a>
    <a name="h15"></a><a name="coding_style"></a><a name="coding-style"></a><a name="hcoding-style">15. Coding Style</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="680" href="#680" class="lnkocn">680</a></label>
  <p class="i0" id="o680">
    This chapter documents the coding style used in <i>live-boot</i> and others.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="681" href="#681" class="lnkocn">681</a></label>
  <h5 class="norm" id="o681">
<a name="681"></a>
    <a name="15.1"></a><a name="h15.1"></a><a name="h15.1">15.1 Compatibility</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="682" href="#682" class="lnkocn">682</a></label>
  <li class="bullet" id="o682">
    Don't use syntax or semantics that are unique to the Bash shell. For example, the use of array constructs.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="683" href="#683" class="lnkocn">683</a></label>
  <li class="bullet" id="o683">
    Only use the POSIX subset - for example, use $(foo) over `foo`.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="684" href="#684" class="lnkocn">684</a></label>
  <li class="bullet" id="o684">
    You can check your scripts with 'sh -n' and 'checkbashisms'.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="685" href="#685" class="lnkocn">685</a></label>
  <li class="bullet" id="o685">
    Make sure all shell code runs with 'set -e'.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="686" href="#686" class="lnkocn">686</a></label>
  <h5 class="norm" id="o686">
<a name="686"></a>
    <a name="15.2"></a><a name="h15.2"></a><a name="h15.2">15.2 Indenting</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="687" href="#687" class="lnkocn">687</a></label>
  <li class="bullet" id="o687">
    Always use tabs over spaces.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="688" href="#688" class="lnkocn">688</a></label>
  <h5 class="norm" id="o688">
<a name="688"></a>
    <a name="15.3"></a><a name="h15.3"></a><a name="h15.3">15.3 Wrapping</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="689" href="#689" class="lnkocn">689</a></label>
  <li class="bullet" id="o689">
    Generally, lines are 80 chars at maximum.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="690" href="#690" class="lnkocn">690</a></label>
  <li class="bullet" id="o690">
    Use the "Linux style" of line breaks:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="691" href="#691" class="lnkocn">691</a></label>
  <p class="i0" id="o691">
    Bad:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="692" href="#692" class="lnkocn">692</a></label>
  <p class="code" id="o692">
    if foo; then<br>
         bar<br>
fi<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="693" href="#693" class="lnkocn">693</a></label>
  <p class="i0" id="o693">
    Good:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="694" href="#694" class="lnkocn">694</a></label>
  <p class="code" id="o694">
    if foo<br>
then<br>
         bar<br>
fi<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="695" href="#695" class="lnkocn">695</a></label>
  <li class="bullet" id="o695">
    The same holds for functions:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="696" href="#696" class="lnkocn">696</a></label>
  <p class="i0" id="o696">
    Bad:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="697" href="#697" class="lnkocn">697</a></label>
  <p class="code" id="o697">
    Foo () {<br>
         bar<br>
}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="698" href="#698" class="lnkocn">698</a></label>
  <p class="i0" id="o698">
    Good:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="699" href="#699" class="lnkocn">699</a></label>
  <p class="code" id="o699">
    Foo ()<br>
{<br>
         bar<br>
}<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="700" href="#700" class="lnkocn">700</a></label>
  <h5 class="norm" id="o700">
<a name="700"></a>
    <a name="15.4"></a><a name="h15.4"></a><a name="h15.4">15.4 Variables</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="701" href="#701" class="lnkocn">701</a></label>
  <li class="bullet" id="o701">
    Variables are always in capital letters.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="702" href="#702" class="lnkocn">702</a></label>
  <li class="bullet" id="o702">
    Variables used in <tt>lb config</tt> always start with <tt>LB_</tt> prefix.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="703" href="#703" class="lnkocn">703</a></label>
  <li class="bullet" id="o703">
    Internal temporary variables in <i>live-build</i> should start with the <tt>_LB_</tt> prefix.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="704" href="#704" class="lnkocn">704</a></label>
  <li class="bullet" id="o704">
    Local variables start with <i>live-build</i> <tt>__LB_</tt> prefix.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="705" href="#705" class="lnkocn">705</a></label>
  <li class="bullet" id="o705">
    Variables in connection to a boot parameter in <i>live-config</i> start with <tt>LIVE_</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="706" href="#706" class="lnkocn">706</a></label>
  <li class="bullet" id="o706">
    All other variables in <i>live-config</i> start with <tt>_</tt> prefix.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="707" href="#707" class="lnkocn">707</a></label>
  <li class="bullet" id="o707">
    Use braces around variables; e.g. write <tt>${FOO}</tt> instead of <tt>$FOO</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="708" href="#708" class="lnkocn">708</a></label>
  <li class="bullet" id="o708">
    Always protect variables with quotes to respect potential whitespaces: write <tt>"${FOO}"</tt> not <tt>${FOO}</tt>.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="709" href="#709" class="lnkocn">709</a></label>
  <li class="bullet" id="o709">
    For consistency reasons, always use quotes when assigning values to variables:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="710" href="#710" class="lnkocn">710</a></label>
  <p class="i0" id="o710">
    Bad:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="711" href="#711" class="lnkocn">711</a></label>
  <p class="code" id="o711">
    FOO=bar<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="712" href="#712" class="lnkocn">712</a></label>
  <p class="i0" id="o712">
    Good:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="713" href="#713" class="lnkocn">713</a></label>
  <p class="code" id="o713">
    FOO="bar"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="714" href="#714" class="lnkocn">714</a></label>
  <li class="bullet" id="o714">
    If multiple variables are used, quote the full expression:
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="715" href="#715" class="lnkocn">715</a></label>
  <p class="i0" id="o715">
    Bad:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="716" href="#716" class="lnkocn">716</a></label>
  <p class="code" id="o716">
    if [ -f "${FOO}"/foo/"${BAR}"/bar ]<br>
then<br>
         foobar<br>
fi<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="717" href="#717" class="lnkocn">717</a></label>
  <p class="i0" id="o717">
    Good:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="718" href="#718" class="lnkocn">718</a></label>
  <p class="code" id="o718">
    if [ -f "${FOO}/foo/${BAR}/bar" ]<br>
then<br>
         foobar<br>
fi<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="719" href="#719" class="lnkocn">719</a></label>
  <h5 class="norm" id="o719">
<a name="719"></a>
    <a name="15.5"></a><a name="h15.5"></a><a name="h15.5">15.5 Miscellaneous</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="720" href="#720" class="lnkocn">720</a></label>
  <li class="bullet" id="o720">
    Use "<tt>|</tt>" (without the surround quotes) as a separator in calls to sed, e.g. "<tt>sed -e 's|foo|bar|'</tt>" (without "").
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="721" href="#721" class="lnkocn">721</a></label>
  <li class="bullet" id="o721">
    Don't use the <tt>test</tt> command for comparisons or tests, use "<tt>[</tt>" "<tt>]</tt>" (without ""); e.g. "<tt>if [ -x /bin/foo ]; ...</tt>" and not "<tt>if test -x /bin/foo; ...</tt>".
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="722" href="#722" class="lnkocn">722</a></label>
  <li class="bullet" id="o722">
    Use <tt>case</tt> wherever possible over <tt>test</tt>, as it's easier to read and faster in execution.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="723" href="#723" class="lnkocn">723</a></label>
  <li class="bullet" id="o723">
    Use capitalized names for functions to limit messing with the users environment.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="724" href="#724" class="lnkocn">724</a></label>
  <h4 class="norm" id="o724">
<a name="724"></a>
    <a name="h16"></a><a name="procedures"></a><a name="hprocedures">16. Procedures</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="725" href="#725" class="lnkocn">725</a></label>
  <p class="i0" id="o725">
    This chapter documents the procedures within the Debian Live project for various tasks that need cooperation with other teams in Debian.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="726" href="#726" class="lnkocn">726</a></label>
  <h5 class="norm" id="o726">
<a name="726"></a>
    <a name="16.1"></a><a name="h16.1"></a><a name="h16.1">16.1 Major Releases</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="727" href="#727" class="lnkocn">727</a></label>
  <p class="i0" id="o727">
    Releasing a new stable major version of Debian includes a lot of different teams working together to make it happen. At some point, the Live team comes in and builds live system images. The requirements to do this are:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="728" href="#728" class="lnkocn">728</a></label>
  <li class="bullet" id="o728">
    A mirror containing the released versions for the debian and debian-security archives which the debian-live buildd can access.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="729" href="#729" class="lnkocn">729</a></label>
  <li class="bullet" id="o729">
    The names of the image need to be known (e.g. debian-live-VERSION-ARCH-FLAVOUR.iso).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="730" href="#730" class="lnkocn">730</a></label>
  <li class="bullet" id="o730">
    The data from debian-cd needs to be synced (udeb exclude lists).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="731" href="#731" class="lnkocn">731</a></label>
  <li class="bullet" id="o731">
    The includes from debian-cd needs to be synced (README.*, doc/*, etc.).
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="732" href="#732" class="lnkocn">732</a></label>
  <li class="bullet" id="o732">
    Images are built and mirrored on cdimage.debian.org.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="733" href="#733" class="lnkocn">733</a></label>
  <h5 class="norm" id="o733">
<a name="733"></a>
    <a name="16.2"></a><a name="h16.2"></a><a name="h16.2">16.2 Point Releases</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="734" href="#734" class="lnkocn">734</a></label>
  <li class="bullet" id="o734">
    Again, we need updated mirrors of debian and debian-security.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="735" href="#735" class="lnkocn">735</a></label>
  <li class="bullet" id="o735">
    Images are built and mirrored on cdimage.debian.org.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="736" href="#736" class="lnkocn">736</a></label>
  <li class="bullet" id="o736">
    Send announcement mail.
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="737" href="#737" class="lnkocn">737</a></label>
  <h6 class="norm" id="o737">
<a name="737"></a>
    <a name="16.2.1"></a><a name="h16.2.1"></a><a name="h16.2.1">16.2.1 Last Point Release of a Debian Release</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="738" href="#738" class="lnkocn">738</a></label>
  <p class="i0" id="o738">
    Remember to adjust both chroot and binary mirrors when building the last set of  images for a Debian release after it has been moved away from ftp.debian.org to  archive.debian.org. That way, old prebuilt live images are still useful without  user modifications.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="739" href="#739" class="lnkocn">739</a></label>
  <h6 class="norm" id="o739">
<a name="739"></a>
    <a name="16.2.2"></a><a name="h16.2.2"></a><a name="h16.2.2">16.2.2 Point release announcement template</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="740" href="#740" class="lnkocn">740</a></label>
  <p class="i0" id="o740">
    An annoucement mail for point releases can be generated using the template below and the following command:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="741" href="#741" class="lnkocn">741</a></label>
  <p class="code" id="o741">
    $ sed \<br>
     -e 's|@MAJOR@|6.0|g' \<br>
     -e 's|@MINOR@|6.0.6|g' \<br>
     -e 's|@CODENAME@|squeeze|g' \<br>
     -e 's|@ANNOUNCE@|2012/msg00012.html|g'<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="742" href="#742" class="lnkocn">742</a></label>
  <p class="i0" id="o742">
    Please check the mail carefully before sending and pass it to others for proof-reading.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="743" href="#743" class="lnkocn">743</a></label>
  <p class="code" id="o743">
    Updated Debian Live @MAJOR@: @MINOR@ released<br><br>
The Debian Live project is pleased to announce the @MINOR@ update of the<br>
Live images for the stable distribution Debian @MAJOR@ (codename "@CODENAME@").<br><br>
The images are available for download at:<br><br>
   &lt;http://live.debian.net/cdimage/release/current/&gt;<br><br>
and later at:<br><br>
   &lt;http://cdimage.debian.org/cdimage/release/current-live/&gt;<br><br>
This update includes the changes of the Debian @MINOR@ release:<br><br>
   &lt;http://lists.debian.org/debian-announce/@ANNOUNCE@&gt;<br><br>
Additionally it includes the following Live-specific changes:<br><br>
  * [INSERT LIVE-SPECIFIC CHANGE HERE]<br>
  * [INSERT LIVE-SPECIFIC CHANGE HERE]<br>
  * [LARGER ISSUES MAY DESERVE THEIR OWN SECTION]<br><br>
About Debian Live<br>
-----------------<br>
The Debian Live project produces the tools used to build official<br>
Debian Live systems and the official Debian Live images themselves.<br><br>
About Debian<br>
------------<br>
The Debian Project is an association of Free Software developers who<br>
volunteer their time and effort in order to produce the completely free<br>
operating system Debian.<br><br>
Contact Information<br>
-------------------<br>
For further information, please visit the Debian Live web pages at<br>
&lt;http://live.debian.net/&gt;, or contact the Debian Live team at<br>
&lt;debian-live@lists.debian.org&gt;.<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="744" href="#744" class="lnkocn">744</a></label>
  <h4 class="norm" id="o744">
<a name="744"></a>
    <a name="h17"></a><a name="git_repositories"></a><a name="git-repositories"></a><a name="hgit-repositories">17. Git repositories</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="745" href="#745" class="lnkocn">745</a></label>
  <p class="i0" id="o745">
    The list of all the available repositories of the Debian Live Project can be found at ‹<a href="http://live.debian.net/gitweb" target="_top">http://live.debian.net/gitweb</a>›. The project's git URLs have the form: <tt>protocol://live.debian.net/git/repository</tt>. Thus, in order to clone <i>live-manual</i> read-only, launch:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="746" href="#746" class="lnkocn">746</a></label>
  <p class="code" id="o746">
    $ git clone git://live.debian.net/git/live-manual.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="747" href="#747" class="lnkocn">747</a></label>
  <p class="i0" id="o747">
    Or,
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="748" href="#748" class="lnkocn">748</a></label>
  <p class="code" id="o748">
    $ git clone http://live.debian.net/git/live-manual.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="749" href="#749" class="lnkocn">749</a></label>
  <p class="i0" id="o749">
    Or,
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="750" href="#750" class="lnkocn">750</a></label>
  <p class="code" id="o750">
    $ git clone https://live.debian.net/git/live-manual.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="751" href="#751" class="lnkocn">751</a></label>
  <p class="i0" id="o751">
    The cloning addresses with write permission have the form: <tt>git@live.debian.net:/repository</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="752" href="#752" class="lnkocn">752</a></label>
  <p class="i0" id="o752">
    So, again, to clone <i>live-manual</i> but over ssh you must type:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="753" href="#753" class="lnkocn">753</a></label>
  <p class="code" id="o753">
    $ git clone git@live.debian.net:/live-manual.git<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="754" href="#754" class="lnkocn">754</a></label>
  <p class="i0" id="o754">
    The git tree is made up of several different branches. The <b>debian</b> and the <b>debian-next</b> branches are particularly noteworthy because they contain the actual work that will eventually be included in each new release.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="755" href="#755" class="lnkocn">755</a></label>
  <p class="i0" id="o755">
    After cloning any of the existing repositories, you will be on the <b>debian</b> branch. This is appropriate to take a look at the state of the project's latest release but before starting work it is crucial to switch to the <b>debian-next</b> branch. To do so:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="756" href="#756" class="lnkocn">756</a></label>
  <p class="code" id="o756">
    $ git checkout debian-next<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="757" href="#757" class="lnkocn">757</a></label>
  <p class="i0" id="o757">
    The <b>debian-next</b> branch, which is not always fast-forward, is where all the changes are committed first before being merged into the <b>debian</b> branch. To make an analogy, it is like a testing ground. If you are working on this branch and need to pull, you will have to do a <tt>git pull --rebase</tt> so that your local modifications are staged while pulling from the server and then your changes will be put on top of it all.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="758" href="#758" class="lnkocn">758</a></label>
  <h5 class="norm" id="o758">
<a name="758"></a>
    <a name="17.1"></a><a name="h17.1"></a><a name="h17.1">17.1 Handling multiple repositories</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="759" href="#759" class="lnkocn">759</a></label>
  <p class="i0" id="o759">
    If you intend to clone several of the Debian Live repositories and  switch to the <b>debian-next</b> branch right away to check the latest code,  write a patch or contribute with a translation you ought to know that the git server provides a <tt>mrconfig</tt> file to ease the handling of several repositories. In order to use it you need to install the <i>mr</i> package and launch:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="760" href="#760" class="lnkocn">760</a></label>
  <p class="code" id="o760">
    $  mr bootstrap http://live.debian.net/other/mr/mrconfig<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="761" href="#761" class="lnkocn">761</a></label>
  <p class="i0" id="o761">
    This command will automatically clone and checkout the configurations used for the prebuilt images that the project publishes for general use and also the development repositories of the debian packages produced by the project.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="762" href="#762" class="lnkocn">762</a></label>
  <h2 class="norm" id="o762">
<a name="762"></a>
    <a name="h">Examples</a>
  </h2>
</div>

<div class="substance">
  <label class="ocn"><a name="763" href="#763" class="lnkocn">763</a></label>
  <h4 class="norm" id="o763">
<a name="763"></a>
    <a name="h18"></a><a name="examples"></a><a name="hexamples">18. Examples</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="764" href="#764" class="lnkocn">764</a></label>
  <p class="i0" id="o764">
    This chapter covers example builds for specific use cases with Debian Live. If you are new to building your own Debian Live images, we recommend you first look at the three tutorials in sequence, as each one teaches new techniques that will help you use and understand the remaining examples.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="765" href="#765" class="lnkocn">765</a></label>
  <h5 class="norm" id="o765">
<a name="765"></a>
    <a name="h18.1"></a><a name="using-the-examples"></a><a name="husing-the-examples">18.1 Using the examples</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="766" href="#766" class="lnkocn">766</a></label>
  <p class="i0" id="o766">
    To use these examples you need a system to build them on that meets the requirements listed in  <a href="#requirements">Requirements</a>  and has <i>live-build</i> installed as described in  <a href="#installing-live-build">Installing live-build</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="767" href="#767" class="lnkocn">767</a></label>
  <p class="i0" id="o767">
    Note that, for the sake of brevity, in these examples we do not specify a local mirror to use for the build. You can speed up downloads considerably if you use a local mirror. You may specify the options when you use <tt>lb config</tt>, as described in  <a href="#distribution-mirrors-build-time">Distribution mirrors used at build time</a>,  or for more convenience, set the default for your build system in <tt>/etc/live/build.conf</tt>. Simply create this file and in it, set the corresponding <tt>LB_MIRROR_*</tt> variables to your preferred mirror. All other mirrors used in the build will be defaulted from these values. For example:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="768" href="#768" class="lnkocn">768</a></label>
  <p class="code" id="o768">
    LB_MIRROR_BOOTSTRAP="http://mirror/debian/" <br>
LB_MIRROR_CHROOT_SECURITY="http://mirror/debian-security/" <br>
LB_MIRROR_CHROOT_BACKPORTS="http://mirror/debian-backports/"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="769" href="#769" class="lnkocn">769</a></label>
  <h5 class="norm" id="o769">
<a name="769"></a>
    <a name="h18.2"></a><a name="tutorial-1"></a><a name="htutorial-1">18.2 Tutorial 1: A standard image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="770" href="#770" class="lnkocn">770</a></label>
  <p class="i0" id="o770">
    <b>Use case:</b> Create a simple first image, learning the basics of <i>live-build</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="771" href="#771" class="lnkocn">771</a></label>
  <p class="i0" id="o771">
    In this tutorial, we will build a default ISO hybrid Debian Live image containing only base packages (no Xorg) and some Debian Live support packages, as a first exercise in using <i>live-build</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="772" href="#772" class="lnkocn">772</a></label>
  <p class="i0" id="o772">
    You can't get much simpler than this:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="773" href="#773" class="lnkocn">773</a></label>
  <p class="code" id="o773">
    $ mkdir tutorial1 ; cd tutorial1 ; lb config<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="774" href="#774" class="lnkocn">774</a></label>
  <p class="i0" id="o774">
    Examine the contents of the <tt>config/</tt> directory if you wish. You will see stored here a skeletal configuration, ready to customize or, in this case, use immediately to build a default image.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="775" href="#775" class="lnkocn">775</a></label>
  <p class="i0" id="o775">
    Now, as superuser, build the image, saving a log as you build with <tt>tee</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="776" href="#776" class="lnkocn">776</a></label>
  <p class="code" id="o776">
    # lb build 2&gt;&amp;1 | tee build.log<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="777" href="#777" class="lnkocn">777</a></label>
  <p class="i0" id="o777">
    Assuming all goes well, after a while, the current directory will contain <tt>binary.hybrid.iso</tt>. This ISO hybrid image can be booted directly in a virtual machine as described in  <a href="#testing-iso-with-qemu">Testing an ISO image with Qemu</a>  and  <a href="#testing-iso-with-virtualbox">Testing an ISO image with virtualbox</a>,  or else imaged onto optical media or a USB flash device as described in  <a href="#burning-iso-image">Burning an ISO image to a physical medium</a>  and  <a href="#copying-iso-hybrid-to-usb">Copying an ISO hybrid image to a USB stick</a>,  respectively.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="778" href="#778" class="lnkocn">778</a></label>
  <h5 class="norm" id="o778">
<a name="778"></a>
    <a name="h18.3"></a><a name="tutorial-2"></a><a name="htutorial-2">18.3 Tutorial 2: A web browser utility</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="779" href="#779" class="lnkocn">779</a></label>
  <p class="i0" id="o779">
    <b>Use case:</b> Create a web browser utility image, learning how to apply customizations.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="780" href="#780" class="lnkocn">780</a></label>
  <p class="i0" id="o780">
    In this tutorial, we will create an image suitable for use as a web browser utility, serving as an introduction to customizing Debian Live images.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="781" href="#781" class="lnkocn">781</a></label>
  <p class="code" id="o781">
    $ mkdir tutorial2<br>
$ cd tutorial2<br>
$ echo "task-lxde-desktop iceweasel" &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="782" href="#782" class="lnkocn">782</a></label>
  <p class="i0" id="o782">
    Our choice of LXDE for this example reflects our desire to provide a minimal desktop environment, since the focus of the image is the single use we have in mind, the web browser. We could go even further and provide a default configuration for the web browser in <tt>config/includes.chroot/etc/iceweasel/profile/</tt>, or additional support packages for viewing various kinds of web content, but we leave this as an exercise for the reader.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="783" href="#783" class="lnkocn">783</a></label>
  <p class="i0" id="o783">
    Build the image, again as superuser, keeping a log as in  <a href="#tutorial-1">Tutorial 1</a>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="784" href="#784" class="lnkocn">784</a></label>
  <p class="code" id="o784">
    # lb build 2&gt;&amp;1 | tee build.log<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="785" href="#785" class="lnkocn">785</a></label>
  <p class="i0" id="o785">
    Again, verify the image is OK and test, as in  <a href="#tutorial-1">Tutorial 1</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="786" href="#786" class="lnkocn">786</a></label>
  <h5 class="norm" id="o786">
<a name="786"></a>
    <a name="h18.4"></a><a name="tutorial-3"></a><a name="htutorial-3">18.4 Tutorial 3: A personalized image</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="787" href="#787" class="lnkocn">787</a></label>
  <p class="i0" id="o787">
    <b>Use case:</b> Create a project to build a personalized image, containing your favourite software to take with you on a USB stick wherever you go, and evolving in successive revisions as your needs and preferences change.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="788" href="#788" class="lnkocn">788</a></label>
  <p class="i0" id="o788">
    Since we will be changing our personalized image over a number of revisions, and we want to track those changes, trying things experimentally and possibly reverting them if things don't work out, we will keep our configuration in the popular <tt>git</tt> version control system. We will also use the best practice of autoconfiguration via <tt>auto</tt> scripts as described in  <a href="#managing-a-configuration">Managing a configuration</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="789" href="#789" class="lnkocn">789</a></label>
  <h6 class="norm" id="o789">
<a name="789"></a>
    <a name="18.4.1"></a><a name="h18.4.1"></a><a name="h18.4.1">18.4.1 First revision</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="790" href="#790" class="lnkocn">790</a></label>
  <p class="code" id="o790">
    $ mkdir -p tutorial3/auto<br>
$ cp /usr/share/doc/live-build/examples/auto/* tutorial3/auto/<br>
$ cd tutorial3<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="791" href="#791" class="lnkocn">791</a></label>
  <p class="i0" id="o791">
    Edit <tt>auto/config</tt> to read as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="792" href="#792" class="lnkocn">792</a></label>
  <p class="code" id="o792">
    #!/bin/sh<br><br>
lb config noauto \<br>
     --architectures i386 \<br>
     --linux-flavours 686-pae \<br>
     "${@}"<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="793" href="#793" class="lnkocn">793</a></label>
  <p class="i0" id="o793">
    Perform <tt>lb config</tt> to generate the config tree, using the <tt>auto/config</tt> script you just created:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="794" href="#794" class="lnkocn">794</a></label>
  <p class="code" id="o794">
    $ lb config<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="795" href="#795" class="lnkocn">795</a></label>
  <p class="i0" id="o795">
    Now populate your local package list:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="796" href="#796" class="lnkocn">796</a></label>
  <p class="code" id="o796">
    $ echo "task-lxde-desktop iceweasel xchat" &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="797" href="#797" class="lnkocn">797</a></label>
  <p class="i0" id="o797">
    First, <tt>--architectures i386</tt> ensures that on our <tt>amd64</tt> build system, we build a 32-bit version suitable for use on most machines. Second, we use <tt>--linux-flavours 686-pae</tt> because we don't anticipate using this image on much older systems. Third, we have chosen the <i>lxde</i> task metapackage to give us a minimal desktop. And finally, we have added two initial favourite packages: <i>iceweasel</i> and <i>xchat</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="798" href="#798" class="lnkocn">798</a></label>
  <p class="i0" id="o798">
    Now, build the image:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="799" href="#799" class="lnkocn">799</a></label>
  <p class="code" id="o799">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="800" href="#800" class="lnkocn">800</a></label>
  <p class="i0" id="o800">
    Note that unlike in the first two tutorials, we no longer have to type <tt>2&gt;&amp;1 | tee build.log</tt> as that is now included in <tt>auto/build</tt>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="801" href="#801" class="lnkocn">801</a></label>
  <p class="i0" id="o801">
    Once you've tested the image (as in  <a href="#tutorial-1">Tutorial 1</a>)  and are satisfied it works, it's time to initialize our <tt>git</tt> repository, adding only the auto scripts we just created, and then make the first commit:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="802" href="#802" class="lnkocn">802</a></label>
  <p class="code" id="o802">
    $ git init<br>
$ git add auto<br>
$ git commit -a -m "Initial import."<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="803" href="#803" class="lnkocn">803</a></label>
  <h6 class="norm" id="o803">
<a name="803"></a>
    <a name="18.4.2"></a><a name="h18.4.2"></a><a name="h18.4.2">18.4.2 Second revision</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="804" href="#804" class="lnkocn">804</a></label>
  <p class="i0" id="o804">
    In this revision, we're going to clean up from the first build, add the <i>vlc</i> package to our configuration, rebuild, test and commit.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="805" href="#805" class="lnkocn">805</a></label>
  <p class="i0" id="o805">
    The <tt>lb clean</tt> command will clean up all generated files from the previous build except for the cache, which saves having to re-download packages. This ensures that the subsequent <tt>lb build</tt> will re-run all stages to regenerate the files from our new configuration.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="806" href="#806" class="lnkocn">806</a></label>
  <p class="code" id="o806">
    # lb clean<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="807" href="#807" class="lnkocn">807</a></label>
  <p class="i0" id="o807">
    Now append the <i>vlc</i> package to our local package list in <tt>config/package-lists/my.list.chroot</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="808" href="#808" class="lnkocn">808</a></label>
  <p class="code" id="o808">
    $ echo vlc &gt;&gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="809" href="#809" class="lnkocn">809</a></label>
  <p class="i0" id="o809">
    Build again:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="810" href="#810" class="lnkocn">810</a></label>
  <p class="code" id="o810">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="811" href="#811" class="lnkocn">811</a></label>
  <p class="i0" id="o811">
    Test, and when you're satisfied, commit the next revision:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="812" href="#812" class="lnkocn">812</a></label>
  <p class="code" id="o812">
    $ git commit -a -m "Adding vlc media player."<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="813" href="#813" class="lnkocn">813</a></label>
  <p class="i0" id="o813">
    Of course, more complicated changes to the configuration are possible, perhaps adding files in subdirectories of <tt>config/</tt>. When you commit new revisions, just take care not to hand edit or commit the top-level files in <tt>config</tt> containing <tt>LB_*</tt> variables, as these are build products, too, and are always cleaned up by <tt>lb clean</tt> and re-created with <tt>lb config</tt> via their respective <tt>auto</tt> scripts.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="814" href="#814" class="lnkocn">814</a></label>
  <p class="i0" id="o814">
    We've come to the end of our tutorial series. While many more kinds of customization are possible, even just using the few features explored in these simple examples, an almost infinite variety of different images can be created. The remaining examples in this section cover several other use cases drawn from the collected experiences of users of Debian Live.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="815" href="#815" class="lnkocn">815</a></label>
  <h5 class="norm" id="o815">
<a name="815"></a>
    <a name="18.5"></a><a name="h18.5"></a><a name="h18.5">18.5 A VNC Kiosk Client</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="816" href="#816" class="lnkocn">816</a></label>
  <p class="i0" id="o816">
    <b>Use case:</b> Create an image with <i>live-build</i> to boot directly to a VNC server.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="817" href="#817" class="lnkocn">817</a></label>
  <p class="i0" id="o817">
    Make a build directory and create an skeletal configuration inside it, disabling recommends to make a minimal system. And then create two initial package lists: the first one generated with a script provided by <i>live-build</i> named <tt>Packages</tt> (see  <a href="#generated-package-lists">Generated package lists</a>),  and the second one including <i>xorg</i>, <i>gdm3</i>, <i>metacity</i> and <i>xvnc4viewer</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="818" href="#818" class="lnkocn">818</a></label>
  <p class="code" id="o818">
    $ mkdir vnc_kiosk_client<br>
$ cd vnc_kiosk_client<br>
$ lb config -a i386 -k 686-pae --apt-recommends false<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
$ echo "xorg gdm3 metacity xvnc4viewer" &gt; config/package-lists/my.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="819" href="#819" class="lnkocn">819</a></label>
  <p class="i0" id="o819">
    As explained in  <a href="#tweaking-apt-to-save-space">Tweaking APT to save space</a>  you may need to re-add some recommended packages to make your image work properly.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="820" href="#820" class="lnkocn">820</a></label>
  <p class="i0" id="o820">
    An easy way to list recommends is using <i>apt-cache</i>. For example:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="821" href="#821" class="lnkocn">821</a></label>
  <p class="code" id="o821">
    $ apt-cache depends live-config live-boot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="822" href="#822" class="lnkocn">822</a></label>
  <p class="i0" id="o822">
    In this example we found out that we had to re-include several packages recommended by <i>live-config</i> and <i>live-boot</i>: <tt>user-setup</tt> to make autologin work and <tt>sudo</tt> as an essential program to shutdown the system. Besides, it could be handy to add <tt>live-tools</tt> to be able to copy the image to RAM and <tt>eject</tt> to eventually eject the live media. So:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="823" href="#823" class="lnkocn">823</a></label>
  <p class="code" id="o823">
    $ echo "live-tools user-setup sudo eject" &gt; config/package-lists/recommends.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="824" href="#824" class="lnkocn">824</a></label>
  <p class="i0" id="o824">
    After that, create the directory <tt>/etc/skel</tt> in <tt>config/includes.chroot</tt> and put a custom <tt>.xsession</tt> in it for the default user that will launch <i>metacity</i> and start <i>xvncviewer</i>, connecting to port <tt>5901</tt> on a server at <tt>192.168.1.2</tt>:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="825" href="#825" class="lnkocn">825</a></label>
  <p class="code" id="o825">
    $ mkdir -p config/includes.chroot/etc/skel<br>
$ cat &gt; config/includes.chroot/etc/skel/.xsession &lt;&lt; EOF<br>
#!/bin/sh<br><br>
/usr/bin/metacity &amp;<br>
/usr/bin/xvncviewer 192.168.1.2:1<br><br>
exit<br>
EOF<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="826" href="#826" class="lnkocn">826</a></label>
  <p class="i0" id="o826">
    Build the image:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="827" href="#827" class="lnkocn">827</a></label>
  <p class="code" id="o827">
    # lb build<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="828" href="#828" class="lnkocn">828</a></label>
  <p class="i0" id="o828">
    Enjoy.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="829" href="#829" class="lnkocn">829</a></label>
  <h5 class="norm" id="o829">
<a name="829"></a>
    <a name="18.6"></a><a name="h18.6"></a><a name="h18.6">18.6 A base image for a 128MB USB key</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="830" href="#830" class="lnkocn">830</a></label>
  <p class="i0" id="o830">
    <b>Use case:</b> Create an hdd image with some components removed in order to fit on a 128MB USB key with a little space left over to use as you see fit.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="831" href="#831" class="lnkocn">831</a></label>
  <p class="i0" id="o831">
    When optimizing an image to fit a certain media size, you need to understand the tradeoffs you are making between size and functionality. In this example, we trim only so much as to make room for additional material within a 128MB media size, but without doing anything to destroy the integrity of the packages contained within, such as the purging of locale data via the <i>localepurge</i> package, or other such "intrusive" optimizations. Of particular note, we use <tt>--debootstrap-options</tt> to create a minimal system from scratch.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="832" href="#832" class="lnkocn">832</a></label>
  <p class="code" id="o832">
    $ lb config -b hdd -k 486 --apt-indices false --apt-recommends false --debootstrap-options "--variant=minbase" --memtest none<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="833" href="#833" class="lnkocn">833</a></label>
  <p class="i0" id="o833">
    To make the image work properly, we must re-add, at least, two recommended packages which are left out by the <tt>--apt-recommends false</tt> option. See  <a href="#tweaking-apt-to-save-space">Tweaking APT to save space</a>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="834" href="#834" class="lnkocn">834</a></label>
  <p class="code" id="o834">
    $ echo "user-setup sudo" &gt; config/package-lists/recommends.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="835" href="#835" class="lnkocn">835</a></label>
  <p class="i0" id="o835">
    Now, build the image in the usual way:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="836" href="#836" class="lnkocn">836</a></label>
  <p class="code" id="o836">
    # lb build 2&gt;&amp;1 | tee build.log<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="837" href="#837" class="lnkocn">837</a></label>
  <p class="i0" id="o837">
    On the author's system at the time of writing this, the above configuration produced an 80MB image. This compares favourably with the 182MB image produced by the default configuration in  <a href="#tutorial-1">Tutorial 1</a>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="838" href="#838" class="lnkocn">838</a></label>
  <p class="i0" id="o838">
    The biggest space-saver here, compared to building a standard image on an <tt>i386</tt> architecture system, is to select only the <tt>486</tt> kernel flavour instead of the default <tt>-k "486 686-pae"</tt>. Leaving off APT's indices with <tt>--apt-indices false</tt> also saves a fair amount of space, the tradeoff being that you need to do an <tt>apt-get update</tt> before using <i>apt</i> in the live system. Dropping recommended packages with <tt>--apt-recommends false</tt> saves some additional space, at the expense of omitting some packages you might otherwise expect to be there. <tt>--debootstrap-options "--variant=minbase"</tt> bootstraps a minimal system from the start. And finally, <tt>--memtest none</tt> prevents the installation of a memory tester.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="839" href="#839" class="lnkocn">839</a></label>
  <p class="i0" id="o839">
    <b>Note:</b> A minimal system can also be achieved using hooks, like for example the <tt>stripped.chroot</tt> hook found in <tt>/usr/share/doc/live-build/examples/hooks</tt>. It may shave off additional small amounts of space and produce an image of 76MB. But it is far better to bootstrap a minimal system from the start than downloading all the packages just to have them removed by a hook later. That is why using <i>debootstrap</i> is the recommended way of achieving this goal.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="840" href="#840" class="lnkocn">840</a></label>
  <h5 class="norm" id="o840">
<a name="840"></a>
    <a name="18.7"></a><a name="h18.7"></a><a name="h18.7">18.7 A localized KDE desktop and installer</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="841" href="#841" class="lnkocn">841</a></label>
  <p class="i0" id="o841">
    <b>Use case:</b> Create a KDE desktop image, localized for Brazilian Portuguese and including an installer.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="842" href="#842" class="lnkocn">842</a></label>
  <p class="i0" id="o842">
    We want to make an iso-hybrid image for i386 architecture using our preferred desktop, in this case KDE, containing all of the same packages that would be installed by the standard Debian installer for KDE.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="843" href="#843" class="lnkocn">843</a></label>
  <p class="i0" id="o843">
    Our initial problem is the discovery of the names of the appropriate language tasks. Currently, <i>live-build</i> cannot help with this. While we might get lucky and find this by trial-and-error, there is a tool, <tt>grep-dctrl</tt>, which can be used to dig it out of the task descriptions in tasksel-data, so to prepare, make sure you have both of those things:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="844" href="#844" class="lnkocn">844</a></label>
  <p class="code" id="o844">
    # apt-get install dctrl-tools tasksel-data<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="845" href="#845" class="lnkocn">845</a></label>
  <p class="i0" id="o845">
    Now we can search for the appropriate tasks, first with:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="846" href="#846" class="lnkocn">846</a></label>
  <p class="code" id="o846">
    $ grep-dctrl -FTest-lang pt_BR /usr/share/tasksel/descs/debian-tasks.desc -sTask<br>
Task: brazilian-portuguese<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="847" href="#847" class="lnkocn">847</a></label>
  <p class="i0" id="o847">
    By this command, we discover the task is called, plainly enough, brazilian-portuguese. Now to find the related tasks:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="848" href="#848" class="lnkocn">848</a></label>
  <p class="code" id="o848">
    $ grep-dctrl -FEnhances brazilian-portuguese /usr/share/tasksel/descs/debian-tasks.desc -sTask<br>
Task: brazilian-portuguese-desktop<br>
Task: brazilian-portuguese-kde-desktop<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="849" href="#849" class="lnkocn">849</a></label>
  <p class="i0" id="o849">
    At boot time we will generate the <b>pt_BR.UTF-8</b> locale and select the <b>pt</b> keyboard layout. Now let's put the pieces together. Recalling from  <a href="#using-metapackages">Using metapackages</a>  that task metapackages are prefixed <tt>task-</tt>, we just specify these language boot parameters, then add standard priority packages and all our discovered task metapackages to our package list as follows:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="850" href="#850" class="lnkocn">850</a></label>
  <p class="code" id="o850">
    $ mkdir live-pt_BR-kde<br>
$ cd live-pt_BR-kde<br>
$ lb config \<br>
     -a i386 \<br>
     -k 486 \<br>
     --bootappend-live "boot=live config locales=pt_BR.UTF-8 keyboard-layouts=pt" \<br>
     --debian-installer live<br>
$ echo '! Packages Priority standard' &gt; config/package-lists/standard.list.chroot<br>
$ echo task-kde-desktop task-brazilian-portuguese task-brazilian-portuguese-desktop \<br>
     task-brazilian-portuguese-kde-desktop &gt;&gt; config/package-lists/desktop.list.chroot<br>
$ echo debian-installer-launcher &gt;&gt; config/package-lists/installer.list.chroot<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="851" href="#851" class="lnkocn">851</a></label>
  <p class="i0" id="o851">
    Note that we have included the <i>debian-installer-launcher</i> package to launch the installer from the live desktop, and have also specified the 486 flavour kernel, as it is currently necessary to make the installer and live system kernels match for the launcher to work properly.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="852" href="#852" class="lnkocn">852</a></label>
  <h2 class="norm" id="o852">
<a name="852"></a>
    <a name="h">Appendix</a>
  </h2>
</div>

<div class="substance">
  <label class="ocn"><a name="853" href="#853" class="lnkocn">853</a></label>
  <h4 class="norm" id="o853">
<a name="853"></a>
    <a name="h19"></a><a name="style_guide"></a><a name="style-guide"></a><a name="hstyle-guide">19. Style guide</a>
  </h4>
</div>

<div class="substance">
  <label class="ocn"><a name="854" href="#854" class="lnkocn">854</a></label>
  <h5 class="norm" id="o854">
<a name="854"></a>
    <a name="19.1"></a><a name="h19.1"></a><a name="h19.1">19.1 Guidelines for authors</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="855" href="#855" class="lnkocn">855</a></label>
  <p class="i0" id="o855">
    This section deals with some general considerations to be taken into account when writing technical documentation for <i>live-manual</i>. They are divided into linguistic features and recommended procedures.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="856" href="#856" class="lnkocn">856</a></label>
  <p class="i0" id="o856">
    <b>Note:</b>  Authors should first read  <a href="#how-to-contribute">Contributing to this document</a>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="857" href="#857" class="lnkocn">857</a></label>
  <h6 class="norm" id="o857">
<a name="857"></a>
    <a name="19.1.1"></a><a name="h19.1.1"></a><a name="h19.1.1">19.1.1 Linguistic features</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="858" href="#858" class="lnkocn">858</a></label>
  <li class="bullet" id="o858">
    <i>Use plain English</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="859" href="#859" class="lnkocn">859</a></label>
  <p class="i0" id="o859">
    Keep in mind that a high percentage of your readers are not native speakers. So as a general rule try to use short, meaningful sentences, followed by a full stop.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="860" href="#860" class="lnkocn">860</a></label>
  <p class="i0" id="o860">
    This does not mean that you have to use a simplistic, naive style. It is a suggestion to try to avoid, as much as possible, complex subordinate sentences that make the text difficult to understand for non-native speakers.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="861" href="#861" class="lnkocn">861</a></label>
  <li class="bullet" id="o861">
    <i>Variety of English</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="862" href="#862" class="lnkocn">862</a></label>
  <p class="i0" id="o862">
    The most widely spread varieties of English are British and American so it is very likely that most authors will use either one or the other. In a collaborative environment, the ideal variety would be "International English" but it is very difficult, not to say impossible, to decide on which variety among all the existing ones, is the best to use.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="863" href="#863" class="lnkocn">863</a></label>
  <p class="i0" id="o863">
    We expect that different varieties may mix without creating misunderstandings but in general terms you should try to be coherent and before deciding on using British, American or any other English flavour at your discretion, please take a look at how other people write and try to imitate them.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="864" href="#864" class="lnkocn">864</a></label>
  <li class="bullet" id="o864">
    <i>Be balanced</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="865" href="#865" class="lnkocn">865</a></label>
  <p class="i0" id="o865">
    Do not be biased. Avoid including references to ideologies completely unrelated to <i>live-manual</i>. Technical writing should be as neutral as possible. It is in the very nature of scientific writing.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="866" href="#866" class="lnkocn">866</a></label>
  <li class="bullet" id="o866">
    <i>Be politically correct</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="867" href="#867" class="lnkocn">867</a></label>
  <p class="i0" id="o867">
    Try to avoid sexist language as much as possible. If you need to make references to the third person singular preferably use "they" rather than "he" or "she" or awkward inventions such as "s/he", "s(he)" and the like.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="868" href="#868" class="lnkocn">868</a></label>
  <li class="bullet" id="o868">
    <i>Be concise</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="869" href="#869" class="lnkocn">869</a></label>
  <p class="i0" id="o869">
    Go straight to the point and do not wander around aimlessly. Give as much information as necessary but do not give more information than necessary, this is to say, do not explain unnecessary details. Your readers are intelligent. Presume some previous knowledge on their part.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="870" href="#870" class="lnkocn">870</a></label>
  <li class="bullet" id="o870">
    <i>Minimize translation work</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="871" href="#871" class="lnkocn">871</a></label>
  <p class="i0" id="o871">
    Keep in mind that whatever you write will have to be translated into several other languages. This implies that a number of people will have to do an extra work if you add useless or redundant information.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="872" href="#872" class="lnkocn">872</a></label>
  <li class="bullet" id="o872">
    <i>Be coherent</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="873" href="#873" class="lnkocn">873</a></label>
  <p class="i0" id="o873">
    As suggested before, it is almost impossible to standardize a collaborative document into a perfectly unified whole. However, every effort on your side to write in a coherent way with the rest of the authors will be appreciated.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="874" href="#874" class="lnkocn">874</a></label>
  <li class="bullet" id="o874">
    <i>Be cohesive</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="875" href="#875" class="lnkocn">875</a></label>
  <p class="i0" id="o875">
    Use as many text-forming devices as necessary to make your text cohesive and unambiguous. (Text-forming devices are linguistic markers such as connectors).
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="876" href="#876" class="lnkocn">876</a></label>
  <li class="bullet" id="o876">
    <i>Be descriptive</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="877" href="#877" class="lnkocn">877</a></label>
  <p class="i0" id="o877">
    It is preferable to describe the point in one or several paragraphs than merely using a number of sentences in a typical "changelog" style. Describe it! Your readers will appreciate it.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="878" href="#878" class="lnkocn">878</a></label>
  <li class="bullet" id="o878">
    <i>Dictionary</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="879" href="#879" class="lnkocn">879</a></label>
  <p class="i0" id="o879">
    Look up the meaning of words in a dictionary or encyclopedia if you do not know how to express certain concepts in English. But keep in mind that a dictionary can either be your best friend or can turn into your worst enemy if you do not know how to use it correctly.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="880" href="#880" class="lnkocn">880</a></label>
  <p class="i0" id="o880">
    English has the largest vocabulary that exists (With over one million words). Many of these words are borrowings from other languages. When looking up the meaning of words in a bilingual dictionary the tendency of a non-native speaker is to choose the one that sounds more similar in their mother tongue. This often turns into an excessively formal discourse which does not sound quite natural in English.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="881" href="#881" class="lnkocn">881</a></label>
  <p class="i0" id="o881">
    As a general rule, if a concept can be expressed using different synonyms, it is a good advice to choose the first word proposed by the dictionary. If in doubt, choosing words of Germanic origin (Usually monosyllabic words) is often the right thing to do. Be warned that these two techniques might produce a rather informal discourse but at least your choice of words will be of wide use and generally accepted.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="882" href="#882" class="lnkocn">882</a></label>
  <p class="i0" id="o882">
    Using a dictionary of collocations is recommended. They are extremely helpful when it comes to know which words usually occur together.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="883" href="#883" class="lnkocn">883</a></label>
  <p class="i0" id="o883">
    Again it is a good practice to learn from the work of others. Using a search engine to check how other authors use certain expressions may help a lot.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="884" href="#884" class="lnkocn">884</a></label>
  <li class="bullet" id="o884">
    <i>False friends, idioms and other idiomatic expressions</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="885" href="#885" class="lnkocn">885</a></label>
  <p class="i0" id="o885">
    Watch out for false friends. No matter how proficient you are in a foreign language you cannot help falling from time to time in the trap of the so called "false friends", words that look similar in two languages but whose meanings or uses might be completely different.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="886" href="#886" class="lnkocn">886</a></label>
  <p class="i0" id="o886">
    Try to avoid idioms as much as possible. "Idioms" are expressions that may convey a completely different meaning from what their individual words seem to mean. Sometimes, idioms are difficult to understand even for native speakers!
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="887" href="#887" class="lnkocn">887</a></label>
  <li class="bullet" id="o887">
    <i>Avoid slang, abbreviations, contractions...</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="888" href="#888" class="lnkocn">888</a></label>
  <p class="i0" id="o888">
    Even though you are encouraged to use plain, everyday English, technical writing belongs to the formal register of the language.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="889" href="#889" class="lnkocn">889</a></label>
  <p class="i0" id="o889">
    Try to avoid slang, unusual abbreviations that are difficult to understand and above all contractions that try to imitate the spoken language. Not to mention typical irc and family friendly expressions.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="890" href="#890" class="lnkocn">890</a></label>
  <h6 class="norm" id="o890">
<a name="890"></a>
    <a name="19.1.2"></a><a name="h19.1.2"></a><a name="h19.1.2">19.1.2 Procedures</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="891" href="#891" class="lnkocn">891</a></label>
  <li class="bullet" id="o891">
    <i>Test before write</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="892" href="#892" class="lnkocn">892</a></label>
  <p class="i0" id="o892">
    It is important that authors test their examples before adding them to <i>live-manual</i> to ensure that everything works as described. Testing on a clean chroot or VM can be a good starting point. Besides, it would be ideal if the tests were then carried out on different machines with different hardware to spot possible problems that may arise.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="893" href="#893" class="lnkocn">893</a></label>
  <li class="bullet" id="o893">
    <i>Examples</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="894" href="#894" class="lnkocn">894</a></label>
  <p class="i0" id="o894">
    When providing an example try to be as specific as you can. An example is, after all, just an example.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="895" href="#895" class="lnkocn">895</a></label>
  <p class="i0" id="o895">
    It is often better to use a line that only applies to an specific case than using abstractions that may confuse your readers. In this case you can provide a brief explanation of the effects of the proposed example.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="896" href="#896" class="lnkocn">896</a></label>
  <p class="i0" id="o896">
    There may be some exceptions when the example suggests using some potentially dangerous commands that, if misused, may cause data loss or other similar undesirable effects. In this case you should provide a thorough explanation of the possible side effects.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="897" href="#897" class="lnkocn">897</a></label>
  <li class="bullet" id="o897">
    <i>External links</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="898" href="#898" class="lnkocn">898</a></label>
  <p class="i0" id="o898">
    Links to external sites should only be used when the information on those sites is crucial when it comes to understanding a special point. Even so, try to use links to external sites as sparsely as possible. Internet links are likely to change from time to time resulting in broken links and leaving your arguments in an incomplete state.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="899" href="#899" class="lnkocn">899</a></label>
  <p class="i0" id="o899">
    Besides, people who read the manual offline will not have the chance to follow those links.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="900" href="#900" class="lnkocn">900</a></label>
  <li class="bullet" id="o900">
    <i>Avoid branding and things that violate the license under which the manual is published</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="901" href="#901" class="lnkocn">901</a></label>
  <p class="i0" id="o901">
    Try to avoid branding as much as possible. Keep in mind that other downstream projects might make use of the documentation you write. So you are complicating things for them if you add certain specific material.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="902" href="#902" class="lnkocn">902</a></label>
  <p class="i0" id="o902">
    <i>live-manual</i> is licensed under the GNU GPL. This has a number of implications that apply to the distribution of the material (of any kind, including copyrighted graphics or logos) that is published with it.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="903" href="#903" class="lnkocn">903</a></label>
  <li class="bullet" id="o903">
    <i>Write a first draft, revise, edit, improve, redo if necessary</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="904" href="#904" class="lnkocn">904</a></label>
  <p class="i0" id="o904">
    - Brainstorm!. You need to organize your ideas first in a logical sequence of events.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="905" href="#905" class="lnkocn">905</a></label>
  <p class="i0" id="o905">
    - Once you have somehow organized those ideas in your mind write a first draft.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="906" href="#906" class="lnkocn">906</a></label>
  <p class="i0" id="o906">
    - Revise grammar, syntax and spelling.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="907" href="#907" class="lnkocn">907</a></label>
  <p class="i0" id="o907">
    - Improve your statements and redo any part if necessary.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="908" href="#908" class="lnkocn">908</a></label>
  <li class="bullet" id="o908">
    <i>Chapters</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="909" href="#909" class="lnkocn">909</a></label>
  <p class="i0" id="o909">
    Use the conventional numbering system for chapters and subtitles. e.g. 1, 1.1, 1.1.1, 1.1.2 ... 1.2, 1.2.1, 1.2.2 ... 2, 2.1 ... and so on. See markup below.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="910" href="#910" class="lnkocn">910</a></label>
  <p class="i0" id="o910">
    If you have to enumerate a series of steps or stages in your description, you can also use ordinal numbers: First, second, third ... or First, Then, After that, Finally ... Alternatively you can use bulleted items.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="911" href="#911" class="lnkocn">911</a></label>
  <li class="bullet" id="o911">
    <i>Markup</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="912" href="#912" class="lnkocn">912</a></label>
  <p class="i0" id="o912">
    And last but not least, <i>live-manual</i> uses  <a href="http://www.sisudoc.org">SiSU</a>  to process the text files and produce a multiple format output. It is recommended to take a look at  <a href="http://www.sisudoc.org/sisu/sisu_manual/markup.html">SiSU's manual</a>  to get familiar with its markup, or else type:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="913" href="#913" class="lnkocn">913</a></label>
  <p class="code" id="o913">
    $ sisu --help markup<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="914" href="#914" class="lnkocn">914</a></label>
  <p class="i0" id="o914">
    Here are some markup examples that may prove useful:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="915" href="#915" class="lnkocn">915</a></label>
  <p class="i0" id="o915">
    - For emphasis/bold text:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="916" href="#916" class="lnkocn">916</a></label>
  <p class="code" id="o916">
    *{foo}* or !{foo}!<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="917" href="#917" class="lnkocn">917</a></label>
  <p class="i0" id="o917">
    produces: <b>foo</b> or <b>foo</b>. Use it to emphasize certain key words.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="918" href="#918" class="lnkocn">918</a></label>
  <p class="i0" id="o918">
    - For italics:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="919" href="#919" class="lnkocn">919</a></label>
  <p class="code" id="o919">
    /{foo}/<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="920" href="#920" class="lnkocn">920</a></label>
  <p class="i0" id="o920">
    produces: <i>foo</i>. Use them e.g. for the names of debian packages.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="921" href="#921" class="lnkocn">921</a></label>
  <p class="i0" id="o921">
    - For monospace:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="922" href="#922" class="lnkocn">922</a></label>
  <p class="code" id="o922">
    #{foo}#<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="923" href="#923" class="lnkocn">923</a></label>
  <p class="i0" id="o923">
    produces: <tt>foo</tt>. Use it e.g. for the names of commands. And also to highlight some key words or things like paths.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="924" href="#924" class="lnkocn">924</a></label>
  <p class="i0" id="o924">
    - For code blocks:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="925" href="#925" class="lnkocn">925</a></label>
  <p class="code" id="o925">
    code{<br><br>
  $ foo<br>
  # bar<br><br>
}code<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="926" href="#926" class="lnkocn">926</a></label>
  <p class="i0" id="o926">
    produces:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="927" href="#927" class="lnkocn">927</a></label>
  <p class="code" id="o927">
    $ foo<br>
# bar<br><br></p>
</div>

<div class="substance">
  <label class="ocn"><a name="928" href="#928" class="lnkocn">928</a></label>
  <p class="i0" id="o928">
    Use <tt>code{</tt> to open and <tt>}code</tt> to close the tags. It is important to remember to leave a space at the beginning of each line of code.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="929" href="#929" class="lnkocn">929</a></label>
  <h5 class="norm" id="o929">
<a name="929"></a>
    <a name="19.2"></a><a name="h19.2"></a><a name="h19.2">19.2 Guidelines for translators</a>
  </h5>
</div>

<div class="substance">
  <label class="ocn"><a name="930" href="#930" class="lnkocn">930</a></label>
  <p class="i0" id="o930">
    This section deals with some general considerations to be taken into account when translating the contents of <i>live-manual</i>.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="931" href="#931" class="lnkocn">931</a></label>
  <p class="i0" id="o931">
    As a general recommendation, translators should have read and understood the translation rules that apply to their specific languages. Usually, translation groups and mailing lists provide information on how to produce translated work that complies with Debian quality standards.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="932" href="#932" class="lnkocn">932</a></label>
  <p class="i0" id="o932">
    <b>Note:</b>  Translators should also read  <a href="#how-to-contribute">Contributing to this document</a>.  In particular the section  <a href="#translation">Translation</a>
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="933" href="#933" class="lnkocn">933</a></label>
  <h6 class="norm" id="o933">
<a name="933"></a>
    <a name="19.2.1"></a><a name="h19.2.1"></a><a name="h19.2.1">19.2.1 Translation hints</a>
  </h6>
</div>

<div class="substance">
  <label class="ocn"><a name="934" href="#934" class="lnkocn">934</a></label>
  <li class="bullet" id="o934">
    <i>Comments</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="935" href="#935" class="lnkocn">935</a></label>
  <p class="i0" id="o935">
    The role of the translator is to convey as faithfully as possible the meaning of words, sentences, paragraphs and texts as written by the original authors into their target language.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="936" href="#936" class="lnkocn">936</a></label>
  <p class="i0" id="o936">
    So they should refrain from adding personal comments or extra bits of information of their own. If they want to add a comment for other translators working on the same documents, they can leave it in the space reserved for that. That is, the header of the strings in the <b>po</b> files preceded by a number sign <b>#</b>. Most graphical translation programs can automatically handle those types of comments.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="937" href="#937" class="lnkocn">937</a></label>
  <li class="bullet" id="o937">
    <i>TN, Translator's Note</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="938" href="#938" class="lnkocn">938</a></label>
  <p class="i0" id="o938">
    It is perfectly acceptable however, to include a word or an expression in brackets in the translated text if, and only if, that makes the meaning of a difficult word or expression clearer to the reader. Inside the brackets the translator should make evident that the addition was theirs using the abbreviation "TN" or "Translator's Note".
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="939" href="#939" class="lnkocn">939</a></label>
  <li class="bullet" id="o939">
    <i>Impersonal sentences</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="940" href="#940" class="lnkocn">940</a></label>
  <p class="i0" id="o940">
    Documents written in English make an extensive use of the impersonal form "you". In some other languages that do not share this characteristic, this might give the false impression that the original texts are directly addressing the reader when they are actually not doing so. Translators must be aware of that fact and reflect it in their language as accurately as possible.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="941" href="#941" class="lnkocn">941</a></label>
  <li class="bullet" id="o941">
    <i>False friends</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="942" href="#942" class="lnkocn">942</a></label>
  <p class="i0" id="o942">
    The trap of "false friends" explained before especially applies to translators. Double check the meaning of suspicious false friends if in doubt.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="943" href="#943" class="lnkocn">943</a></label>
  <li class="bullet" id="o943">
    <i>Markup</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="944" href="#944" class="lnkocn">944</a></label>
  <p class="i0" id="o944">
    Translators working initially with <b>pot</b> files and later on with <b>po</b> files will find many markup features in the strings. They can translate the text anyway, as long as it is translatable, but it is extremely important that they use exactly the same markup as the original English version.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="945" href="#945" class="lnkocn">945</a></label>
  <li class="bullet" id="o945">
    <i>Code blocks</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="946" href="#946" class="lnkocn">946</a></label>
  <p class="i0" id="o946">
    Even though the code blocks are usually untranslatable, including them in the translation is the only way to score a 100% complete translation. And even though it means more work at first because it requires the intervention of the translators if the code changes, it is the best way, in the long run, to identify what has already been translated and what has not when checking the integrity of the .po files.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="947" href="#947" class="lnkocn">947</a></label>
  <li class="bullet" id="o947">
    <i>Newlines</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="948" href="#948" class="lnkocn">948</a></label>
  <p class="i0" id="o948">
    The translated texts need to have the exact same newlines as the original texts. Be careful to press the "Enter" key or type <b>\n</b> if they appear in the original files. These newlines often appear, for instance, in the code blocks.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="949" href="#949" class="lnkocn">949</a></label>
  <p class="i0" id="o949">
    Make no mistake, this does not mean that the translated text needs to have the same length as the English version. That is nearly impossible.
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="950" href="#950" class="lnkocn">950</a></label>
  <li class="bullet" id="o950">
    <i>Untranslatable strings</i>
  </li>
</div>

<div class="substance">
  <label class="ocn"><a name="951" href="#951" class="lnkocn">951</a></label>
  <p class="i0" id="o951">
    Translators should never translate:
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="952" href="#952" class="lnkocn">952</a></label>
  <p class="i0" id="o952">
    - The code names of releases
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="953" href="#953" class="lnkocn">953</a></label>
  <p class="i0" id="o953">
    - The names of programs
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="954" href="#954" class="lnkocn">954</a></label>
  <p class="i0" id="o954">
    - The commands given as examples
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="955" href="#955" class="lnkocn">955</a></label>
  <p class="i0" id="o955">
    - Metadata (often between colons <b>:metadata:</b>)
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="956" href="#956" class="lnkocn">956</a></label>
  <p class="i0" id="o956">
    - Links
  </p>
</div>

<div class="substance">
  <label class="ocn"><a name="957" href="#957" class="lnkocn">957</a></label>
  <p class="i0" id="o957">
    - Paths
  </p>
</div>

<div class="substance">
  <label class=""><a name=""> </a></label>
  <p class="norm" id="o">
    </p>
<hr>
<br>
</div>

<div class="substance">
  <label class=""><a name=""> </a></label>
  <h2 class="norm" id="o">
<a name=""></a>
    <a name="h"></a>
  </h2>
</div>

<center><hr width="90%"></center>

</div>

<div class="main_column">
<p></p>


<a name="bottom" id="bottom"></a>
<a name="down" id="down"></a>
<a name="end" id="end"></a>
<a name="finish" id="finish"></a>
<a name="stop" id="stop"></a>
<a name="credits"></a>
</div>



</body>
</html>
